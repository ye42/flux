(()=>{var Ge=class extends Event{oldState;newState;constructor(i,{oldState:t="",newState:e="",...s}={}){super(i,s),this.oldState=String(t||""),this.newState=String(e||"")}},js=new WeakMap;function Qs(i,t,e){js.set(i,setTimeout(()=>{js.has(i)&&i.dispatchEvent(new Ge("toggle",{cancelable:!1,oldState:t,newState:e}))},0))}var Pi=globalThis.ShadowRoot||function(){},dr=globalThis.HTMLDialogElement||function(){},Be=new WeakMap,wt=new WeakMap,ge=new WeakMap;function He(i){return ge.get(i)||"hidden"}var Ye=new WeakMap;function fr(i){let t=i.popoverTargetElement;if(!(t instanceof HTMLElement))return;let e=He(t);i.popoverTargetAction==="show"&&e==="showing"||i.popoverTargetAction==="hide"&&e==="hidden"||(e==="showing"?me(t,!0,!0):It(t,!1)&&(Ye.set(t,i),Mi(t)))}function It(i,t){return!(i.popover!=="auto"&&i.popover!=="manual"||!i.isConnected||t&&He(i)!=="showing"||!t&&He(i)!=="hidden"||i instanceof dr&&i.hasAttribute("open")||document.fullscreenElement===i)}function Xs(i){return i?Array.from(wt.get(i.ownerDocument)||[]).indexOf(i)+1:0}function pr(i){let t=ta(i),e=br(i);return Xs(t)>Xs(e)?t:e}function $e(i){let t=wt.get(i);for(let e of t||[])if(!e.isConnected)t.delete(e);else return e;return null}function Gt(i){return typeof i.getRootNode=="function"?i.getRootNode():i.parentNode?Gt(i.parentNode):i}function ta(i){for(;i;){if(i instanceof HTMLElement&&i.popover==="auto"&&ge.get(i)==="showing")return i;if(i=i instanceof Element&&i.assignedSlot||i.parentElement||Gt(i),i instanceof Pi&&(i=i.host),i instanceof Document)return}}function br(i){for(;i;){let t=i.popoverTargetElement;if(t instanceof HTMLElement)return t;if(i=i.parentElement||Gt(i),i instanceof Pi&&(i=i.host),i instanceof Document)return}}function mr(i){let t=new Map,e=0;for(let r of wt.get(i.ownerDocument)||[])t.set(r,e),e+=1;t.set(i,e),e+=1;let s=null;function a(r){let o=ta(r);if(o===null)return null;let l=t.get(o);(s===null||t.get(s)<l)&&(s=o)}return a(i.parentElement||Gt(i)),s}function gr(i){return i.hidden||i instanceof Pi||(i instanceof HTMLButtonElement||i instanceof HTMLInputElement||i instanceof HTMLSelectElement||i instanceof HTMLTextAreaElement||i instanceof HTMLOptGroupElement||i instanceof HTMLOptionElement||i instanceof HTMLFieldSetElement)&&i.disabled||i instanceof HTMLInputElement&&i.type==="hidden"||i instanceof HTMLAnchorElement&&i.href===""?!1:typeof i.tabIndex=="number"&&i.tabIndex!==-1}function vr(i){if(i.shadowRoot&&i.shadowRoot.delegatesFocus!==!0)return null;let t=i;t.shadowRoot&&(t=t.shadowRoot);let e=t.querySelector("[autofocus]");if(e)return e;{let r=t.querySelectorAll("slot");for(let o of r){let l=o.assignedElements({flatten:!0});for(let n of l){if(n.hasAttribute("autofocus"))return n;if(e=n.querySelector("[autofocus]"),e)return e}}}let s=i.ownerDocument.createTreeWalker(t,NodeFilter.SHOW_ELEMENT),a=s.currentNode;for(;a;){if(gr(a))return a;a=s.nextNode()}}function yr(i){vr(i)?.focus()}var ze=new WeakMap;function Mi(i){if(!It(i,!1))return;let t=i.ownerDocument;if(!i.dispatchEvent(new Ge("beforetoggle",{cancelable:!0,oldState:"closed",newState:"open"}))||!It(i,!1))return;let e=!1;if(i.popover==="auto"){let a=i.getAttribute("popover"),r=mr(i)||t;if(je(r,!1,!0),a!==i.getAttribute("popover")||!It(i,!1))return}$e(t)||(e=!0),ze.delete(i);let s=t.activeElement;i.classList.add(":popover-open"),ge.set(i,"showing"),Be.has(t)||Be.set(t,new Set),Be.get(t).add(i),yr(i),i.popover==="auto"&&(wt.has(t)||wt.set(t,new Set),wt.get(t).add(i),ea(Ye.get(i),!0)),e&&s&&i.popover==="auto"&&ze.set(i,s),Qs(i,"closed","open")}function me(i,t=!1,e=!1){if(!It(i,!0))return;let s=i.ownerDocument;if(i.popover==="auto"&&(je(i,t,e),!It(i,!0))||(ea(Ye.get(i),!1),Ye.delete(i),e&&(i.dispatchEvent(new Ge("beforetoggle",{oldState:"open",newState:"closed"})),!It(i,!0))))return;Be.get(s)?.delete(i),wt.get(s)?.delete(i),i.classList.remove(":popover-open"),ge.set(i,"hidden"),e&&Qs(i,"open","closed");let a=ze.get(i);a&&(ze.delete(i),t&&a.focus())}function Ks(i,t=!1,e=!1){let s=$e(i);for(;s;)me(s,t,e),s=$e(i)}function je(i,t,e){let s=i.ownerDocument||i;if(i instanceof Document)return Ks(s,t,e);let a=null,r=!1;for(let o of wt.get(s)||[])if(o===i)r=!0;else if(r){a=o;break}if(!r)return Ks(s,t,e);for(;a&&He(a)==="showing"&&wt.get(s)?.size;)me(a,t,e)}var Ci=new WeakMap;function Js(i){if(!i.isTrusted)return;let t=i.composedPath()[0];if(!t)return;let e=t.ownerDocument;if(!$e(e))return;let a=pr(t);if(a&&i.type==="pointerdown")Ci.set(e,a);else if(i.type==="pointerup"){let r=Ci.get(e)===a;Ci.delete(e),r&&je(a||e,!1,!0)}}var Di=new WeakMap;function ea(i,t=!1){if(!i)return;Di.has(i)||Di.set(i,i.getAttribute("aria-expanded"));let e=i.popoverTargetElement;if(e instanceof HTMLElement&&e.popover==="auto")i.setAttribute("aria-expanded",String(t));else{let s=Di.get(i);s?i.setAttribute("aria-expanded",s):i.removeAttribute("aria-expanded")}}var Zs=globalThis.ShadowRoot||function(){};function wr(){return typeof HTMLElement<"u"&&typeof HTMLElement.prototype=="object"&&"popover"in HTMLElement.prototype}function Lt(i,t,e){let s=i[t];Object.defineProperty(i,t,{value(a){return s.call(this,e(a))}})}var xr=/(^|[^\\]):popover-open\b/g;function Ar(){return typeof globalThis.CSSLayerBlockRule=="function"}function Sr(){let i=Ar();return`
${i?"@layer popover-polyfill {":""}
  :where([popover]) {
    position: fixed;
    z-index: 2147483647;
    inset: 0;
    padding: 0.25em;
    width: fit-content;
    height: fit-content;
    border-width: initial;
    border-color: initial;
    border-image: initial;
    border-style: solid;
    background-color: canvas;
    color: canvastext;
    overflow: auto;
    margin: auto;
  }

  :where([popover]:not(.\\:popover-open)) {
    display: none;
  }

  :where(dialog[popover].\\:popover-open) {
    display: block;
  }

  :where(dialog[popover][open]) {
    display: revert;
  }

  :where([anchor].\\:popover-open) {
    inset: auto;
  }

  :where([anchor]:popover-open) {
    inset: auto;
  }

  @supports not (background-color: canvas) {
    :where([popover]) {
      background-color: white;
      color: black;
    }
  }

  @supports (width: -moz-fit-content) {
    :where([popover]) {
      width: -moz-fit-content;
      height: -moz-fit-content;
    }
  }

  @supports not (inset: 0) {
    :where([popover]) {
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
    }
  }
${i?"}":""}
`}var zt=null;function Ti(i){let t=Sr();if(zt===null)try{zt=new CSSStyleSheet,zt.replaceSync(t)}catch{zt=!1}if(zt===!1){let e=document.createElement("style");e.textContent=t,i instanceof Document?i.head.prepend(e):i.prepend(e)}else i.adoptedStyleSheets=[zt,...i.adoptedStyleSheets]}function _r(){if(typeof window>"u")return;window.ToggleEvent=window.ToggleEvent||Ge;function i(n){return n?.includes(":popover-open")&&(n=n.replace(xr,"$1.\\:popover-open")),n}Lt(Document.prototype,"querySelector",i),Lt(Document.prototype,"querySelectorAll",i),Lt(Element.prototype,"querySelector",i),Lt(Element.prototype,"querySelectorAll",i),Lt(Element.prototype,"matches",i),Lt(Element.prototype,"closest",i),Lt(DocumentFragment.prototype,"querySelectorAll",i),Object.defineProperties(HTMLElement.prototype,{popover:{enumerable:!0,configurable:!0,get(){if(!this.hasAttribute("popover"))return null;let n=(this.getAttribute("popover")||"").toLowerCase();return n===""||n=="auto"?"auto":"manual"},set(n){n===null?this.removeAttribute("popover"):this.setAttribute("popover",n)}},showPopover:{enumerable:!0,configurable:!0,value(){Mi(this)}},hidePopover:{enumerable:!0,configurable:!0,value(){me(this,!0,!0)}},togglePopover:{enumerable:!0,configurable:!0,value(n){ge.get(this)==="showing"&&n===void 0||n===!1?me(this,!0,!0):(n===void 0||n===!0)&&Mi(this)}}});let t=Element.prototype.attachShadow;t&&Object.defineProperties(Element.prototype,{attachShadow:{enumerable:!0,configurable:!0,writable:!0,value(n){let u=t.call(this,n);return Ti(u),u}}});let e=HTMLElement.prototype.attachInternals;e&&Object.defineProperties(HTMLElement.prototype,{attachInternals:{enumerable:!0,configurable:!0,writable:!0,value(){let n=e.call(this);return n.shadowRoot&&Ti(n.shadowRoot),n}}});let s=new WeakMap;function a(n){Object.defineProperties(n.prototype,{popoverTargetElement:{enumerable:!0,configurable:!0,set(u){if(u===null)this.removeAttribute("popovertarget"),s.delete(this);else if(u instanceof Element)this.setAttribute("popovertarget",""),s.set(this,u);else throw new TypeError("popoverTargetElement must be an element or null")},get(){if(this.localName!=="button"&&this.localName!=="input"||this.localName==="input"&&this.type!=="reset"&&this.type!=="image"&&this.type!=="button"||this.disabled||this.form&&this.type==="submit")return null;let u=s.get(this);if(u&&u.isConnected)return u;if(u&&!u.isConnected)return s.delete(this),null;let h=Gt(this),p=this.getAttribute("popovertarget");return(h instanceof Document||h instanceof Zs)&&p&&h.getElementById(p)||null}},popoverTargetAction:{enumerable:!0,configurable:!0,get(){let u=(this.getAttribute("popovertargetaction")||"").toLowerCase();return u==="show"||u==="hide"?u:"toggle"},set(u){this.setAttribute("popovertargetaction",u)}}})}a(HTMLButtonElement),a(HTMLInputElement);let r=n=>{let u=n.composedPath(),h=u[0];if(!(h instanceof Element)||h?.shadowRoot)return;let p=Gt(h);if(!(p instanceof Zs||p instanceof Document))return;let g=u.find(v=>v.matches?.("[popovertargetaction],[popovertarget]"));if(g){fr(g),n.preventDefault();return}},o=n=>{let u=n.key,h=n.target;!n.defaultPrevented&&h&&(u==="Escape"||u==="Esc")&&je(h.ownerDocument,!0,!0)};(n=>{n.addEventListener("click",r),n.addEventListener("keydown",o),n.addEventListener("pointerdown",Js),n.addEventListener("pointerup",Js)})(document),Ti(document)}wr()||_r();var ti=class extends Event{oldState;newState;constructor(i,{oldState:t="",newState:e="",...s}={}){super(i,s),this.oldState=String(t||""),this.newState=String(e||"")}},ia=new WeakMap;function na(i,t,e){ia.set(i,setTimeout(()=>{ia.has(i)&&i.dispatchEvent(new ti("toggle",{cancelable:!1,oldState:t,newState:e}))},0))}var Fi=globalThis.ShadowRoot||function(){},Er=globalThis.HTMLDialogElement||function(){},Xe=new WeakMap,xt=new WeakMap,ye=new WeakMap;function Ke(i){return ye.get(i)||"hidden"}var Je=new WeakMap;function kr(i){let t=i.popoverTargetElement;if(!(t instanceof HTMLElement))return;let e=Ke(t);i.popoverTargetAction==="show"&&e==="showing"||i.popoverTargetAction==="hide"&&e==="hidden"||(e==="showing"?ve(t,!0,!0):Ft(t,!1)&&(Je.set(t,i),Ni(t)))}function Ft(i,t){return!(i.popover!=="auto"&&i.popover!=="manual"||!i.isConnected||t&&Ke(i)!=="showing"||!t&&Ke(i)!=="hidden"||i instanceof Er&&i.hasAttribute("open")||document.fullscreenElement===i)}function sa(i){return i?Array.from(xt.get(i.ownerDocument)||[]).indexOf(i)+1:0}function Cr(i){let t=la(i),e=Dr(i);return sa(t)>sa(e)?t:e}function Ze(i){let t=xt.get(i);for(let e of t||[])if(!e.isConnected)t.delete(e);else return e;return null}function Xt(i){return typeof i.getRootNode=="function"?i.getRootNode():i.parentNode?Xt(i.parentNode):i}function la(i){for(;i;){if(i instanceof HTMLElement&&i.popover==="auto"&&ye.get(i)==="showing")return i;if(i=i instanceof Element&&i.assignedSlot||i.parentElement||Xt(i),i instanceof Fi&&(i=i.host),i instanceof Document)return}}function Dr(i){for(;i;){let t=i.popoverTargetElement;if(t instanceof HTMLElement)return t;if(i=i.parentElement||Xt(i),i instanceof Fi&&(i=i.host),i instanceof Document)return}}function Tr(i){let t=new Map,e=0;for(let r of xt.get(i.ownerDocument)||[])t.set(r,e),e+=1;t.set(i,e),e+=1;let s=null;function a(r){let o=la(r);if(o===null)return null;let l=t.get(o);(s===null||t.get(s)<l)&&(s=o)}return a(i.parentElement||Xt(i)),s}function Mr(i){return i.hidden||i instanceof Fi||(i instanceof HTMLButtonElement||i instanceof HTMLInputElement||i instanceof HTMLSelectElement||i instanceof HTMLTextAreaElement||i instanceof HTMLOptGroupElement||i instanceof HTMLOptionElement||i instanceof HTMLFieldSetElement)&&i.disabled||i instanceof HTMLInputElement&&i.type==="hidden"||i instanceof HTMLAnchorElement&&i.href===""?!1:typeof i.tabIndex=="number"&&i.tabIndex!==-1}function Pr(i){if(i.shadowRoot&&i.shadowRoot.delegatesFocus!==!0)return null;let t=i;t.shadowRoot&&(t=t.shadowRoot);let e=t.querySelector("[autofocus]");if(e)return e;{let r=t.querySelectorAll("slot");for(let o of r){let l=o.assignedElements({flatten:!0});for(let n of l){if(n.hasAttribute("autofocus"))return n;if(e=n.querySelector("[autofocus]"),e)return e}}}let s=i.ownerDocument.createTreeWalker(t,NodeFilter.SHOW_ELEMENT),a=s.currentNode;for(;a;){if(Mr(a))return a;a=s.nextNode()}}function Or(i){Pr(i)?.focus()}var Qe=new WeakMap;function Ni(i){if(!Ft(i,!1))return;let t=i.ownerDocument;if(!i.dispatchEvent(new ti("beforetoggle",{cancelable:!0,oldState:"closed",newState:"open"}))||!Ft(i,!1))return;let e=!1;if(i.popover==="auto"){let a=i.getAttribute("popover"),r=Tr(i)||t;if(ei(r,!1,!0),a!==i.getAttribute("popover")||!Ft(i,!1))return}Ze(t)||(e=!0),Qe.delete(i);let s=t.activeElement;i.classList.add(":popover-open"),ye.set(i,"showing"),Xe.has(t)||Xe.set(t,new Set),Xe.get(t).add(i),Or(i),i.popover==="auto"&&(xt.has(t)||xt.set(t,new Set),xt.get(t).add(i),ua(Je.get(i),!0)),e&&s&&i.popover==="auto"&&Qe.set(i,s),na(i,"closed","open")}function ve(i,t=!1,e=!1){if(!Ft(i,!0))return;let s=i.ownerDocument;if(i.popover==="auto"&&(ei(i,t,e),!Ft(i,!0))||(ua(Je.get(i),!1),Je.delete(i),e&&(i.dispatchEvent(new ti("beforetoggle",{oldState:"open",newState:"closed"})),!Ft(i,!0))))return;Xe.get(s)?.delete(i),xt.get(s)?.delete(i),i.classList.remove(":popover-open"),ye.set(i,"hidden"),e&&na(i,"open","closed");let a=Qe.get(i);a&&(Qe.delete(i),t&&a.focus())}function aa(i,t=!1,e=!1){let s=Ze(i);for(;s;)ve(s,t,e),s=Ze(i)}function ei(i,t,e){let s=i.ownerDocument||i;if(i instanceof Document)return aa(s,t,e);let a=null,r=!1;for(let o of xt.get(s)||[])if(o===i)r=!0;else if(r){a=o;break}if(!r)return aa(s,t,e);for(;a&&Ke(a)==="showing"&&xt.get(s)?.size;)ve(a,t,e)}var Oi=new WeakMap;function ra(i){if(!i.isTrusted)return;let t=i.composedPath()[0];if(!t)return;let e=t.ownerDocument;if(!Ze(e))return;let a=Cr(t);if(a&&i.type==="pointerdown")Oi.set(e,a);else if(i.type==="pointerup"){let r=Oi.get(e)===a;Oi.delete(e),r&&ei(a||e,!1,!0)}}var Li=new WeakMap;function ua(i,t=!1){if(!i)return;Li.has(i)||Li.set(i,i.getAttribute("aria-expanded"));let e=i.popoverTargetElement;if(e instanceof HTMLElement&&e.popover==="auto")i.setAttribute("aria-expanded",String(t));else{let s=Li.get(i);s?i.setAttribute("aria-expanded",s):i.removeAttribute("aria-expanded")}}var oa=globalThis.ShadowRoot||function(){};function ca(){return typeof HTMLElement<"u"&&typeof HTMLElement.prototype=="object"&&"popover"in HTMLElement.prototype}function ha(){return!!(document.body?.showPopover&&!/native code/i.test(document.body.showPopover.toString()))}function Nt(i,t,e){let s=i[t];Object.defineProperty(i,t,{value(a){return s.call(this,e(a))}})}var Lr=/(^|[^\\]):popover-open\b/g;function Ir(){return typeof globalThis.CSSLayerBlockRule=="function"}function Nr(){let i=Ir();return`
${i?"@layer popover-polyfill {":""}
  :where([popover]) {
    position: fixed;
    z-index: 2147483647;
    inset: 0;
    padding: 0.25em;
    width: fit-content;
    height: fit-content;
    border-width: initial;
    border-color: initial;
    border-image: initial;
    border-style: solid;
    background-color: canvas;
    color: canvastext;
    overflow: auto;
    margin: auto;
  }

  :where([popover]:not(.\\:popover-open)) {
    display: none;
  }

  :where(dialog[popover].\\:popover-open) {
    display: block;
  }

  :where(dialog[popover][open]) {
    display: revert;
  }

  :where([anchor].\\:popover-open) {
    inset: auto;
  }

  :where([anchor]:popover-open) {
    inset: auto;
  }

  @supports not (background-color: canvas) {
    :where([popover]) {
      background-color: white;
      color: black;
    }
  }

  @supports (width: -moz-fit-content) {
    :where([popover]) {
      width: -moz-fit-content;
      height: -moz-fit-content;
    }
  }

  @supports not (inset: 0) {
    :where([popover]) {
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
    }
  }
${i?"}":""}
`}var jt=null;function Ii(i){let t=Nr();if(jt===null)try{jt=new CSSStyleSheet,jt.replaceSync(t)}catch{jt=!1}if(jt===!1){let e=document.createElement("style");e.textContent=t,i instanceof Document?i.head.prepend(e):i.prepend(e)}else i.adoptedStyleSheets=[jt,...i.adoptedStyleSheets]}function da(){if(typeof window>"u")return;window.ToggleEvent=window.ToggleEvent||ti;function i(n){return n?.includes(":popover-open")&&(n=n.replace(Lr,"$1.\\:popover-open")),n}Nt(Document.prototype,"querySelector",i),Nt(Document.prototype,"querySelectorAll",i),Nt(Element.prototype,"querySelector",i),Nt(Element.prototype,"querySelectorAll",i),Nt(Element.prototype,"matches",i),Nt(Element.prototype,"closest",i),Nt(DocumentFragment.prototype,"querySelectorAll",i),Object.defineProperties(HTMLElement.prototype,{popover:{enumerable:!0,configurable:!0,get(){if(!this.hasAttribute("popover"))return null;let n=(this.getAttribute("popover")||"").toLowerCase();return n===""||n=="auto"?"auto":"manual"},set(n){n===null?this.removeAttribute("popover"):this.setAttribute("popover",n)}},showPopover:{enumerable:!0,configurable:!0,value(){Ni(this)}},hidePopover:{enumerable:!0,configurable:!0,value(){ve(this,!0,!0)}},togglePopover:{enumerable:!0,configurable:!0,value(n){ye.get(this)==="showing"&&n===void 0||n===!1?ve(this,!0,!0):(n===void 0||n===!0)&&Ni(this)}}});let t=Element.prototype.attachShadow;t&&Object.defineProperties(Element.prototype,{attachShadow:{enumerable:!0,configurable:!0,writable:!0,value(n){let u=t.call(this,n);return Ii(u),u}}});let e=HTMLElement.prototype.attachInternals;e&&Object.defineProperties(HTMLElement.prototype,{attachInternals:{enumerable:!0,configurable:!0,writable:!0,value(){let n=e.call(this);return n.shadowRoot&&Ii(n.shadowRoot),n}}});let s=new WeakMap;function a(n){Object.defineProperties(n.prototype,{popoverTargetElement:{enumerable:!0,configurable:!0,set(u){if(u===null)this.removeAttribute("popovertarget"),s.delete(this);else if(u instanceof Element)this.setAttribute("popovertarget",""),s.set(this,u);else throw new TypeError("popoverTargetElement must be an element or null")},get(){if(this.localName!=="button"&&this.localName!=="input"||this.localName==="input"&&this.type!=="reset"&&this.type!=="image"&&this.type!=="button"||this.disabled||this.form&&this.type==="submit")return null;let u=s.get(this);if(u&&u.isConnected)return u;if(u&&!u.isConnected)return s.delete(this),null;let h=Xt(this),p=this.getAttribute("popovertarget");return(h instanceof Document||h instanceof oa)&&p&&h.getElementById(p)||null}},popoverTargetAction:{enumerable:!0,configurable:!0,get(){let u=(this.getAttribute("popovertargetaction")||"").toLowerCase();return u==="show"||u==="hide"?u:"toggle"},set(u){this.setAttribute("popovertargetaction",u)}}})}a(HTMLButtonElement),a(HTMLInputElement);let r=n=>{let u=n.composedPath(),h=u[0];if(!(h instanceof Element)||h?.shadowRoot)return;let p=Xt(h);if(!(p instanceof oa||p instanceof Document))return;let g=u.find(v=>v.matches?.("[popovertargetaction],[popovertarget]"));if(g){kr(g),n.preventDefault();return}},o=n=>{let u=n.key,h=n.target;!n.defaultPrevented&&h&&(u==="Escape"||u==="Esc")&&ei(h.ownerDocument,!0,!0)};(n=>{n.addEventListener("click",r),n.addEventListener("keydown",o),n.addEventListener("pointerdown",ra),n.addEventListener("pointerup",ra)})(document),Ii(document)}function P(i){let t=i({css:(s,...a)=>`@layer base { ${s.raw[0]+a.join("")} }`});if(document.adoptedStyleSheets===void 0){let s=document.createElement("style");s.textContent=t,document.head.appendChild(s);return}let e=new CSSStyleSheet;e.replaceSync(t),document.adoptedStyleSheets=[...document.adoptedStyleSheets,e]}function ii(i,t){let e=i;for(;e;){if(t(e))return e;e=e.parentElement}}function q(i,t){let e=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,t?{acceptNode:s=>{let a,r;return t(s,{skip:()=>a=!0,reject:()=>r=!0}),a?NodeFilter.FILTER_SKIP:r?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}:{});return new Ri(e)}var Ri=class{constructor(t){this.walker=t}from(t){return this.walker.currentNode=t,this}first(){return this.walker.firstChild()}last(){return this.walker.lastChild()}next(t){return this.walker.currentNode=t,this.walker.nextSibling()}nextOrFirst(t){let e=this.next(t);return e||(this.walker.currentNode=this.walker.root,this.first())}prev(t){return this.walker.currentNode=t,this.walker.previousSibling()}prevOrLast(t){let e=this.prev(t);return e||(this.walker.currentNode=this.walker.root,this.last())}closest(t,e){let s=this.from(t).walker;for(;s.currentNode;){if(e(s.currentNode))return s.currentNode;s.parentNode()}}contains(t){return this.find(e=>e===t)}find(t){return this.walk((e,s)=>{t(e)&&s(e)})}findOrFirst(t){return this.find(t)||(this.walker.currentNode=this.walker.root),this.first()}each(t){this.walk(e=>t(e))}some(t){return!!this.find(t)}every(t){let e=!0;return this.walk(s=>{t(s)||(e=!1)}),e}map(t){let e=[];return this.walk(s=>e.push(t(s))),e}filter(t){let e=[];return this.walk(s=>t(s)&&e.push(s)),e}walk(t){let e,s=this.walker,a;for(;s.nextNode()&&(e=s.currentNode,t(e,r=>a=r),a===void 0););return a}};function C(i,t){customElements.define(`ui-${i}`,t)}function y(i,t,e,s={}){return i.addEventListener(t,e,s),{off:()=>i.removeEventListener(t,e),pause:a=>{i.removeEventListener(t,e),a(),i.addEventListener(t,e)}}}function pa(i){return["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[tabindex]","[contenteditable]"].some(e=>i.matches(e))&&i.tabIndex>=0}function Wi(i,t){let e;return function(){let s=this,a=arguments;e||(i.apply(s,a),e=!0,setTimeout(()=>e=!1,t))}}function qi(i,t){let e,s,a=t,r=!1,o={pause:()=>{r&&(clearTimeout(e),a-=Date.now()-s,r=!1)},resume:()=>{r||(s=Date.now(),e=setTimeout(i,a),r=!0)},cancel:()=>{clearTimeout(e),r=!1,a=t}};return o.resume(),o}var si="pointer";document.addEventListener("keydown",()=>si="keyboard",{capture:!0});document.addEventListener("pointerdown",i=>{si=i.pointerType==="mouse"?"mouse":"touch"},{capture:!0});function we(){return si==="keyboard"}function Fr(){return si==="touch"}function ai(i,t){let e="",s=Yr(()=>{e=""},300);i.addEventListener("keydown",a=>{a.key.length===1&&/[a-zA-Z]/.test(a.key)&&(e+=a.key,t(e),a.stopPropagation()),s()})}function Rr(i,t){return"lofi-"+(t?t+"-":"")+Math.random().toString(16).slice(2)}function U(i,t){let e=i.hasAttribute("id")?i.getAttribute("id"):Rr(i,t);return c(i,"id",e),i._x_bindings||(i._x_bindings={}),i._x_bindings.id||(i._x_bindings.id=e),e}function R(){let i=!1;return t=>(...e)=>{i||(i=!0,t(...e),i=!1)}}function Qt(i,t,{gain:e,lose:s,focusable:a,useSafeArea:r}){let o=!1,l=_=>{we()&&(i.contains(_.target)||t.contains(_.target)?(o=!0,e()):(o=!1,s()))};a&&document.addEventListener("focusin",l);let n=()=>{document.removeEventListener("focusin",l)},u=()=>{},h=()=>{},p=()=>{o=!1,s(),u(),h()},g=()=>{o=!1,u(),h()},v=_=>{Fr()||o||(o=!0,e(),setTimeout(()=>{let{safeArea:w,redraw:f,remove:x}=r?Wr(i,t,_.clientX,_.clientY):Hr();u=x;let S,E=Wi(k=>{let T=t.getBoundingClientRect(),I=i.getBoundingClientRect(),$;switch(w.contains(k.target)&&qr(I,T,k.clientX,k.clientY)?$="safeArea":t.contains(k.target)?$="panel":i.contains(k.target)?$="trigger":$="outside",S&&clearTimeout(S),$){case"outside":p();break;case"trigger":f(k.clientX,k.clientY);break;case"panel":u();break;case"safeArea":f(k.clientX,k.clientY),S=setTimeout(()=>{p()},300);break;default:break}},100);document.addEventListener("pointermove",E),h=()=>document.removeEventListener("pointermove",E)}))};i.addEventListener("pointerenter",v);let b=()=>{i.removeEventListener("pointerenter",v)};return{clear:g,remove:()=>{g(),b(),n()}}}function Wr(i,t,e,s){let a=document.createElement("div"),r=t.getBoundingClientRect(),o=i.getBoundingClientRect();a.style.position="fixed",c(a,"data-safe-area","");let l=(n,u)=>{if(r.top===0&&r.bottom===0)return;let h;r.left<o.left&&(h="left"),r.right>o.right&&(h="right"),r.top<o.top&&r.bottom<u&&(h="up"),r.bottom>o.bottom&&r.top>u&&(h="down"),h===void 0&&(h="right");let p,g,v,b,d,_,w,f,x=10;switch(h){case"left":p=r.right,g=Math.max(r.right,n)+5,v=g-p,b=Math.min(o.top,r.top)-x,d=Math.max(o.bottom,r.bottom)+x,_=d-b,w=u-b,f=`polygon(0% 0%, 100% ${w}px, 0% 100%)`;break;case"right":p=Math.min(r.left,n)-5,g=r.left,v=g-p,b=Math.min(o.top,r.top)-x,d=Math.max(o.bottom,r.bottom)+x,_=d-b,w=u-b,f=`polygon(0% ${w}px, 100% 0%, 100% 100%)`;break;case"up":p=Math.min(n,r.left)-x,g=Math.max(n,r.right)+x,v=g-p,b=r.bottom,d=Math.max(r.bottom,u)+5,_=d-b,w=n-p,f=`polygon(0% 0%, 100% 0%, ${w}px 100%)`;break;case"down":p=Math.min(n,r.left)-x,g=Math.max(n,r.right)+x,v=g-p,b=Math.min(r.top,u)-5,d=r.top,_=d-b,w=n-p,f=`polygon(${w}px 0%, 100% 100%, 0% 100%)`;break}a.style.left=`${p}px`,a.style.top=`${b}px`,a.style.width=`${v}px`,a.style.height=`${_}px`,a.style.clipPath=f};return{safeArea:a,redraw:(n,u)=>{a.isConnected||i.appendChild(a),l(n,u)},remove:()=>{a.remove()}}}function qr(i,t,e,s){return!Ur(i,e,s)&&!Vr(t,e,s)}function Ur(i,t,e){return i.left<=t&&t<=i.right&&i.top<=e&&e<=i.bottom}function Vr(i,t,e){return i.left<=t&&t<=i.right&&i.top<=e&&e<=i.bottom}function c(i,t,e){i._durableAttributeObserver===void 0&&(i._durableAttributeObserver=ba(i,[t])),i._durableAttributeObserver.hasAttribute(t)||i._durableAttributeObserver.addAttribute(t),i._durableAttributeObserver.pause(()=>{i.setAttribute(t,e)})}function nt(i,t){A(i,t),Br(i,t)}function A(i,t){i._durableAttributeObserver===void 0&&(i._durableAttributeObserver=ba(i,[t])),i._durableAttributeObserver.hasAttribute(t)||i._durableAttributeObserver.addAttribute(t),i._durableAttributeObserver.pause(()=>{i.removeAttribute(t)})}function Br(i,t){i?._durableAttributeObserver?.hasAttribute(t)&&i._durableAttributeObserver.releaseAttribute(t)}function ba(i,t){let e=a=>{a.forEach(r=>{r.oldValue===null?i._durableAttributeObserver.pause(()=>A(i,r.attributeName)):i._durableAttributeObserver.pause(()=>c(i,r.attributeName,r.oldValue))})},s=new MutationObserver(a=>e(a));return s.observe(i,{attributeFilter:t,attributeOldValue:!0}),{attributes:t,hasAttribute(a){return this.attributes.includes(a)},addAttribute(a){this.attributes.includes(a)||this.attributes.push(a),s.observe(i,{attributeFilter:this.attributes,attributeOldValue:!0})},releaseAttribute(a){this.hasAttribute(a)&&s.observe(i,{attributeFilter:this.attributes,attributeOldValue:!0})},pause(a){e(s.takeRecords()),s.disconnect(),a(),s.observe(i,{attributeFilter:this.attributes,attributeOldValue:!0})}}}function Hr(){return{safeArea:{contains:()=>!1},redraw:()=>{},remove:()=>{}}}function Yr(i,t){let e;return(...s)=>{clearTimeout(e),e=setTimeout(()=>{i(...s)},t)}}var Kt=0,Jt=!1;P(({css:i})=>i`[data-flux-allow-scroll] { pointer-events: auto; }`);function et(i=null,t=!1,e=[]){if(t)return{lock:()=>{},unlock:()=>{}};let s=(r=!1)=>{fa(document.documentElement),$r(document.documentElement,{paddingRight:`calc(${window.innerWidth-document.documentElement.clientWidth}px + ${window.getComputedStyle(document.documentElement).paddingRight})`,overflow:"hidden",...r?{pointerEvents:"none"}:{}}),r&&(c(i,"data-flux-allow-scroll",""),e.forEach(o=>{c(o,"data-flux-allow-scroll","")}),Jt=!0)},a=(r=!1)=>{fa(document.documentElement),r&&(nt(i,"data-flux-allow-scroll"),e.forEach(o=>{A(o,"data-flux-allow-scroll")}),Jt=!1)};return{lock(){Kt++,!(Kt>1&&i!==null&&Jt)&&s(i!==null&&!Jt)},unlock(){Kt=Math.max(0,Kt-1),!(Kt>0&&i!==null&&!Jt)&&(a(i!==null&&Jt),Kt>0&&s(!1))}}}function $r(i,t){let e=JSON.parse(i.getAttribute("data-flux-scroll-unlock")||"{}");Object.entries(t).forEach(([s,a])=>{e[s]===void 0&&(e[s]=i.style[s],i.style[s]=a)}),i.setAttribute("data-flux-scroll-unlock",JSON.stringify(e))}function fa(i){let t=JSON.parse(i.getAttribute("data-flux-scroll-unlock")||"{}");Object.entries(t).forEach(([e,s])=>{i.style[e]=s}),i.removeAttribute("data-flux-scroll-unlock")}function te(i,t,e){let s=(o,l)=>n=>{n.key===o&&!t()&&(l(),n.preventDefault(),n.stopPropagation())};c(i,"role","button");let a=()=>{i.hasAttribute("disabled")?(c(i,"aria-disabled","true"),c(i,"tabindex","-1")):(A(i,"aria-disabled"),c(i,"tabindex","0"))};new MutationObserver(()=>a()).observe(i,{attributes:!0,attributeFilter:["disabled"]}),a(),y(i,"click",()=>e()),y(i,"keydown",s("Enter",()=>e())),y(i,"keydown",s(" ",()=>{})),y(i,"keyup",s(" ",()=>e()))}function ma(i,t,e=null){let s=()=>{let o=i.getAttribute(t),l={sm:640,md:768,lg:1024,xl:1280,"2xl":1536};for(let[n,u]of Object.entries(l).reverse()){let h=i.getAttribute(`${n}:${t}`);if(h&&window.innerWidth>=u)return h}return o||e},a=s(),r=[];return new ResizeObserver(()=>{let o=s(),l=JSON.stringify(a);JSON.stringify(o)!==l&&(a=o,r.forEach(n=>n(o)))}).observe(window.document.documentElement),[a,o=>r.push(o)]}function ft(){return navigator?.language||document.documentElement.lang||"en-US"}function ri(i,t={slots:{},attrs:{}}){let{slots:e={},attrs:s={}}=t,a=i.content.cloneNode(!0).firstElementChild;return Object.entries(e).forEach(([r,o])=>{(r==="default"?a.querySelectorAll("slot:not([name])"):a.querySelectorAll(`slot[name="${r}"]`)).forEach(n=>n.replaceWith(typeof o=="string"?document.createTextNode(o):o))}),a.querySelectorAll("slot").forEach(r=>r.remove()),Object.entries(s).forEach(([r,o])=>{a.setAttribute(r,o)}),a.setAttribute("data-appended",""),a}function xe(){return document.documentElement.dir==="rtl"}function ga(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&!navigator.userAgent.includes("CriOS")&&!navigator.userAgent.includes("FxiOS")}function va(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}var Zt=class{constructor(){this.subscribers=[]}subscribe(t,e){this.subscribers.push({reason:t,callback:e})}notify(t,e){this.subscribers.forEach(({reason:s,callback:a})=>{t===s&&a(e)})}};var D=class extends HTMLElement{wasDisconnected=!1;constructor(){super(),this.boot?.()}connectedCallback(){if(this.wasDisconnected){this.wasDisconnected=!1;return}queueMicrotask(()=>{this.mount?.()})}disconnectedCallback(){this.wasDisconnected=!0,queueMicrotask(()=>{this.wasDisconnected&&this.unmount?.(),this.wasDisconnected=!1})}mixin(t,e={}){return new t(this,e)}appendMixin(t,e={}){return new t(this,e)}use(t){let e;return this.mixins.forEach(s=>{s instanceof t&&(e=s)}),e}uses(t){let e;return this.mixins.forEach(s=>{s instanceof t&&(e=!0)}),!!e}on(t,e){return y(this,t,e)}root(t,e={}){if(t===void 0)return this.__root;let s=document.createElement(t);for(let r in e)setAttribute(s,r,e[r]);let a=this.attachShadow({mode:"open"});return s.appendChild(document.createElement("slot")),a.appendChild(s),this.__root=s,this.__root}},B=class extends D{};var N=class{constructor(t,e={}){this.el=t,this.grouped=e.grouped===void 0,this.el.mixins=this.el.mixins?this.el.mixins:new Map,this.el.mixins.set(this.constructor.name,this),this.el[this.constructor.name]=!0,this.el.use||(this.el.use=D.prototype.use.bind(this.el)),this.opts=e,this.boot?.({options:s=>{let a=s;Object.entries(this.opts).forEach(([r,o])=>{o!==void 0&&(a[r]=o)}),this.opts=a}}),queueMicrotask(()=>{this.mount?.()})}options(){return this.opts}hasGroup(){return!!this.group()}group(){if(this.grouped!==!1)return ii(this.el,t=>t[this.groupedByType.name])?.use(this.groupedByType)}on(t,e){return y(this.el,t,e)}},vt=class extends N{constructor(t,e={}){super(t,e)}walker(){return q(this.el,(t,{skip:e,reject:s})=>{if(t[this.constructor.name]&&t!==this.el)return s();if(!t[this.groupOfType.name]||!t.mixins.get(this.groupOfType.name).grouped)return e()})}};var W=class extends N{boot({options:t}){t({bubbles:!1}),this.initialState=this.el.value,this.getterFunc=()=>{},this.setterFunc=e=>this.initialState=e,Object.defineProperty(this.el,"value",{get:()=>this.getterFunc(),set:e=>{this.setterFunc(e)}})}initial(t){t(this.initialState)}getter(t){this.getterFunc=t}setter(t){this.setterFunc=t}dispatch(){this.el.dispatchEvent(new Event("input",{bubbles:this.options().bubbles,cancelable:!0})),this.el.dispatchEvent(new Event("change",{bubbles:this.options().bubbles,cancelable:!0}))}};var Ae=null;document.addEventListener("mousedown",i=>Ae=i);var ee=class extends N{boot({options:t}){t({clickOutside:!0,triggers:[]}),this.onChanges=[],this.state=!1,this.stopDialogFromFocusingTheFirstElement();let e=this.options().triggers;new MutationObserver(a=>{a.forEach(r=>{r.attributeName==="open"&&(this.el.hasAttribute("open")?this.state=!0:this.state=!1)}),this.onChanges.forEach(r=>r())}).observe(this.el,{attributeFilter:["open"]}),this.options().clickOutside&&this.el.addEventListener("click",a=>{if(a.target!==this.el){Ae=null;return}Ae&&ya(this.el,Ae)&&ya(this.el,a)&&(this.cancel(),a.preventDefault(),a.stopPropagation()),Ae=null}),this.el.hasAttribute("open")&&(this.state=!0,this.hide(),this.show())}onChange(t){this.onChanges.push(t)}show(){this.el.isConnected&&this.el.showModal()}hide(){this.el.close()}toggle(){this.state?this.hide():this.show()}cancel(){let t=new Event("cancel",{bubbles:!1,cancelable:!0});this.el.dispatchEvent(t),t.defaultPrevented||this.hide()}getState(){return this.state}setState(t){t?this.show():this.hide()}stopDialogFromFocusingTheFirstElement(){let t=document.createElement("div");t.setAttribute("data-flux-focus-placeholder",""),t.setAttribute("data-appended",""),t.setAttribute("tabindex","0"),this.el.prepend(t),this.onChange(()=>{c(t,"style",this.state?"display: none":"display: block"),this.state&&ga()&&!this.el.hasAttribute("autofocus")&&this.el.querySelectorAll("[autofocus]").length===0&&setTimeout(()=>{this.el.setAttribute("tabindex","-1"),this.el.focus(),this.el.blur()})})}};function ya(i,t){let e=i.getBoundingClientRect(),s=t.clientX,a=t.clientY;return!(s>=e.left&&s<=e.right&&a>=e.top&&a<=e.bottom)}var At=class extends N{boot(){this.onCloses=[]}onClose(t){this.onCloses.push(t)}close(){this.onCloses.forEach(t=>t())}};var Ui=class extends D{boot(){this.querySelectorAll("[data-appended]").forEach(l=>l.remove()),this._controllable=new W(this,{disabled:this.hasAttribute("disabled")});let t=this.button(),e=this.dialog();if(!e)return;e._dialogable=new ee(e,{clickOutside:!this.hasAttribute("disable-click-outside")}),e._closeable=new At(e),e._closeable.onClose(()=>e._dialogable.hide()),this._controllable.initial(l=>l&&e._dialogable.show()),this._controllable.getter(()=>e._dialogable.getState());let s=R();this._controllable.setter(s(l=>{e._dialogable.setState(l)})),e._dialogable.onChange(s(()=>{this._controllable.dispatch()}));let a=()=>{e._dialogable.getState()?(c(this,"data-open",""),t?.setAttribute("data-open",""),c(e,"data-open","")):(A(this,"data-open"),t?.removeAttribute("data-open"),A(e,"data-open"))};e._dialogable.onChange(()=>a()),a();let{lock:r,unlock:o}=et();e._dialogable.onChange(()=>{e._dialogable.getState()?r():o()}),t&&y(t,"click",l=>{e._dialogable.show()})}unmount(){if(this.dialog()?._dialogable?.getState()){let{unlock:t}=et();t()}}button(){let t=this.querySelector("button");if(!this.dialog()?.contains(t))return t}dialog(){return this.querySelector("dialog")}showModal(){let t=this.dialog();t&&t.showModal()}};P(({css:i})=>i`dialog, ::backdrop { margin: auto; }`);C("modal",Ui);var oi=class extends N{boot({options:t}){this.onChanges=[],this.state=!1}onChange(t){this.onChanges.push(t)}getState(){return this.state}setState(t){let e=this.state;this.state=!!t,this.state!==e&&this.onChanges.forEach(s=>s())}};var Vi=class extends D{boot(){let t=this.button(),e=this.details();if(t){if(!e)return console.warn("ui-disclosure: no panel element found",this)}else return console.warn("ui-disclosure: no trigger element found",this);this._disabled=this.hasAttribute("disabled"),this._controllable=new W(this,{disabled:this._disabled}),e._disclosable=new oi(e),this._controllable.initial(r=>r&&e._disclosable.setState(!0)),this._controllable.getter(()=>e._disclosable.getState()),this._controllable.setter(r=>e._disclosable.setState(r)),e._disclosable.onChange(()=>{this.dispatchEvent(new CustomEvent("lofi-disclosable-change",{bubbles:!0})),this._controllable.dispatch()});let s=()=>{e._disclosable.getState()?(c(this,"data-open",""),c(t,"data-open",""),c(e,"data-open","")):(A(this,"data-open"),A(t,"data-open"),A(e,"data-open"))};e._disclosable.onChange(()=>s()),s(),this._disabled||y(t,"click",r=>{e._disclosable.setState(!e._disclosable.getState())});let a=U(e,"disclosure");c(t,"aria-controls",a),c(t,"aria-expanded","false"),e._disclosable.onChange(()=>{e._disclosable.getState()?c(t,"aria-expanded","true"):c(t,"aria-expanded","false")}),this.hasAttribute("open")&&e._disclosable.setState(!0)}button(){return this.querySelector("button")}details(){return this.lastElementChild}},Bi=class i extends D{boot(){this.exclusive=this.hasAttribute("exclusive"),this.exclusive&&y(this,"lofi-disclosable-change",t=>{t.stopPropagation(),t.target.localName==="ui-disclosure"&&t.target.value&&this.disclosureWalker().each(e=>{e!==t.target&&(e.value=!1)})})}disclosureWalker(){return q(this,(t,{skip:e,reject:s})=>{if(t instanceof i&&t!==this||t.localName!=="ui-disclosure")return s()})}};P(({css:i})=>i`ui-disclosure { display: block; }`);C("disclosure",Vi);C("disclosure-group",Bi);var Hi=class extends D{boot(){}},Yi=class extends D{boot(){let t=this.hasAttribute("resize")?this.getAttribute("resize"):"both",e=this.hasAttribute("shrink"),s=this.closest("ui-resizable"),a,r,o=!1;if(!s)throw"Resizable container not found";this.addEventListener("pointerdown",l=>{o||(a=s.offsetWidth,r=s.offsetHeight,o=!0);let n=l.clientX,u=l.clientY,h=parseInt(getComputedStyle(s).width,10),p=parseInt(getComputedStyle(s).height,10),g=v=>{let b=h+(v.clientX-n),d=p+(v.clientY-u);(t==="width"||t==="both")&&(e?s.style.width=`${Math.min(b,a)}px`:s.style.width=`${b}px`),(t==="height"||t==="both")&&(e?s.style.height=`${Math.min(d,r)}px`:s.style.height=`${d}px`)};document.addEventListener("pointermove",g),document.addEventListener("pointerup",()=>{this.releasePointerCapture(l.pointerId),document.removeEventListener("pointermove",g)},{once:!0}),this.setPointerCapture(l.pointerId)})}};P(({css:i})=>i`ui-resizable { display: block; }`);C("resizable",Hi);C("grip",Yi);var X=class extends vt{groupOfType=L;boot({options:t}){t({multiple:!1}),this.state=this.options().multiple?new Set:null,this.onChanges=[]}onInitAndChange(t){t(),this.onChanges.push(t)}onChange(t){this.onChanges.push(t)}changed(t,e=!1){if(t.ungrouped)return;let s=t.value,a=t.isSelected(),r=this.options().multiple;a?r?this.state.add(s):this.state=s:r?this.state.delete(s):this.state=null,e||this.onChanges.forEach(o=>o(t))}getState(){return this.options().multiple?Array.from(this.state):this.state}hasValue(t){return this.options().multiple?this.state.has(t):this.state===t}setState(t){(t===null||t==="")&&(t=this.options().multiple?[]:""),this.options().multiple?(Array.isArray(t)||(t=[t]),t=t.map(s=>s+"")):t=t+"",this.state=this.options().multiple?new Set(t):t;let e=this.options().multiple?t:[t];this.walker().each(s=>{let a=s.use(L);if(a.ungrouped)return;let r=e.includes(a.value);r&&!a.isSelected()?a.surgicallySelect():!r&&a.isSelected()&&a.surgicallyDeselect()}),this.onChanges.forEach(s=>s())}selected(){return this.walker().find(t=>t.use(L).isSelected()).use(L)}selecteds(){return this.walker().filter(t=>t.use(L).isSelected()).map(t=>t.use(L))}selectFirst(){this.walker().first()?.use(L).select()}selectAll(){this.walker().filter(t=>!t.use(L).isSelected()).map(t=>t.use(L).select())}deselectAll(){this.walker().filter(t=>t.use(L).isSelected()).map(t=>t.use(L).deselect())}allAreSelected(){let t=this.walker().filter(e=>!0);return t.length>0&&this.walker().filter(e=>e.use(L).isSelected()).length===t.length}noneAreSelected(){return this.state===null||this.state?.size===0}selectableByValue(t){return this.walker().find(e=>e.use(L).value===t)?.use(L)}deselectOthers(t){this.walker().each(e=>{e!==t&&e.use(L).surgicallyDeselect()})}selectedTextValue(){return this.options().multiple?Array.from(this.state).map(t=>this.convertValueStringToElementText(t)).join(", "):this.convertValueStringToElementText(this.state)}convertValueStringToElementText(t){let e=this.findByValue(t);return e?e.label||e.value:t}findByValue(t){return this.selecteds().find(e=>e.value===t)}walker(){return q(this.el,(t,{skip:e,reject:s})=>{if(t[this.constructor.name]&&t!==this.el)return s();if(!t[this.groupOfType.name]||t.mixins.get(this.groupOfType.name).ungrouped)return e()})}},L=class extends N{boot({options:t}){this.groupedByType=X,t({ungrouped:!1,togglable:!1,value:void 0,label:void 0,selectedInitially:!1,dataAttr:"data-selected",ariaAttr:"aria-selected"}),this.ungrouped=this.options().ungrouped,this.value=this.options().value===void 0?this.el.value:this.options().value,this.value=this.value+"",this.label=this.options().label;let e=this.options().selectedInitially;this.onSelects=[],this.onUnselects=[],this.onChanges=[];let s=()=>{this.group()&&this.group().hasValue(this.value)&&(e=!0),this.multiple=this.hasGroup()?this.group().options().multiple:!1,this.toggleable=this.options().toggleable||this.multiple,e?this.select(!0):(this.state=e,this.surgicallyDeselect(!0))};s(),!this.hasGroup()&&!this.el.isConnected&&queueMicrotask(()=>{this.hasGroup()&&s()})}mount(){this.el.hasAttribute(this.options().ariaAttr)||c(this.el,this.options().ariaAttr,"false")}onInitAndChange(t){t(),this.onChanges.push(t)}onChange(t){this.onChanges.push(t)}onSelect(t){this.onSelects.push(t)}onUnselect(t){this.onUnselects.push(t)}setState(t){t?this.select():this.deselect()}getState(){return this.state}press(){this.toggleable?this.toggle():this.select()}trigger(){this.toggleable?this.toggle():this.select()}toggle(){this.isSelected()?this.deselect():this.select()}isSelected(){return this.state}select(t=!1){let e=!this.isSelected();this.toggleable||this.group()?.deselectOthers(this.el),this.state=!0,c(this.el,this.options().ariaAttr,"true"),c(this.el,this.options().dataAttr,""),e&&(t||(this.onSelects.forEach(s=>s()),this.onChanges.forEach(s=>s())),this.group()?.changed(this,t))}surgicallySelect(){let t=!this.isSelected();this.state=!0,c(this.el,this.options().ariaAttr,"true"),c(this.el,this.options().dataAttr,""),t&&(this.onSelects.forEach(e=>e()),this.onChanges.forEach(e=>e()))}deselect(t=!0){let e=this.isSelected();this.state=!1,c(this.el,this.options().ariaAttr,"false"),A(this.el,this.options().dataAttr),e&&(this.onUnselects.forEach(s=>s()),this.onChanges.forEach(s=>s()),t&&this.group()?.changed(this))}surgicallyDeselect(t=!1){let e=this.isSelected();this.state=!1,c(this.el,this.options().ariaAttr,"false"),A(this.el,this.options().dataAttr),e&&!t&&(this.onUnselects.forEach(s=>s()),this.onChanges.forEach(s=>s()))}getValue(){return this.value}getLabel(){return this.label}};var O=class extends N{boot({options:t}){t({disableWithParent:!0}),this.onChanges=[],Object.defineProperty(this.el,"disabled",{get:()=>this.el.hasAttribute("disabled"),set:s=>{s?this.el.setAttribute("disabled",""):this.el.removeAttribute("disabled")}}),this.el.hasAttribute("disabled")?this.el.disabled=!0:this.options().disableWithParent&&this.el.parentElement?.closest("[disabled]")&&(this.el.disabled=!0),new MutationObserver(s=>{this.onChanges.forEach(a=>a(this.el.disabled))}).observe(this.el,{attributeFilter:["disabled"]})}onChange(t){this.onChanges.push(t)}onInitAndChange(t){t(this.el.disabled),this.onChanges.push(t)}enabled(t){return(...e)=>{if(!this.el.disabled)return t(...e)}}disabled(t){return(...e)=>{if(this.el.disabled)return t(...e)}}isDisabled(){return this.el.disabled}};var it=class extends N{boot({options:t}){t({name:void 0,value:void 0,includeWhenEmpty:!0,shouldUpdateValue:!0}),this.name=this.options().name,this.value=this.options().value===void 0?this.el.value:this.options().value,this.state=!1,this.observer=new MutationObserver(()=>{this.renderHiddenInputs()}),this.observer.observe(this.el,{childList:!0})}mount(){this.renderHiddenInputs()}update(t){this.options().shouldUpdateValue?this.value=t:this.state=!!t,this.renderHiddenInputs()}valueIsEmpty(){return this.value===void 0||this.value===null||this.value===""}renderHiddenInputs(){if(this.observer.disconnect(),!this.name)return;let t=this.el.children,e=[];for(let a=0;a<t.length;a++){let r=t[a];r.hasAttribute("data-flux-hidden")&&e.push(r)}e.forEach(a=>a.remove());let s;this.options().shouldUpdateValue?s=!this.valueIsEmpty()||this.options().includeWhenEmpty?this.generateInputs(this.name,this.value):[]:s=this.state||this.options().includeWhenEmpty?this.generateInputs(this.name,this.value):[],s.forEach(a=>{this.el.append(a)}),this.observer.observe(this.el,{childList:!0})}generateInputs(t,e,s=[]){if(this.isObjectOrArray(e))for(let a in e)s=s.concat(this.generateInputs(`${t}[${a}]`,e[a]));else{let a=document.createElement("input");return a.setAttribute("type","hidden"),a.setAttribute("name",t),a.setAttribute("value",e===null?"":""+e),a.setAttribute("data-flux-hidden",""),a.setAttribute("data-appended",""),[a]}return s}isObjectOrArray(t){return typeof t=="object"&&t!==null}};var $i=class i extends B{boot(){this._disableable=new O(this);let t=[];this._disableable.onInitAndChange(e=>{e?this.walker().each(s=>{s.hasAttribute("disabled")||(s.setAttribute("disabled",""),t.push(()=>s.removeAttribute("disabled")))}):(t.forEach(s=>s()),t=[])}),this._selectable=new X(this,{multiple:!0}),this._controllable=new W(this,{disabled:this._disabled,bubbles:!0}),this.walker().each(e=>{e.addEventListener("input",s=>s.stopPropagation()),e.addEventListener("change",s=>s.stopPropagation())}),this._submittable=new it(this,{name:this.getAttribute("name"),value:this.getAttribute("value"),includeWhenEmpty:!1}),this._controllable.initial(e=>e&&this._selectable.setState(e)),this._controllable.getter(()=>this._selectable.getState()),this._detangled=R(),this._controllable.setter(this._detangled(e=>{this._selectable.setState(e)})),this._selectable.onChange(this._detangled(()=>{this._controllable.dispatch()})),this._selectable.onInitAndChange(()=>{this._submittable.update(this._selectable.getState())}),c(this,"role","group"),queueMicrotask(()=>{this._submittable.update(this._selectable.getState())})}initCheckAll(t){let e=R();t._selectable.onChange(e(()=>{t.indeterminate?(this._selectable.selectAll(),t.checked=!0,t.indeterminate=!1):t.checked?(this._selectable.selectAll(),t.checked=!0,t.indeterminate=!1):(this._selectable.deselectAll(),t.checked=!1,t.indeterminate=!1)}));let s=()=>{this._selectable.allAreSelected()?(t.indeterminate=!1,t._selectable.select()):this._selectable.noneAreSelected()?(t.indeterminate=!1,t._selectable.deselect()):t.indeterminate=!0};this._selectable.onChange(e(()=>{s()})),s()}walker(){return q(this,(t,{skip:e,reject:s})=>{if(t instanceof i)return s();if(t.localName!=="ui-checkbox")return e()})}},zi=class extends B{boot(){let t=this;this.isIndeterminate=!1,this._disableable=new O(this),this.hasAttribute("all")?(this._selectable=new L(t,{ungrouped:!0,toggleable:!0,value:this.hasAttribute("value")?this.getAttribute("value"):Math.random().toString(36).substring(2,10),label:this.hasAttribute("label")?this.getAttribute("label"):null,selectedInitially:this.hasAttribute("checked"),dataAttr:"data-checked",ariaAttr:"aria-checked"}),queueMicrotask(()=>{this.closest("ui-checkbox-group")?.initCheckAll(this)})):(this._selectable=new L(t,{toggleable:!0,dataAttr:"data-checked",ariaAttr:"aria-checked",value:this.hasAttribute("value")?this.getAttribute("value"):Math.random().toString(36).substring(2,10),label:this.hasAttribute("label")?this.getAttribute("label"):null,selectedInitially:this.hasAttribute("checked")}),this._submittable=new it(this,{name:this.getAttribute("name"),value:this.getAttribute("value")??"on",includeWhenEmpty:!1,shouldUpdateValue:!1}),this._selectable.onChange(()=>{this.indeterminate&&(this.indeterminate=!1)}),this._selectable.onInitAndChange(()=>{this._submittable.update(this._selectable.isSelected())}),this.value=this._selectable.getValue(),queueMicrotask(()=>{this._submittable.update(this._selectable.isSelected())})),this._detangled=R(),this._selectable.onChange(this._detangled(()=>{this.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),this.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))})),c(t,"role","checkbox"),this._disableable.onInitAndChange(e=>{e?A(t,"tabindex","0"):c(t,"tabindex","0")}),y(t,"click",this._disableable.disabled(e=>{e.preventDefault(),e.stopPropagation()}),{capture:!0}),y(t,"click",this._disableable.enabled(e=>{this._selectable.press()})),y(t,"keydown",this._disableable.enabled(e=>{e.key==="Enter"&&this.closest("form")?.requestSubmit()})),y(t,"keydown",this._disableable.enabled(e=>{e.key===" "&&(e.preventDefault(),e.stopPropagation())})),y(t,"keyup",this._disableable.enabled(e=>{e.key===" "&&(this._selectable.press(),e.preventDefault(),e.stopPropagation())})),zr(t)}get checked(){return this._selectable.isSelected()}set checked(t){let e=this.closest("ui-checkbox-group")?._detangled||(s=>s);this._detangled(e(()=>{t?this._selectable.select():this._selectable.deselect()}))()}get indeterminate(){return this.isIndeterminate}set indeterminate(t){this.isIndeterminate=!!t,this.isIndeterminate?c(this,"data-indeterminate",""):A(this,"data-indeterminate")}};C("checkbox-group",$i);C("checkbox",zi);P(({css:i})=>i`ui-checkbox-group { display: block; }`);P(({css:i})=>i`ui-checkbox { display: inline-block; user-select: none; }`);function zr(i){i.closest("label")?.addEventListener("click",t=>{i.contains(t.target)||i._selectable.press()})}var St=new Map,G=class extends N{boot({options:t}){t({triggers:[],scope:null});let e=this.options().scope||"global";c(this.el,"popover","manual"),this.triggers=this.options().triggers,this.onChanges=[],this.state=!1,y(this.el,"beforetoggle",s=>{let a=this.state;if(this.state=s.newState==="open",this.state){Gr(this.el,e);let r=new AbortController,o=document.activeElement,l=[...this.triggers,o];setTimeout(()=>{jr(this.el,l,r),Xr(this.el,l,r),Kr(this.el,l,r)}),this.el.addEventListener("beforetoggle",n=>{n.newState==="closed"&&(r.abort(),o?.focus())},{signal:r.signal})}a!==this.state&&this.onChanges.forEach(r=>r(this.state,a))}),y(this.el,"toggle",s=>{if(s.newState==="open")St.has(e)||St.set(e,new Set),St.get(e).add(this.el);else if(s.newState==="closed"){if(!St.has(e))return;St.get(e).delete(this.el),St.get(e).size===0&&St.delete(e)}})}onChange(t){this.onChanges.push(t)}setState(t){t?this.show():this.hide()}getState(){return this.state}toggle(){this.el.togglePopover()}show(){this.el.showPopover()}hide(){this.el.hidePopover()}};function Gr(i,t){St.has(t)&&St.get(t).forEach(e=>{i.contains(e)||e.contains(i)||e.hidePopover()})}function jr(i,t,e){document.addEventListener("click",s=>{i.contains(s.target)||t.includes(s.target)||i.hidePopover()},{signal:e.signal})}function Xr(i,t,e){document.addEventListener("focusin",s=>{i.contains(s.target)||t.includes(s.target)||(e.abort(),i.hidePopover())},{capture:!0,signal:e.signal})}function Kr(i,t,e){document.addEventListener("keydown",s=>{s.key==="Escape"&&i.hidePopover()},{signal:e.signal})}var Dt=Math.min,st=Math.max,_e=Math.round,Ee=Math.floor,pt=i=>({x:i,y:i}),Jr={left:"right",right:"left",bottom:"top",top:"bottom"},Zr={start:"end",end:"start"};function Gi(i,t,e){return st(i,Dt(t,e))}function ie(i,t){return typeof i=="function"?i(t):i}function _t(i){return i.split("-")[0]}function se(i){return i.split("-")[1]}function ji(i){return i==="x"?"y":"x"}function Xi(i){return i==="y"?"height":"width"}function Tt(i){return["top","bottom"].includes(_t(i))?"y":"x"}function Ki(i){return ji(Tt(i))}function wa(i,t,e){e===void 0&&(e=!1);let s=se(i),a=Ki(i),r=Xi(a),o=a==="x"?s===(e?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(o=Se(o)),[o,Se(o)]}function xa(i){let t=Se(i);return[ni(i),t,ni(t)]}function ni(i){return i.replace(/start|end/g,t=>Zr[t])}function Qr(i,t,e){let s=["left","right"],a=["right","left"],r=["top","bottom"],o=["bottom","top"];switch(i){case"top":case"bottom":return e?t?a:s:t?s:a;case"left":case"right":return t?r:o;default:return[]}}function Aa(i,t,e,s){let a=se(i),r=Qr(_t(i),e==="start",s);return a&&(r=r.map(o=>o+"-"+a),t&&(r=r.concat(r.map(ni)))),r}function Se(i){return i.replace(/left|right|bottom|top/g,t=>Jr[t])}function to(i){return{top:0,right:0,bottom:0,left:0,...i}}function Sa(i){return typeof i!="number"?to(i):{top:i,right:i,bottom:i,left:i}}function Rt(i){let{x:t,y:e,width:s,height:a}=i;return{width:s,height:a,top:e,left:t,right:t+s,bottom:e+a,x:t,y:e}}function _a(i,t,e){let{reference:s,floating:a}=i,r=Tt(t),o=Ki(t),l=Xi(o),n=_t(t),u=r==="y",h=s.x+s.width/2-a.width/2,p=s.y+s.height/2-a.height/2,g=s[l]/2-a[l]/2,v;switch(n){case"top":v={x:h,y:s.y-a.height};break;case"bottom":v={x:h,y:s.y+s.height};break;case"right":v={x:s.x+s.width,y:p};break;case"left":v={x:s.x-a.width,y:p};break;default:v={x:s.x,y:s.y}}switch(se(t)){case"start":v[o]-=g*(e&&u?-1:1);break;case"end":v[o]+=g*(e&&u?-1:1);break}return v}var Ea=async(i,t,e)=>{let{placement:s="bottom",strategy:a="absolute",middleware:r=[],platform:o}=e,l=r.filter(Boolean),n=await(o.isRTL==null?void 0:o.isRTL(t)),u=await o.getElementRects({reference:i,floating:t,strategy:a}),{x:h,y:p}=_a(u,s,n),g=s,v={},b=0;for(let d=0;d<l.length;d++){let{name:_,fn:w}=l[d],{x:f,y:x,data:S,reset:E}=await w({x:h,y:p,initialPlacement:s,placement:g,strategy:a,middlewareData:v,rects:u,platform:o,elements:{reference:i,floating:t}});h=f??h,p=x??p,v={...v,[_]:{...v[_],...S}},E&&b<=50&&(b++,typeof E=="object"&&(E.placement&&(g=E.placement),E.rects&&(u=E.rects===!0?await o.getElementRects({reference:i,floating:t,strategy:a}):E.rects),{x:h,y:p}=_a(u,g,n)),d=-1)}return{x:h,y:p,placement:g,strategy:a,middlewareData:v}};async function li(i,t){var e;t===void 0&&(t={});let{x:s,y:a,platform:r,rects:o,elements:l,strategy:n}=i,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:g=!1,padding:v=0}=ie(t,i),b=Sa(v),_=l[g?p==="floating"?"reference":"floating":p],w=Rt(await r.getClippingRect({element:(e=await(r.isElement==null?void 0:r.isElement(_)))==null||e?_:_.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:n})),f=p==="floating"?{x:s,y:a,width:o.floating.width,height:o.floating.height}:o.reference,x=await(r.getOffsetParent==null?void 0:r.getOffsetParent(l.floating)),S=await(r.isElement==null?void 0:r.isElement(x))?await(r.getScale==null?void 0:r.getScale(x))||{x:1,y:1}:{x:1,y:1},E=Rt(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:f,offsetParent:x,strategy:n}):f);return{top:(w.top-E.top+b.top)/S.y,bottom:(E.bottom-w.bottom+b.bottom)/S.y,left:(w.left-E.left+b.left)/S.x,right:(E.right-w.right+b.right)/S.x}}var ka=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(t){var e,s;let{placement:a,middlewareData:r,rects:o,initialPlacement:l,platform:n,elements:u}=t,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:g,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:d=!0,..._}=ie(i,t);if((e=r.arrow)!=null&&e.alignmentOffset)return{};let w=_t(a),f=Tt(l),x=_t(l)===l,S=await(n.isRTL==null?void 0:n.isRTL(u.floating)),E=g||(x||!d?[Se(l)]:xa(l)),k=b!=="none";!g&&k&&E.push(...Aa(l,d,b,S));let T=[l,...E],I=await li(t,_),$=[],K=((s=r.flip)==null?void 0:s.overflows)||[];if(h&&$.push(I[w]),p){let Q=wa(a,o,S);$.push(I[Q[0]],I[Q[1]])}if(K=[...K,{placement:a,overflows:$}],!$.every(Q=>Q<=0)){var ut,J;let Q=(((ut=r.flip)==null?void 0:ut.index)||0)+1,dt=T[Q];if(dt)return{data:{index:Q,overflows:K},reset:{placement:dt}};let z=(J=K.filter(yt=>yt.overflows[0]<=0).sort((yt,tt)=>yt.overflows[1]-tt.overflows[1])[0])==null?void 0:J.placement;if(!z)switch(v){case"bestFit":{var Z;let yt=(Z=K.filter(tt=>{if(k){let rt=Tt(tt.placement);return rt===f||rt==="y"}return!0}).map(tt=>[tt.placement,tt.overflows.filter(rt=>rt>0).reduce((rt,hr)=>rt+hr,0)]).sort((tt,rt)=>tt[1]-rt[1])[0])==null?void 0:Z[0];yt&&(z=yt);break}case"initialPlacement":z=l;break}if(a!==z)return{reset:{placement:z}}}return{}}}};async function eo(i,t){let{placement:e,platform:s,elements:a}=i,r=await(s.isRTL==null?void 0:s.isRTL(a.floating)),o=_t(e),l=se(e),n=Tt(e)==="y",u=["left","top"].includes(o)?-1:1,h=r&&n?-1:1,p=ie(t,i),{mainAxis:g,crossAxis:v,alignmentAxis:b}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return l&&typeof b=="number"&&(v=l==="end"?b*-1:b),n?{x:v*h,y:g*u}:{x:g*u,y:v*h}}var Ca=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(t){var e,s;let{x:a,y:r,placement:o,middlewareData:l}=t,n=await eo(t,i);return o===((e=l.offset)==null?void 0:e.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:a+n.x,y:r+n.y,data:{...n,placement:o}}}}},Da=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(t){let{x:e,y:s,placement:a}=t,{mainAxis:r=!0,crossAxis:o=!1,limiter:l={fn:_=>{let{x:w,y:f}=_;return{x:w,y:f}}},...n}=ie(i,t),u={x:e,y:s},h=await li(t,n),p=Tt(_t(a)),g=ji(p),v=u[g],b=u[p];if(r){let _=g==="y"?"top":"left",w=g==="y"?"bottom":"right",f=v+h[_],x=v-h[w];v=Gi(f,v,x)}if(o){let _=p==="y"?"top":"left",w=p==="y"?"bottom":"right",f=b+h[_],x=b-h[w];b=Gi(f,b,x)}let d=l.fn({...t,[g]:v,[p]:b});return{...d,data:{x:d.x-e,y:d.y-s,enabled:{[g]:r,[p]:o}}}}}};var Ta=function(i){return i===void 0&&(i={}),{name:"size",options:i,async fn(t){var e,s;let{placement:a,rects:r,platform:o,elements:l}=t,{apply:n=()=>{},...u}=ie(i,t),h=await li(t,u),p=_t(a),g=se(a),v=Tt(a)==="y",{width:b,height:d}=r.floating,_,w;p==="top"||p==="bottom"?(_=p,w=g===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(w=p,_=g==="end"?"top":"bottom");let f=d-h.top-h.bottom,x=b-h.left-h.right,S=Dt(d-h[_],f),E=Dt(b-h[w],x),k=!t.middlewareData.shift,T=S,I=E;if((e=t.middlewareData.shift)!=null&&e.enabled.x&&(I=x),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(T=f),k&&!g){let K=st(h.left,0),ut=st(h.right,0),J=st(h.top,0),Z=st(h.bottom,0);v?I=b-2*(K!==0||ut!==0?K+ut:st(h.left,h.right)):T=d-2*(J!==0||Z!==0?J+Z:st(h.top,h.bottom))}await n({...t,availableWidth:I,availableHeight:T});let $=await o.getDimensions(l.floating);return b!==$.width||d!==$.height?{reset:{rects:!0}}:{}}}};function ui(){return typeof window<"u"}function Wt(i){return Pa(i)?(i.nodeName||"").toLowerCase():"#document"}function ot(i){var t;return(i==null||(t=i.ownerDocument)==null?void 0:t.defaultView)||window}function bt(i){var t;return(t=(Pa(i)?i.ownerDocument:i.document)||window.document)==null?void 0:t.documentElement}function Pa(i){return ui()?i instanceof Node||i instanceof ot(i).Node:!1}function ct(i){return ui()?i instanceof Element||i instanceof ot(i).Element:!1}function mt(i){return ui()?i instanceof HTMLElement||i instanceof ot(i).HTMLElement:!1}function Ma(i){return!ui()||typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof ot(i).ShadowRoot}function re(i){let{overflow:t,overflowX:e,overflowY:s,display:a}=ht(i);return/auto|scroll|overlay|hidden|clip/.test(t+s+e)&&!["inline","contents"].includes(a)}function Oa(i){return["table","td","th"].includes(Wt(i))}function ke(i){return[":popover-open",":modal"].some(t=>{try{return i.matches(t)}catch{return!1}})}function ci(i){let t=hi(),e=ct(i)?ht(i):i;return["transform","translate","scale","rotate","perspective"].some(s=>e[s]?e[s]!=="none":!1)||(e.containerType?e.containerType!=="normal":!1)||!t&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!t&&(e.filter?e.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(e.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(e.contain||"").includes(s))}function La(i){let t=Et(i);for(;mt(t)&&!qt(t);){if(ci(t))return t;if(ke(t))return null;t=Et(t)}return null}function hi(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function qt(i){return["html","body","#document"].includes(Wt(i))}function ht(i){return ot(i).getComputedStyle(i)}function Ce(i){return ct(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.scrollX,scrollTop:i.scrollY}}function Et(i){if(Wt(i)==="html")return i;let t=i.assignedSlot||i.parentNode||Ma(i)&&i.host||bt(i);return Ma(t)?t.host:t}function Ia(i){let t=Et(i);return qt(t)?i.ownerDocument?i.ownerDocument.body:i.body:mt(t)&&re(t)?t:Ia(t)}function ae(i,t,e){var s;t===void 0&&(t=[]),e===void 0&&(e=!0);let a=Ia(i),r=a===((s=i.ownerDocument)==null?void 0:s.body),o=ot(a);if(r){let l=di(o);return t.concat(o,o.visualViewport||[],re(a)?a:[],l&&e?ae(l):[])}return t.concat(a,ae(a,[],e))}function di(i){return i.parent&&Object.getPrototypeOf(i.parent)?i.frameElement:null}function Ra(i){let t=ht(i),e=parseFloat(t.width)||0,s=parseFloat(t.height)||0,a=mt(i),r=a?i.offsetWidth:e,o=a?i.offsetHeight:s,l=_e(e)!==r||_e(s)!==o;return l&&(e=r,s=o),{width:e,height:s,$:l}}function Zi(i){return ct(i)?i:i.contextElement}function oe(i){let t=Zi(i);if(!mt(t))return pt(1);let e=t.getBoundingClientRect(),{width:s,height:a,$:r}=Ra(t),o=(r?_e(e.width):e.width)/s,l=(r?_e(e.height):e.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}var io=pt(0);function Wa(i){let t=ot(i);return!hi()||!t.visualViewport?io:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function so(i,t,e){return t===void 0&&(t=!1),!e||t&&e!==ot(i)?!1:t}function Ut(i,t,e,s){t===void 0&&(t=!1),e===void 0&&(e=!1);let a=i.getBoundingClientRect(),r=Zi(i),o=pt(1);t&&(s?ct(s)&&(o=oe(s)):o=oe(i));let l=so(r,e,s)?Wa(r):pt(0),n=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,h=a.width/o.x,p=a.height/o.y;if(r){let g=ot(r),v=s&&ct(s)?ot(s):s,b=g,d=di(b);for(;d&&s&&v!==b;){let _=oe(d),w=d.getBoundingClientRect(),f=ht(d),x=w.left+(d.clientLeft+parseFloat(f.paddingLeft))*_.x,S=w.top+(d.clientTop+parseFloat(f.paddingTop))*_.y;n*=_.x,u*=_.y,h*=_.x,p*=_.y,n+=x,u+=S,b=ot(d),d=di(b)}}return Rt({width:h,height:p,x:n,y:u})}function Qi(i,t){let e=Ce(i).scrollLeft;return t?t.left+e:Ut(bt(i)).left+e}function qa(i,t,e){e===void 0&&(e=!1);let s=i.getBoundingClientRect(),a=s.left+t.scrollLeft-(e?0:Qi(i,s)),r=s.top+t.scrollTop;return{x:a,y:r}}function ao(i){let{elements:t,rect:e,offsetParent:s,strategy:a}=i,r=a==="fixed",o=bt(s),l=t?ke(t.floating):!1;if(s===o||l&&r)return e;let n={scrollLeft:0,scrollTop:0},u=pt(1),h=pt(0),p=mt(s);if((p||!p&&!r)&&((Wt(s)!=="body"||re(o))&&(n=Ce(s)),mt(s))){let v=Ut(s);u=oe(s),h.x=v.x+s.clientLeft,h.y=v.y+s.clientTop}let g=o&&!p&&!r?qa(o,n,!0):pt(0);return{width:e.width*u.x,height:e.height*u.y,x:e.x*u.x-n.scrollLeft*u.x+h.x+g.x,y:e.y*u.y-n.scrollTop*u.y+h.y+g.y}}function ro(i){return Array.from(i.getClientRects())}function oo(i){let t=bt(i),e=Ce(i),s=i.ownerDocument.body,a=st(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),r=st(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight),o=-e.scrollLeft+Qi(i),l=-e.scrollTop;return ht(s).direction==="rtl"&&(o+=st(t.clientWidth,s.clientWidth)-a),{width:a,height:r,x:o,y:l}}function no(i,t){let e=ot(i),s=bt(i),a=e.visualViewport,r=s.clientWidth,o=s.clientHeight,l=0,n=0;if(a){r=a.width,o=a.height;let u=hi();(!u||u&&t==="fixed")&&(l=a.offsetLeft,n=a.offsetTop)}return{width:r,height:o,x:l,y:n}}function lo(i,t){let e=Ut(i,!0,t==="fixed"),s=e.top+i.clientTop,a=e.left+i.clientLeft,r=mt(i)?oe(i):pt(1),o=i.clientWidth*r.x,l=i.clientHeight*r.y,n=a*r.x,u=s*r.y;return{width:o,height:l,x:n,y:u}}function Na(i,t,e){let s;if(t==="viewport")s=no(i,e);else if(t==="document")s=oo(bt(i));else if(ct(t))s=lo(t,e);else{let a=Wa(i);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Rt(s)}function Ua(i,t){let e=Et(i);return e===t||!ct(e)||qt(e)?!1:ht(e).position==="fixed"||Ua(e,t)}function uo(i,t){let e=t.get(i);if(e)return e;let s=ae(i,[],!1).filter(l=>ct(l)&&Wt(l)!=="body"),a=null,r=ht(i).position==="fixed",o=r?Et(i):i;for(;ct(o)&&!qt(o);){let l=ht(o),n=ci(o);!n&&l.position==="fixed"&&(a=null),(r?!n&&!a:!n&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||re(o)&&!n&&Ua(i,o))?s=s.filter(h=>h!==o):a=l,o=Et(o)}return t.set(i,s),s}function co(i){let{element:t,boundary:e,rootBoundary:s,strategy:a}=i,o=[...e==="clippingAncestors"?ke(t)?[]:uo(t,this._c):[].concat(e),s],l=o[0],n=o.reduce((u,h)=>{let p=Na(t,h,a);return u.top=st(p.top,u.top),u.right=Dt(p.right,u.right),u.bottom=Dt(p.bottom,u.bottom),u.left=st(p.left,u.left),u},Na(t,l,a));return{width:n.right-n.left,height:n.bottom-n.top,x:n.left,y:n.top}}function ho(i){let{width:t,height:e}=Ra(i);return{width:t,height:e}}function fo(i,t,e){let s=mt(t),a=bt(t),r=e==="fixed",o=Ut(i,!0,r,t),l={scrollLeft:0,scrollTop:0},n=pt(0);if(s||!s&&!r)if((Wt(t)!=="body"||re(a))&&(l=Ce(t)),s){let g=Ut(t,!0,r,t);n.x=g.x+t.clientLeft,n.y=g.y+t.clientTop}else a&&(n.x=Qi(a));let u=a&&!s&&!r?qa(a,l):pt(0),h=o.left+l.scrollLeft-n.x-u.x,p=o.top+l.scrollTop-n.y-u.y;return{x:h,y:p,width:o.width,height:o.height}}function Ji(i){return ht(i).position==="static"}function Fa(i,t){if(!mt(i)||ht(i).position==="fixed")return null;if(t)return t(i);let e=i.offsetParent;return bt(i)===e&&(e=e.ownerDocument.body),e}function Va(i,t){let e=ot(i);if(ke(i))return e;if(!mt(i)){let a=Et(i);for(;a&&!qt(a);){if(ct(a)&&!Ji(a))return a;a=Et(a)}return e}let s=Fa(i,t);for(;s&&Oa(s)&&Ji(s);)s=Fa(s,t);return s&&qt(s)&&Ji(s)&&!ci(s)?e:s||La(i)||e}var po=async function(i){let t=this.getOffsetParent||Va,e=this.getDimensions,s=await e(i.floating);return{reference:fo(i.reference,await t(i.floating),i.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function bo(i){return ht(i).direction==="rtl"}var mo={convertOffsetParentRelativeRectToViewportRelativeRect:ao,getDocumentElement:bt,getClippingRect:co,getOffsetParent:Va,getElementRects:po,getClientRects:ro,getDimensions:ho,getScale:oe,isElement:ct,isRTL:bo};function Ba(i,t){return i.x===t.x&&i.y===t.y&&i.width===t.width&&i.height===t.height}function go(i,t){let e=null,s,a=bt(i);function r(){var l;clearTimeout(s),(l=e)==null||l.disconnect(),e=null}function o(l,n){l===void 0&&(l=!1),n===void 0&&(n=1),r();let u=i.getBoundingClientRect(),{left:h,top:p,width:g,height:v}=u;if(l||t(),!g||!v)return;let b=Ee(p),d=Ee(a.clientWidth-(h+g)),_=Ee(a.clientHeight-(p+v)),w=Ee(h),x={rootMargin:-b+"px "+-d+"px "+-_+"px "+-w+"px",threshold:st(0,Dt(1,n))||1},S=!0;function E(k){let T=k[0].intersectionRatio;if(T!==n){if(!S)return o();T?o(!1,T):s=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!Ba(u,i.getBoundingClientRect())&&o(),S=!1}try{e=new IntersectionObserver(E,{...x,root:a.ownerDocument})}catch{e=new IntersectionObserver(E,x)}e.observe(i)}return o(!0),r}function Ha(i,t,e,s){s===void 0&&(s={});let{ancestorScroll:a=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:n=!1}=s,u=Zi(i),h=a||r?[...u?ae(u):[],...ae(t)]:[];h.forEach(w=>{a&&w.addEventListener("scroll",e,{passive:!0}),r&&w.addEventListener("resize",e)});let p=u&&l?go(u,e):null,g=-1,v=null;o&&(v=new ResizeObserver(w=>{let[f]=w;f&&f.target===u&&v&&(v.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var x;(x=v)==null||x.observe(t)})),e()}),u&&!n&&v.observe(u),v.observe(t));let b,d=n?Ut(i):null;n&&_();function _(){let w=Ut(i);d&&!Ba(d,w)&&e(),d=w,b=requestAnimationFrame(_)}return e(),()=>{var w;h.forEach(f=>{a&&f.removeEventListener("scroll",e),r&&f.removeEventListener("resize",e)}),p?.(),(w=v)==null||w.disconnect(),v=null,n&&cancelAnimationFrame(b)}}var Ya=Ca;var $a=Da,za=ka,Ga=Ta;var ja=(i,t,e)=>{let s=new Map,a={platform:mo,...e},r={...a.platform,_c:s};return Ea(i,t,{...a,platform:r})};var H=class extends N{boot({options:t}){if(t({reference:null,auto:!0,position:"bottom start",gap:"5",offset:"0",matchWidth:!1,crossAxis:!1,scrollY:!0}),this.options().reference===null||this.options().position===null)return;let[e,s]=wo(this.el,{scrollY:this.options().scrollY}),a=vo(this.el,this.options().reference,e,{position:this.options().position,gap:this.options().gap,offset:this.options().offset,matchWidth:this.options().matchWidth,crossAxis:this.options().crossAxis,scrollY:this.options().scrollY}),r=()=>{};this.reposition=(...o)=>{this.options().auto?r=Ha(this.options().reference,this.el,a):a(null,...o)},this.cleanup=()=>{r(),s()}}};function vo(i,t,e,{position:s,offset:a,gap:r,matchWidth:o,crossAxis:l,scrollY:n}){let u=window.getComputedStyle(i).maxHeight;return u=u==="none"?null:parseFloat(u),(h,p,g)=>{ja(t,i,{placement:yo(s),middleware:[Ya({mainAxis:Number(r),alignmentAxis:Number(a)}),za(),$a({padding:5,crossAxis:l}),Ga({padding:5,apply({rects:v,elements:b,availableHeight:d}){o&&Object.assign(b.floating.style,{width:`${v.reference.width}px`});let _=u;_===null&&(_=n?b.floating.scrollHeight:b.floating.offsetHeight),b.floating.style.maxHeight=d>_?"":`${d}px`}})]}).then(({x:v,y:b})=>{e(p||v,g||b)})}}function yo(i){let t=i.split(" ");switch(t[0]){case"start":t[0]=xe()?"right":"left";break;case"end":t[0]=xe()?"left":"right";break}return t.join("-")}function wo(i,{scrollY:t=!0}){let e=(o,l)=>{Object.assign(i.style,{position:"absolute",overflowY:t?"auto":"hidden",left:`${o}px`,top:`${l}px`,right:"auto",bottom:"auto"})},s,a,r=new MutationObserver(()=>e(s,a));return[(o,l)=>{s=o,a=l,r.disconnect(),e(s,a),r.observe(i,{attributeFilter:["style"]})},()=>{r.disconnect()}]}var ts=class extends D{boot(){let t=this.trigger(),e=this.overlay();if(t){if(!e)return console.warn("ui-dropdown: no [popover] overlay found",this)}else return console.warn("ui-dropdown: no trigger element found",this);if(this._disabled=this.hasAttribute("disabled"),this._controllable=new W(this),e._popoverable=new G(e),e._anchorable=new H(e,{reference:t,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),e._popoverable.onChange(()=>{e._popoverable.getState()?e._anchorable.reposition():e._anchorable.cleanup()}),!this.hasAttribute("hover")){let{lock:r,unlock:o}=et(e._popoverable.el);e._popoverable.onChange(()=>{e._popoverable.getState()?r():o()})}this._controllable.initial(r=>e._popoverable.setState(r)),this._controllable.getter(()=>e._popoverable.getState());let s=R();if(this._controllable.setter(r=>e._popoverable.setState(r)),e._popoverable.onChange(s(()=>this._controllable.dispatch())),this.hasAttribute("hover")){let r=()=>{};Qt(t,e,{gain(){e._popoverable.setState(!0),r=y(document,"scroll",()=>{e._popoverable.getState()&&(e._popoverable.setState(!1),r())}).off},lose(){e._popoverable.setState(!1),r()},focusable:!1})}y(t,"click",()=>e._popoverable.toggle()),e._popoverable.getState()?(c(this,"data-open",""),c(t,"data-open",""),c(e,"data-open","")):(A(this,"data-open"),A(t,"data-open"),A(e,"data-open")),e._popoverable.onChange(()=>{e._popoverable.getState()?(c(this,"data-open",""),c(t,"data-open",""),c(e,"data-open","")):(A(this,"data-open"),A(t,"data-open"),A(e,"data-open"))});let a=U(e,"dropdown");c(t,"aria-haspopup","true"),c(t,"aria-controls",a),c(t,"aria-expanded",e._popoverable.getState()?"true":"false"),e._popoverable.onChange(()=>{c(t,"aria-expanded",e._popoverable.getState()?"true":"false")}),e._popoverable.onChange(()=>{setTimeout(()=>e._popoverable.getState()?e.onPopoverShow?.():e.onPopoverHide?.())})}unmount(){if(this.overlay()?._popoverable?.getState()&&!this.hasAttribute("hover")){let{unlock:t}=et();t()}}trigger(){return this.querySelector("button, a")}overlay(){return this.lastElementChild?.matches("[popover]")&&this.lastElementChild}};C("dropdown",ts);var es=class extends D{boot(){this.type="file"}mount(){this._disableable=new O(this),this._files=[],this.inputEl=this.querySelector('input[data-slot="receiver"]'),this.inputEl&&this.configureSRInput(),this.triggerEl=this.findTriggerElement(),this.rootEl=this.closest("ui-file-upload");let t=this.hasAttribute("multiple")||this.rootEl&&this.rootEl.hasAttribute("multiple");t&&c(this.inputEl,"multiple",""),Object.defineProperty(this,"multiple",{get(){return t}}),Object.defineProperty(this,"files",{get(){return this._files},set(e){e===null||e===""?this._files=[]:Array.isArray(e)?this._files=e:e instanceof FileList?this._files=Array.from(e):this._files=[e],this.dispatchEvent(new Event("change",{bubbles:!0}))}}),this.observer=new MutationObserver(()=>{this.ensureInputsExist()}),this.observer.observe(this,{childList:!0}),this.style.setProperty("--flux-file-upload-progress","0%"),this.style.setProperty("--flux-file-upload-progress-as-string","'0%'"),y(this,"livewire-upload-start",()=>{c(this,"data-loading",""),this.disabled=!0,this.style.setProperty("--flux-file-upload-progress","0"),this.style.setProperty("--flux-file-upload-progress-as-string","'0%'")}),y(this,"livewire-upload-finish",()=>{A(this,"data-loading"),this.disabled=!1,this.style.setProperty("--flux-file-upload-progress","100%"),this.style.setProperty("--flux-file-upload-progress-as-string","'100%'")}),y(this,"livewire-upload-cancel",()=>{A(this,"data-loading"),this.disabled=!1,this.style.setProperty("--flux-file-upload-progress","0%"),this.style.setProperty("--flux-file-upload-progress-as-string","'0%'")}),y(this,"livewire-upload-error",()=>{A(this,"data-loading"),this.disabled=!1,this.style.setProperty("--flux-file-upload-progress","0%"),this.style.setProperty("--flux-file-upload-progress-as-string","'0%'")}),y(this,"livewire-upload-progress",e=>{let s=e.detail.progress;this.style.setProperty("--flux-file-upload-progress",`${s}%`),this.style.setProperty("--flux-file-upload-progress-as-string",`'${s}%'`)}),this._disableable.onInitAndChange(e=>{this.inputEl.disabled=e,this.triggerEl&&(e?A(this.triggerEl,"tabindex"):c(this.triggerEl,"tabindex","0"))}),y(this.inputEl,"click",e=>{e.stopPropagation()}),this.initDragListeners(),this.initClickListeners()}addFiles(t){let e=Array.from(t);this.multiple?this._files=[...this._files,...e]:this._files=e.slice(0,1),this.dispatchEvent(new Event("change",{bubbles:!0}))}removeFile(t){this._files=this._files.filter((e,s)=>s!==t),this.dispatchEvent(new Event("change",{bubbles:!0}))}configureSRInput(){this.inputEl.tabIndex=-1,Object.assign(this.inputEl.style,{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"})}findTriggerElement(){return Array.from(this.children).find(e=>!e.hasAttribute("data-slot"))}ensureInputsExist(){(!this.inputEl||!this.querySelector('input[data-slot="receiver"]'))&&(this.inputEl=this.querySelector('input[data-slot="receiver"]'),this.inputEl&&(this.configureSRInput(),(this.hasAttribute("multiple")||this.rootEl&&this.rootEl.hasAttribute("multiple"))&&c(this.inputEl,"multiple",""),this.inputEl.disabled=this.disabled)),(!this.triggerEl||!this.contains(this.triggerEl))&&(this.triggerEl=this.findTriggerElement(),this.triggerEl&&!this.disabled?c(this.triggerEl,"tabindex","0"):this.triggerEl&&this.disabled&&A(this.triggerEl,"tabindex"))}initDragListeners(){this.triggerEl&&(y(this.triggerEl,"dragenter",this._disableable.enabled(t=>{t.preventDefault(),c(this,"data-dragging","")})),y(this.triggerEl,"dragover",this._disableable.enabled(t=>{t.preventDefault(),c(this,"data-dragging","")})),y(this.triggerEl,"drop",this._disableable.enabled(t=>{t.preventDefault(),A(this,"data-dragging"),t.dataTransfer.files&&t.dataTransfer.files.length>0&&this.addFiles(t.dataTransfer.files)})),y(this.triggerEl,"dragleave",t=>{A(this,"data-dragging")}))}initClickListeners(){this.triggerEl&&(y(this.triggerEl,"click",this._disableable.disabled(t=>{t.preventDefault(),t.stopPropagation()}),{capture:!0}),y(this.triggerEl,"click",this._disableable.enabled(t=>{t.preventDefault(),this.inputEl.click()})),y(this.inputEl,"change",t=>{this.inputEl.files&&this.inputEl.files.length>0&&!this.disabled&&this.addFiles(this.inputEl.files)}),y(this.triggerEl,"keydown",this._disableable.enabled(t=>{["Enter"," "].includes(t.key)&&t.preventDefault(),["Enter"].includes(t.key)&&this.inputEl.click()})),y(this.triggerEl,"keyup",this._disableable.enabled(t=>{t.key===" "&&(t.preventDefault(),this.inputEl.click())})),y(this.triggerEl,"focus",this._disableable.enabled(()=>{c(this,"data-focus","")})),y(this.triggerEl,"blur",()=>{A(this,"data-focus")}))}};C("file-upload",es);var m=class i{constructor(t,e,s=1){this._date=new Date(Date.UTC(t,e-1,s))}isBetween(t,e){return!t&&!e?!0:t?e?this._date>=t._date&&this._date<=e._date:this._date>=t._date:this._date<=e._date}isSameDay(t){return t?this._date.getUTCDate()===t._date.getUTCDate()&&this._date.getUTCMonth()===t._date.getUTCMonth()&&this._date.getUTCFullYear()===t._date.getUTCFullYear():!1}isBefore(t){return t?this._date<t._date:!1}isAfter(t){return t?this._date>t._date:!1}incrementDays(t){let e=this.getCopy();return e._date.setUTCDate(e._date.getUTCDate()+t),e}addMonths(t){let e=this.getCopy();return e._date.setUTCMonth(e._date.getUTCMonth()+t),e}addDays(t){let e=this.getCopy();return e._date.setUTCDate(e._date.getUTCDate()+t),e}getYear(){return this._date.getUTCFullYear()}getMonth(){return this._date.getUTCMonth()+1}getPaddedMonth(){return String(this.getMonth()).padStart(2,"0")}getDay(){return this._date.getUTCDate()}getPaddedDay(){return String(this.getDay()).padStart(2,"0")}getDate(){return this._date}getCopy(){return new i(this.getYear(),this.getMonth(),this.getDay())}getDayOfWeek(){return this._date.getUTCDay()}getDaysInMonth(){return new i(this.getYear(),this.getMonth()+1,0).getDay()}getFirstDayOfMonth(){return new i(this.getYear(),this.getMonth(),1).getDayOfWeek()}getWeekNumber(){let t=new Date(Date.UTC(this._date.getUTCFullYear(),0,1)),e=new Date(t);e.setUTCDate(1+(11-t.getUTCDay())%7);let s=new Date(this._date);return s.setUTCDate(this._date.getUTCDate()+(11-this._date.getUTCDay())%7),Math.floor((s.getTime()-e.getTime())/(7*24*60*60*1e3))+1}setDay(t){this._date.setUTCDate(t)}setMonth(t){this._date.setUTCMonth(t-1)}setYear(t){this._date.setUTCFullYear(t)}static fromIsoDateString(t){if(!t)return null;let[e,s,a]=t.split("T")[0]?.split("-")?.map(Number);return new i(e,s,a)}static fromLocalDate(t){return t?new i(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate()):null}static fromDate(t){return t?new i(t.getFullYear(),t.getMonth()+1,t.getDate()):null}static fromParts(t,e,s){return new i(t,e,s)}static today(){return i.fromDate(new Date)}static firstDayOfMonth(t){return new i(t.getYear(),t.getMonth(),1)}toIsoDateString(){return[this.getYear(),this.getPaddedMonth(),this.getPaddedDay()].join("-")}toParts(){return[this.getYear(),this.getMonth(),this.getDay()]}toDate(){return new Date(this.getYear(),this.getMonth()-1,this.getDay())}toFormattedString(t,e){return this.toDate().toLocaleDateString(t,e)}};function Xa(i,t,e,s){let a=i.querySelector('template[name="heading"]'),r=i.querySelector('template[name="weekday"]'),o=i.querySelector('template[name="week"]');a&&xo(a,t,e),r&&Ao(r,t),o&&So(o,t,e,s)}function xo(i,t,e){at(i,s=>s({slots:{default:new Intl.DateTimeFormat(t.locale,{month:i.hasAttribute("display")?i.getAttribute("display"):"long",year:"numeric",timeZone:"UTC"}).format(new m(e.year,e.month).getDate())}}))}function Ao(i,t){let e=a=>i.hasAttribute("display")?new Intl.DateTimeFormat(t.locale,{weekday:i.getAttribute("display")}).format(a):["en","es","de","fr","it","pt"].includes(t.locale.split("-")[0])?new Intl.DateTimeFormat(t.locale,{weekday:"short"}).format(a).slice(0,2):new Intl.DateTimeFormat(t.locale,{weekday:"narrow"}).format(a),s=Array.from({length:7},(a,r)=>{let o=(r+t.startDay)%7,l=new Date(2024,0,o+7);return e(l)});at(i,a=>s.map(r=>a({slots:{default:r}})))}function So(i,t,e,s){let a=e.month,r=e.year,o=(new m(r,a).getFirstDayOfMonth()-t.startDay+7)%7,l=new m(r,a).getDaysInMonth(),[n,u]=new m(r,a).addMonths(-1).toParts(),h=new m(n,u).getDaysInMonth(),[p,g]=[[],[]];for(let S=0;S<o;S++){p.push(0);let E=h-o+S+1;g.push(new m(n,u,E).toIsoDateString())}for(let S=1;S<=l;S++)p.push(S),g.push(new m(r,a,S).toIsoDateString());let b=(7-(o+l)%7)%7,[d,_]=new m(r,a).addMonths(1).toParts();for(let S=1;S<=b;S++)p.push(0),g.push(new m(d,_,S).toIsoDateString());if(t.fixedWeeks){let S=Math.ceil(p.length/7),E=t.fixedWeeks,k=E-S;if(k>0)for(let T=0;T<k*7;T++)p.push(0),g.push(m.fromIsoDateString(g[g.length-1]).addDays(1).toIsoDateString());else k<0&&(p.length=E*7,g.length=E*7)}let w=S=>Array.from({length:Math.ceil(S.length/7)},(E,k)=>S.slice(k*7,(k+1)*7)),f=w(p),x=w(g);at(i,S=>f.map((E,k)=>{let T=S(),I=x[k],$=T.querySelector('template[name="number"]');if($){let K=(4-t.startDay+7)%7,ut=m.fromIsoDateString(I[K]).getWeekNumber();at($,J=>J({slots:{default:ut}}))}return at(T.querySelector('template[name="day"]'),K=>E.map((ut,J)=>{if(ut===0){let rt=m.fromIsoDateString(I[J]).getDay();return K({slots:{default:rt},attrs:{"data-date":I[J],"data-outside":""}})}let Z=m.fromIsoDateString(I[J]),Q=K({slots:{default:ut},attrs:{"data-date":I[J]}}),dt=s.subtext(Z),z=s.details(Z),yt=s.variant(Z);if([!1,null,void 0].includes(yt)||(Q.dataset.dateVariant=yt),![!1,null,void 0].includes(dt)){let tt=Q.querySelector('template[name="subtext"]');tt&&at(tt,rt=>rt({slots:{default:dt}}))}if(![!1,null,void 0].includes(z)){let tt=Q.querySelector('template[name="details"]');tt&&at(tt,rt=>rt({slots:{default:z}}))}return Q})),T}))}function Ka(i,t,e,s,a,r){let l=((n,u)=>a.lowerBound(()=>m.today().getMonth()===n&&m.today().getYear()===u?m.today():new m(u,n)))(s.month,s.year);i.querySelectorAll("[data-date]").forEach(n=>{c(n,"role","gridcell");let u=n.querySelector("button"),h=_o(n);h&&(u?c(u,"aria-label",h.toFormattedString(e.locale,{day:"numeric",month:"long",year:"numeric",weekday:"long"})):c(n,"aria-label",h.toFormattedString(e.locale,{day:"numeric",month:"long",year:"numeric",weekday:"long"})),r.isValid(h)?t?(c(n,"disabled",""),c(n,"aria-disabled","true"),u&&c(u,"disabled","")):(A(n,"disabled"),A(n,"data-unavailable"),A(n,"aria-disabled"),u&&A(u,"disabled")):(c(n,"disabled",""),c(n,"aria-disabled","true"),u&&c(u,"disabled",""),r.isUnavailable(h)&&c(n,"data-unavailable","")),m.today().isSameDay(h)?c(n,"data-today",""):A(n,"data-today",""),a.attributes(n,h),h.isSameDay(l)?u&&c(u,"tabindex","0"):u&&c(u,"tabindex","-1"))})}function at(i,t){if(!i)return;let e=()=>{let a=i.nextElementSibling;for(;a&&a.hasAttribute("data-appended");){let r=a;a=a.nextElementSibling,r.remove()}};e();let s=t(({slots:a={},attrs:r={}}={})=>{let o=i.content.cloneNode(!0).firstElementChild;return Object.entries(a).forEach(([l,n])=>{(l==="default"?o.querySelectorAll("slot:not([name])"):o.querySelectorAll(`slot[name="${l}"]`)).forEach(h=>h.replaceWith(typeof n=="string"?document.createTextNode(n):n))}),o.querySelectorAll("slot").forEach(l=>l.remove()),Object.entries(r).forEach(([l,n])=>{o.setAttribute(l,n)}),o});return s=Array.isArray(s)?s:[s],s.reverse().forEach(a=>{c(a,"data-appended",""),i.after(a)}),{cleanup:e}}function _o(i){return!i||!i.hasAttribute("data-date")?null:m.fromIsoDateString(i.getAttribute("data-date"))}var M=class{static SELECTION=1;static ACTIVATION=2;static VIEW_CHANGE=3},ne=class{constructor(){this.subscribers=[],this.subscriberTypes=new WeakMap}subscribe(t,e){let s=Array.isArray(t)?t:[t];this.subscribers.push(e),this.subscriberTypes.has(e)||this.subscriberTypes.set(e,[]),this.subscriberTypes.get(e).push(...s)}notify(t){let e=Array.isArray(t)?t:[t];this.subscribers.forEach(s=>{e.length&&!this.subscriberTypes.get(s)?.some(a=>e.includes(a))||s()})}};var j=class{static SINGLE="single";static MULTIPLE="multiple";static RANGE="range"},fi=class i{constructor(t,e,s){this.config=e,this.observable=s,this.selection=t,this.active=null,this.displayResolver=a=>a}setDisplayResolver(t){this.displayResolver=t}select(t){let e=this.selection;this.selection=this.selection.select(t,this.config),this.selection.shouldNotify(e)?this.observable.notify(M.SELECTION):this.observable.notify(M.ACTIVATION)}activate(t){let e=this.active;t?this.active=t:this.active=null,this.selection.activate(t),e!==this.active&&this.observable.notify(M.ACTIVATION)}setValue(t){let e=this.selection;this.selection=this.createSelectionFromValue(t,this.config),this.selection.shouldNotify(e)?this.observable.notify(M.SELECTION):this.observable.notify(M.ACTIVATION)}getValue(){return this.selection.value()}isSelectable(t){return this.selection.selectable(t,this.config)}contains(...t){return this.selection.contains(...t)}hasSelection(){return this.selection.hasSelection()}lowerBound(...t){return this.selection.lowerBound(...t)}upperBound(...t){return this.selection.upperBound(...t)}display(...t){return this.displayResolver(this.selection.display(...t))}attributes(...t){return this.selection.attributes(...t)}createSelectionFromValue(t,e){if(e.mode===j.MULTIPLE){let s=t?t.map(a=>m.fromIsoDateString(a)):[];return new bi(s)}else if(e.mode===j.RANGE){let{start:s,end:a,preset:r}=t||{};return r&&gi[r]&&r!=="custom"?new mi(r,e):!s&&!a?new Me:a?new Pe(m.fromIsoDateString(s),m.fromIsoDateString(a)):new Mt(m.fromIsoDateString(s))}else return t?new Te(m.fromIsoDateString(t)):new De}static createFromValueStringAttribute(t,e,s){let a=i.createSelectionFromValueStringAttribute(t,e);return new i(a,e,s)}static createSelectionFromValueStringAttribute(t,e){if(e.mode===j.MULTIPLE){let s=t?t.split(",").map(a=>a.trim()).map(a=>m.fromIsoDateString(a)):[];return new bi(s)}else if(e.mode===j.RANGE){if(!t)return new Me;let[s,a]=t.split("/").map(r=>r.trim());return!a&&s&&gi[s]&&s!=="custom"?new mi(s,e):(s=m.fromIsoDateString(s),a?(a=m.fromIsoDateString(a),new Pe(s,a)):new Mt(s))}else return t?new Te(m.fromIsoDateString(t)):new De}},pi=class{constructor(t,e){this.selectable=t,this.observable=e,this._selection=this.selectable.selection,this.selectable.observable.subscribe(M.SELECTION,()=>{this._blockSync()||this.sync()}),this._blockSync=()=>{}}blockSyncIf(t){this._blockSync=t}sync(){this._selection=this.selectable.selection,this.observable.notify(M.SELECTION)}setValue(t){return this.selectable.setValue(t)}getValue(){return this._selection.value()}isSelectable(t){return this._selection.selectable(t,this.config)}hasSelection(){return this._selection.hasSelection()}display(...t){return this.selectable.displayResolver(this._selection.display(...t))}},kt=class{contains(){}shouldNotify(t){return!0}hasSelection(){return!1}lowerBound(t){return Oe(t)}upperBound(t){return this.lowerBound(t)}selectable(t,e){return!0}display(){}value(){}activate(){}attributes(t,e){this.contains(e)?(c(t,"data-selected",""),c(t,"aria-selected","true")):(A(t,"data-selected"),c(t,"aria-selected","false"))}},De=class i extends kt{shouldNotify(t){return!(t instanceof i)}hasSelection(){return!1}contains(){return!1}select(t){return new Te(t)}lowerBound(t){return Oe(t)}display(t){return""}value(){return null}},Te=class i extends kt{constructor(t){super(),this._date=t}hasSelection(){return!0}shouldNotify(t){return!(t instanceof i&&this._date.isSameDay(t._date))}select(t){return this._date.isSameDay(t)?new De:new i(t)}contains(t){return this._date.isSameDay(t)}lowerBound(){return this._date}display(t){return this._date.toFormattedString(t,{day:"numeric",month:"short",year:"numeric"})}value(){return this._date.toIsoDateString()}},bi=class i extends kt{constructor(t){super(),this._dates=t}hasSelection(){return this._dates.length>0}shouldNotify(t){return!(t instanceof i&&this._dates.every(e=>t._dates.includes(e))&&t._dates.every(e=>this._dates.includes(e)))}select(t){return this._dates.some(s=>s.isSameDay(t))?new i(this._dates.filter(s=>!s.isSameDay(t))):new i([...this._dates,t])}contains(t){return this._dates.some(e=>e.isSameDay(t))}lowerBound(t){return this._dates.sort((s,a)=>s.isBefore(a)?-1:1)[0]||Oe(t)}upperBound(t){let e=this._dates.sort((s,a)=>s.isBefore(a)?-1:1);return e[e.length-1]||Oe(t)}display(t){return this._dates.map(e=>e.toFormattedString(t,{day:"numeric",month:"short",year:"numeric"})).join(", ")}value(){return this._dates.map(t=>t.toIsoDateString())}},Me=class i extends kt{constructor(){super()}hasSelection(){return!1}shouldNotify(t){return!(t instanceof i||t instanceof Mt)}select(t){return new Mt(t)}contains(){return!1}lowerBound(t){return Oe(t)}display(t){return""}value(){return null}},Mt=class i extends kt{constructor(t){super(),this._start=t,this._endPreview=null}hasSelection(){return!1}shouldNotify(t){return!1}select(t,e){return t.isBefore(this._start)?new i(t):t.isSameDay(this._start)&&e.minRange>1?new Me:new Pe(this._start,t)}activate(t){this._endPreview=t}selectable(t,e){if(e.maxRange&&(t.isBefore(this._start)||this._start.addDays(e.maxRange-1).isBefore(t)))return!1;if(e.minRange){if(this._start.isSameDay(t))return!0;if(t.isBefore(this._start)||this._start.addDays(e.minRange-1).isAfter(t))return!1}let s=e.unavailable.filter(r=>r.isAfter(this._start)).sort((r,o)=>r.toDate()-o.toDate())[0],a=e.unavailable.filter(r=>r.isBefore(this._start)).sort((r,o)=>o.toDate()-r.toDate())[0];return t.isAfter(this._start)?!s||t.isBefore(s):t.isBefore(this._start)?!a||t.isAfter(a):!0}contains(t){return t.isSameDay(this._start)}lowerBound(){return this._start}display(t){return new Intl.DateTimeFormat(t,{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"}).format(this._start.getDate())+" -"}value(){return null}attributes(t,e){this._endPreview&&e.isBetween(this._start,this._endPreview)?(c(t,"data-in-range",""),c(t,"aria-selected","true")):(A(t,"data-in-range"),A(t,"aria-selected")),e.isSameDay(this._start)?c(t,"data-selected",""):A(t,"data-selected"),e.isSameDay(this._start)?c(t,"aria-selected","true"):A(t,"aria-selected"),e.isSameDay(this._start)?c(t,"data-start",""):A(t,"data-start"),e.isSameDay(this._endPreview)?c(t,"data-end-preview",""):A(t,"data-end-preview")}},Pe=class i extends kt{constructor(t,e){super(),this._start=t,this._end=e}hasSelection(){return!0}shouldNotify(t){return!(t instanceof i&&this._start.isSameDay(t._start)&&this._end.isSameDay(t._end))}select(t){return new Mt(t)}contains(t){return t.isBetween(this._start,this._end)}lowerBound(){return this._start}upperBound(){return this._end}display(t){return new Intl.DateTimeFormat(t,{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"}).formatRange(this._start.getDate(),this._end.getDate()).replaceAll("\u2009"," ")}value(){return{start:this._start.toIsoDateString(),end:this._end.toIsoDateString()}}attributes(t,e){e.isSameDay(this._start)||e.isSameDay(this._end)?c(t,"data-selected",""):A(t,"data-selected"),e.isSameDay(this._start)?c(t,"data-start",""):A(t,"data-start"),e.isSameDay(this._end)?c(t,"data-end",""):A(t,"data-end"),this.contains(e)?(c(t,"data-in-range",""),c(t,"aria-selected","true")):(A(t,"data-in-range"),A(t,"aria-selected"))}},mi=class i extends kt{constructor(t,e){super(),this._preset=t,this._config=e}get _start(){let[t]=gi[this._preset](this._config);return this._config.min&&t.isBefore(this._config.min)?this._config.min:t}get _end(){let[,t]=gi[this._preset](this._config);return this._config.max&&t.isAfter(this._config.max)?this._config.max:t}hasSelection(){return!0}shouldNotify(t){return!(t instanceof i&&this._preset===t._preset)}select(t){return new Mt(t,this._config)}contains(t){return t.isBetween(this._start,this._end)}lowerBound(){return this._preset==="allTime"?m.today():this._start}upperBound(){return this._preset==="allTime"?m.today():m.today()}display(t){return new Intl.DateTimeFormat(t,{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"}).formatRange(this._start.getDate(),this._end.getDate()).replaceAll("\u2009"," ")}value(){return{start:this._start.toIsoDateString(),end:this._end.toIsoDateString(),preset:this._preset}}attributes(t,e){e.isSameDay(this._start)||e.isSameDay(this._end)?c(t,"data-selected",""):A(t,"data-selected"),e.isSameDay(this._start)?c(t,"data-start",""):A(t,"data-start"),e.isSameDay(this._end)?c(t,"data-end",""):A(t,"data-end"),this.contains(e)?(c(t,"data-in-range",""),c(t,"aria-selected","true")):(A(t,"data-in-range"),A(t,"aria-selected"))}};function Oe(i=null){return typeof i=="function"?i():i}var gi={today:()=>[m.today(),m.today()],yesterday:()=>{let i=m.today().incrementDays(-1);return[i,i]},thisWeek:i=>{let t=m.today().getCopy().incrementDays(i.startDay-m.today().getDayOfWeek()),e=t.incrementDays(6);return[t,e]},lastWeek:i=>{let t=m.today().incrementDays(i.startDay-(m.today().getDayOfWeek()+7)),e=t.incrementDays(6);return[t,e]},last7Days:()=>{let i=m.today();return[m.today().incrementDays(-6),i]},thisMonth:()=>{let i=m.fromParts(m.today().getYear(),m.today().getMonth(),1),t=m.fromParts(m.today().getYear(),m.today().getMonth(),m.today().getDaysInMonth());return[i,t]},lastMonth:()=>{let i=m.today().getMonth()-1,t=m.today().getYear();i<1&&(i+=12,t--);let e=m.fromParts(t,i,1),s=m.fromParts(t,i,e.getDaysInMonth());return[e,s]},thisQuarter:()=>{let t=Math.floor((m.today().getMonth()-1)/3)*3+1,e=t+2,s=m.fromParts(m.today().getYear(),t,1),a=m.fromParts(m.today().getYear(),e,1),r=m.fromParts(m.today().getYear(),e,a.getDaysInMonth());return[s,r]},lastQuarter:()=>{let t=Math.floor((m.today().getMonth()-4)/3)*3+1,e=t+2,s=m.today().getYear();t<1&&(t+=12,e+=12,s--);let a=m.fromParts(s,t,1),r=m.fromParts(s,e,1),o=m.fromParts(s,e,r.getDaysInMonth());return[a,o]},thisYear:()=>{let i=m.fromParts(m.today().getYear(),1,1),t=m.fromParts(m.today().getYear(),12,31);return[i,t]},lastYear:()=>{let i=m.today().getYear()-1,t=m.fromParts(i,1,1),e=m.fromParts(i,12,31);return[t,e]},last14Days:()=>{let i=m.today();return[m.today().incrementDays(-13),i]},last30Days:()=>{let i=m.today();return[m.today().incrementDays(-29),i]},last3Months:()=>{let i=m.today(),t=m.today().getDay()+1,e=m.today().getMonth()-3,s=m.today().getYear();return e<1&&(e+=12,s--),[m.fromParts(s,e,t),i]},last6Months:()=>{let i=m.today(),t=m.today().getDay()+1,e=m.today().getMonth()-6,s=m.today().getYear();return e<1&&(e+=12,s--),[m.fromParts(s,e,t),i]},yearToDate:()=>{let i=m.fromParts(m.today().getYear(),1,1),t=m.today();return[i,t]},allTime:i=>{if(!i.min)throw new Error("Min date is required for allTime preset");let t=i.min,e=m.today();return[t,e]}};var vi=class{constructor(t,e,s,a){this.month=t,this.year=e,this.config=s,this.observable=a}generateOffsetState(t){return new is(this,t)}canNavigatePrevious(){let[t,e]=new m(this.year,this.month).addMonths(-1).toParts();return!(this.config.min&&m.fromParts(t,e).isBefore(m.firstDayOfMonth(this.config.min)))}canNavigateNext(){let[t,e]=new m(this.year,this.month).addMonths(this.config.months).toParts();return!(this.config.max&&m.fromParts(t,e).isAfter(this.config.max))}nextMonth(){this.canNavigateNext()&&this.adjustMonth(1)}previousMonth(){this.adjustMonth(-1)}setMonth(t){t&&(this.isWithinMinAndMax(t,this.year)&&(this.month=t),this.observable.notify(M.VIEW_CHANGE))}setYear(t){t&&(this.isWithinMinAndMax(this.month,t)&&(this.year=t),this.observable.notify(M.VIEW_CHANGE))}setDate(t){t&&(this.isWithinMinAndMax(t.getMonth(),t.getYear())&&(this.month=t.getMonth(),this.year=t.getYear()),this.observable.notify(M.VIEW_CHANGE))}isWithinMinAndMax(t,e){return!(this.config.min&&m.fromParts(e,t).isBefore(m.firstDayOfMonth(this.config.min))||this.config.max&&m.fromParts(e,t).isAfter(this.config.max))}adjustMonth(t){let[e,s]=new m(this.year,this.month).addMonths(t).toParts();this.config.min&&m.fromParts(e,s).isBefore(m.firstDayOfMonth(this.config.min))||this.config.max&&m.fromParts(e,s).isAfter(this.config.max)||([this.month,this.year]=[s,e],this.observable.notify(M.VIEW_CHANGE))}},is=class{constructor(t,e=0){this.offset=e,this.viewState=t}get month(){let[,t]=new m(this.viewState.year,this.viewState.month).addMonths(this.offset).toParts();return t}get year(){let[t]=new m(this.viewState.year,this.viewState.month).addMonths(this.offset).toParts();return t}};var yi=class{constructor(t,e,s){this.min=s.min,this.max=s.max,this.unavailable=s.unavailable,this.selectable=t,this.metadata=e}isBetweenMinMax(t){return t.isBetween(this.min,this.max)}isUnavailable(t){return this.unavailable.some(e=>e.isSameDay(t))||this.metadata.unavailable(t)}isBlocked(t){return!this.selectable.isSelectable(t)}isValid(t){return this.isBetweenMinMax(t)&&!this.isUnavailable(t)&&!this.isBlocked(t)}};var wi=class{constructor(t){this.metadata={},this.observable=t}resetFromJSON(t){this.reset(JSON.parse(t))}appendFromJSON(t){this.append(JSON.parse(t))}append(t){this.metadata={...this.metadata,...t},this.observable.notify(M.VIEW_CHANGE)}reset(t){this.metadata=t,this.observable.notify(M.VIEW_CHANGE)}get(t){return this.metadata[t.toIsoDateString()]}has(t){return this.metadata[t.toIsoDateString()]!==void 0}subtext(t){return this.metadata[t.toIsoDateString()]?.subtext}details(t){return this.metadata[t.toIsoDateString()]?.details}variant(t){return this.metadata[t.toIsoDateString()]?.variant}unavailable(t){return!!this.metadata[t.toIsoDateString()]?.unavailable}};var ss=class extends D{boot(){let t=this.closest("ui-date-picker")||this;this.querySelectorAll("[data-appended]").forEach(n=>n.remove());let[e,s]=ma(t,"months",1);this.observable=new ne;let a=t.hasAttribute("locale")?t.getAttribute("locale"):ft();this.config={mode:t.getAttribute("mode")==="range"?j.RANGE:t.hasAttribute("multiple")?j.MULTIPLE:j.SINGLE,months:parseInt(e),min:this.getMinDate(t),max:this.getMaxDate(t),maxRange:t.hasAttribute("max-range")?parseInt(t.getAttribute("max-range")):null,minRange:t.hasAttribute("min-range")?parseInt(t.getAttribute("min-range")):null,startDay:t.hasAttribute("start-day")?parseInt(t.getAttribute("start-day")):(new Intl.Locale(a).weekInfo?.firstDay||7)%7,unavailable:this.getUnavailableDates(t),locale:a,fixedWeeks:t.hasAttribute("fixed-weeks")?6:null},s(n=>{this.config.months=parseInt(n),this.observable.notify(M.VIEW_CHANGE)}),this.selectable=fi.createFromValueStringAttribute(t.getAttribute("value"),this.config,this.observable),this.metadata=new wi(this.observable),this.validator=new yi(this.selectable,this.metadata,this.config);let r=this.selectable.lowerBound()===null&&t.hasAttribute("open-to")?this.getOpenTo(t):this.selectable.lowerBound(()=>m.today());if(this.viewState=new vi(r.getMonth(),r.getYear(),this.config,this.observable),this._disableable=new O(this,{disableWithParent:!1}),!this.hasAttribute("static")){let{enable:n,disable:u}=Eo(this,this.selectable,this.viewState,this.validator);this._disableable.onInitAndChange(h=>{h?u():n()})}this._controllable=new W(this,{bubbles:!0}),this._submittable=new it(this,{name:this.getAttribute("name"),value:this.selectable.getValue()});let o=R();this._controllable.initial(n=>n&&this.selectable.setValue(n)),this._controllable.getter(()=>this.selectable.getValue()),this._controllable.setter(o(n=>{this.selectable.setValue(n)})),this.observable.subscribe(M.SELECTION,o(()=>{this.dispatchEvent(new Event("select",{bubbles:!1,cancelable:!0})),this._controllable.dispatch()})),this.observable.subscribe(M.SELECTION,()=>{this._submittable.update(this.selectable.getValue())}),this.observable.subscribe(M.SELECTION,()=>{this.anchorSelection()}),this.observable.subscribe(M.VIEW_CHANGE,()=>{this.dispatchEvent(new Event("navigate",{bubbles:!1,cancelable:!0}))}),queueMicrotask(()=>{this.closest("ui-date-picker")?.bootWithCalendar(this)}),new MutationObserver(n=>{n.forEach(u=>{["unavailable","max","min"].includes(u.attributeName)&&(this.config.unavailable=this.getUnavailableDates(t),this.config.min=this.getMinDate(t),this.config.max=this.getMaxDate(t),this.validator.unavailable=this.config.unavailable,this.validator.min=this.config.min,this.validator.max=this.config.max,this.observable.notify(M.VIEW_CHANGE))})}).observe(t,{attributes:!0})}getOpenTo(t){if(!t.hasAttribute("open-to"))return;let e=t.getAttribute("open-to");return e=e==="today"?m.today():m.fromIsoDateString(e),this.validator.isBetweenMinMax(e)?e:this.config.min}navigateNext(){this.viewState.nextMonth()}navigatePrevious(){this.viewState.previousMonth()}anchorSelection(){let t=document.activeElement;this.contains(t)&&t.closest("[data-date]")!==null||this.viewState.setDate(this.selectable.lowerBound(m.today()))}appendMetadata(t){this.metadata.append(t)}resetMetadata(t={}){this.metadata.reset(t)}visibleDateRange(){return[m.fromParts(this.viewState.year,this.viewState.month,1).toIsoDateString(),m.fromParts(this.viewState.year,this.viewState.month+1,0).toIsoDateString()]}getUnavailableDates(t){return t.hasAttribute("unavailable")?t.getAttribute("unavailable").split(",").map(e=>m.fromIsoDateString(e.trim())):[]}getMinDate(t){return t.hasAttribute("min")?t.getAttribute("min")==="today"?m.today():m.fromIsoDateString(t.getAttribute("min")):null}getMaxDate(t){return t.hasAttribute("max")?t.getAttribute("max")==="today"?m.today():m.fromIsoDateString(t.getAttribute("max")):null}},as=class extends D{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,te(this,()=>this._disableable.isDisabled(),()=>t.navigatePrevious());let e=()=>{t.viewState.canNavigatePrevious()&&!this._disableable.isDisabled()?A(this,"disabled"):c(this,"disabled","")};t.observable.subscribe(M.VIEW_CHANGE,e),this._disableable.onInitAndChange(()=>{e()})}},rs=class extends D{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,te(this,()=>this._disableable.isDisabled(),()=>t.navigateNext());let e=()=>{t.viewState.canNavigateNext()&&!this._disableable.isDisabled()?A(this,"disabled"):c(this,"disabled","")};t.observable.subscribe(M.VIEW_CHANGE,e),this._disableable.onInitAndChange(()=>{e()})}},os=class extends D{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.config=t.config,this.viewState=t.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset),this.validator=t.validator;let e=this.querySelector("select"),s=this.hasAttribute("display")?this.getAttribute("display"):"long";if(e)this.renderSelectOptions(e,s),e.value=this.viewState.month,e.addEventListener("change",this._disableable.enabled(()=>{this.viewState.setMonth(parseInt(e.value))})),t.observable.subscribe(M.VIEW_CHANGE,()=>{this.renderSelectOptions(e,s),e.value=this.viewState.month}),this._disableable.onInitAndChange(a=>{a?c(e,"disabled",""):A(e,"disabled")});else{let a=()=>this.textContent=new Intl.DateTimeFormat(this.config.locale,{month:this.hasAttribute("display")?this.getAttribute("display"):"long",timeZone:"UTC"}).format(new m(this.offsetState.year,this.offsetState.month).getDate());a(),this.viewState.observable.subscribe(M.VIEW_CHANGE,()=>a())}}renderSelectOptions(t,e){let a=Array.from({length:12},(r,o)=>o+1).map(r=>{let o=new m(this.viewState.year,r),l=new m(this.viewState.year,r+1,0);return!this.validator.isBetweenMinMax(o)&&!this.validator.isBetweenMinMax(l)?null:{month:r,label:new Intl.DateTimeFormat(this.config.locale,{month:e,timeZone:"UTC"}).format(new m(2024,r).getDate())}}).filter(Boolean);at(t.querySelector("template"),r=>{if(a.length===0){let o=this.viewState.month,l=new Intl.DateTimeFormat(this.config.locale,{month:e,timeZone:"UTC"}).format(new m(2024,o).getDate()),n=r({slots:{default:l}});return n.setAttribute("value",o),n}return a.map(o=>{let l=r({slots:{default:o.label}});return l.setAttribute("value",o.month),l})})}},ns=class extends D{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.config=t.config,this.viewState=t.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset),this.numberOfPastYears=100,this.numberOfFutureYears=10,this.validator=t.validator;let e=this.querySelector("select");if(e)this.config.min&&(this.numberOfPastYears=this.viewState.year-this.config.min.getYear()),this.config.max&&(this.numberOfFutureYears=this.config.max.getYear()-this.viewState.year),this.renderSelectOptions(e),e.value=this.viewState.year,e.addEventListener("change",this._disableable.enabled(()=>{this.viewState.setYear(parseInt(e.value))})),t.observable.subscribe(M.VIEW_CHANGE,()=>{this.yearIsLessThanMinimum(this.viewState.year)&&(this.numberOfPastYears+=100,this.renderSelectOptions(e)),this.yearIsGreaterThanMaximum(this.viewState.year)&&(this.numberOfFutureYears+=10,this.renderSelectOptions(e)),e.value=this.viewState.year}),this._disableable.onInitAndChange(s=>{s?c(e,"disabled",""):A(e,"disabled")});else{let s=()=>this.textContent=new Intl.DateTimeFormat(this.config.locale,{year:this.hasAttribute("display")?this.getAttribute("display"):"numeric",timeZone:"UTC"}).format(new m(this.offsetState.year,this.offsetState.month).getDate());s(),this.viewState.observable.subscribe(M.VIEW_CHANGE,()=>s())}}yearIsLessThanMinimum(t){return t<this.minimumYear()}yearIsGreaterThanMaximum(t){return t>this.maximumYear()}minimumYear(){return new Date().getFullYear()-this.numberOfPastYears}maximumYear(){return new Date().getFullYear()+this.numberOfFutureYears}renderSelectOptions(t){let e=new Date().getFullYear(),a=Array.from({length:this.numberOfPastYears+this.numberOfFutureYears+1},(r,o)=>e-this.numberOfPastYears+o).map(r=>{let o=new m(r,1),l=new m(r,12,31);return!this.validator.isBetweenMinMax(o)&&!this.validator.isBetweenMinMax(l)?null:r}).filter(Boolean);at(t.querySelector("template"),r=>{if(a.length===0){let o=this.viewState.year;return r({slots:{default:o}})}return a.map(o=>r({slots:{default:o}}))})}},ls=class extends D{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.config=t.config,this.selectable=t.selectable,this.observable=t.observable,this.metadata=t.metadata,this.validator=t.validator,this.viewState=t.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset),this.monthEls=[],this.renderMonths();let e=()=>this.monthEls.forEach(r=>Xa(r,this.config,r.offsetState,this.metadata)),s=()=>this.monthEls.forEach(r=>Ka(r,this._disableable.isDisabled(),this.config,r.offsetState,this.selectable,this.validator));e(),s();let a=this.config.months;this.viewState.observable.subscribe(M.VIEW_CHANGE,()=>{a!==this.config.months&&(a=this.config.months,this.renderMonths()),e(),s()}),this.observable.subscribe([M.SELECTION,M.ACTIVATION],()=>{s()}),this._disableable.onChange(()=>s())}renderMonths(){let t=this.querySelector('template:not([name]), template[name="month"]');at(t,e=>{let s=Array.from({length:this.config.months}).map((a,r)=>r);return this.monthEls=s.map(a=>{let r=this.viewState.generateOffsetState(a),o=e({attrs:{"data-month":""}});o.offsetState=r;let l=o.querySelector("thead")?.set;return c(o,"role","grid"),l&&c(l,"aria-hidden","true"),o}),this.monthEls})}},us=class extends D{boot(){let t=this.closest("ui-calendar, ui-date-picker");this._disableable=t._disableable,this.behavior=this.hasAttribute("behavior")?this.getAttribute("behavior"):"auto",t.hasAttribute("static")&&(this.behavior="none"),te(this,()=>this._disableable.isDisabled(),()=>this.navigateAndSelectToday()),this._disableable.onInitAndChange(s=>{s?c(this,"disabled",""):A(this,"disabled")});let e=this.querySelector("template");e&&at(e,s=>s({slots:{default:m.today().getDay()}}))}navigateAndSelectToday(){let t=this.closest("ui-calendar, ui-date-picker"),e=()=>{let a=t.viewState,r=m.today();return a.year===r.getYear()&&a.month===r.getMonth()};(this.behavior==="select"||this.behavior==="auto"&&e())&&(t.config.mode===j.RANGE?t.selectable.setValue({start:m.today().toIsoDateString(),end:m.today().toIsoDateString()}):t.config.mode===j.MULTIPLE?t.selectable.setValue([m.today().toIsoDateString()]):t.selectable.setValue(m.today().toIsoDateString())),t.viewState.setMonth(m.today().getMonth()),t.viewState.setYear(m.today().getYear())}},cs=class extends D{boot(){let t=this.closest("ui-calendar");if(this._disableable=t._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.selectable=t.selectable,this.observable=t.observable,this.config=t.config,this.viewState=t.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset),this.config.mode!==j.RANGE)throw"Presets can only be used with range calendars";let e=this.firstElementChild;if(e){let s=a=>{if(e._selectable instanceof X){let r=e._selectable.findByValue(a);return r?r?.el?.textContent:null}else if(e instanceof HTMLSelectElement)return e.querySelector(`option[value="${a}"]`)?.textContent;return null};this.selectable.setDisplayResolver(a=>{let r=this.selectable.getValue()?.preset||"";if(r){let o=s(r);if(o)return o}return a}),e.value=this.selectable.getValue()?.preset||"custom",e.addEventListener("change",this._disableable.enabled(()=>{if(["","custom"].includes(e.value)){let{start:a,end:r}=this.selectable.getValue()||{};a&&r&&this.selectable.setValue({start:a,end:r})}else this.selectable.setValue({preset:e.value})})),this.observable.subscribe(M.SELECTION,()=>{let a=this.selectable.getValue();e.value=a?.preset||"custom"}),this._disableable.onInitAndChange(a=>{a?c(e,"disabled",""):A(e,"disabled")})}}},hs=class extends D{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.selectable=t.selectable,this.observable=t.observable,this.config=t.config,this.viewState=t.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset);let[e,s]=this.querySelectorAll("input");this.config.mode===j.RANGE?ps(e,s,t):fs(e,t)}};P(({css:i})=>i`
    ui-calendar-preset,
    ui-calendar-previous,
    ui-calendar-next {
        display: block;
        user-select: none;
    }
`);C("calendar",ss);C("calendar-today",us);C("calendar-presets",cs);C("calendar-previous",as);C("calendar-inputs",hs);C("calendar-next",rs);C("calendar-months",ls);C("calendar-month",os);C("calendar-year",ns);function Eo(i,t,e,s){let a=!1,r=i.hasAttribute("readonly");return y(i,"click",o=>{if(a||r)return;let l=o.target.closest("[data-date]");if(!l)return;let n=le(l);s.isValid(n)&&t.select(n)}),y(i,"mouseover",o=>{if(a||r)return;let l=o.target.closest("[data-date]");if(!l)return;let n=le(l);s.isValid(n)&&t.activate(n)}),y(i,"mouseout",()=>{a||r||t.activate(null)}),y(i,"focusin",o=>{if(a||r)return;let l=o.target.closest("[data-date]");if(!l)return;let n=le(l);s.isValid(n)&&t.activate(n)}),y(i,"keydown",o=>{if(a)return;let l=o.target.closest("[data-date]");if(!l)return;let n=!0,u,h=le(l),p=g=>{let v=h.getCopy(),b=Math.sign(g),d=366;for(v.setDay(v.getDay()+g);!s.isValid(v)&&d>0;)v.setDay(v.getDay()+b),d--;h=v};switch(o.key){case"ArrowRight":u="forward",p(1);break;case"ArrowLeft":u="backward",p(-1);break;case"ArrowUp":u="backward",p(-7);break;case"ArrowDown":u="forward",p(7);break;case"Home":e.previousMonth();break;case"End":e.nextMonth();break;case"PageUp":o.shiftKey,e.previousMonth();break;case"PageDown":o.shiftKey,e.nextMonth();break;default:n=!1}if(n){o.preventDefault(),o.stopPropagation();let g=Array.from(i.querySelectorAll("[data-date]")).find(v=>le(v).isSameDay(h));!g&&u&&(u==="forward"?e.nextMonth():e.previousMonth(),g=Array.from(i.querySelectorAll("[data-date]")).find(v=>le(v).isSameDay(h))),g?.querySelector("button")?.focus()}}),{enable(){a=!1},disable(){a=!0}}}function le(i){return!i||!i.hasAttribute("data-date")?null:m.fromIsoDateString(i.getAttribute("data-date"))}function fs(i,t){ds(i);let e=R(),s=e(()=>{let a=t.selectable.getValue();i.value=a||""});t.observable.subscribe(M.SELECTION,s),s(),i.addEventListener("change",e(()=>{let a=i.valueAsDate;a?(t.selectable.setValue(m.fromLocalDate(a).toIsoDateString()),t.viewState.setDate(m.fromLocalDate(a))):t.selectable.setValue("")}))}function ps(i,t,e){ds(i),ds(t);let s=R(),a=s(()=>{let{start:o,end:l}=e.selectable.getValue()||{};i.value=o||"",t.value=l||""}),r=s(()=>{let o=i.valueAsDate,l=t.valueAsDate;o&&l?e.selectable.setValue({start:m.fromLocalDate(o).toIsoDateString(),end:m.fromLocalDate(l).toIsoDateString()}):o?e.selectable.setValue({start:m.fromLocalDate(o).toIsoDateString(),end:null}):e.selectable.setValue({start:null,end:null})});e.observable.subscribe(M.SELECTION,a),a(),i.addEventListener("change",r),t.addEventListener("change",r)}function ds(i){y(i,"change",t=>t.stopPropagation()),y(i,"input",t=>t.stopPropagation())}var ms=class extends B{bootWithCalendar(t){let e=t.config.mode===j.RANGE;this.calendar=t,this._disableable=new O(this),this._disableable.onInitAndChange(u=>{this.calendar.disabled=u}),this.observable=new ne,this.selectable=new pi(this.calendar.selectable,this.observable),this.viewState=this.calendar.viewState,this.querySelector("ui-selected-date")?.bootWithCalendar(),this.querySelector("ui-date-picker-select")?.bootWithCalendar();let s=this.querySelector("dialog");if(!s)return;let a=this.querySelector("input");a=s?.contains(a)?null:a;let r=Array.from(this.querySelectorAll("input")).find(u=>u!==a);r=s?.contains(r)?null:r,a&&a.addEventListener("click",u=>u.preventDefault()),r&&r.addEventListener("click",u=>u.preventDefault());let o=this.querySelector("button");o=s?.contains(o)?null:o;let l=U(this.calendar,"calendar");if(this.triggerEl=a||o,!this.triggerEl)return;if(c(this.triggerEl,"role","combobox"),c(this.triggerEl,"aria-controls",l),this._disableable.onInitAndChange(u=>{u?c(this.triggerEl,"disabled",""):A(this.triggerEl,"disabled")}),this._dialogable=new ee(s,{clickOutside:!this.hasAttribute("disable-click-outside"),triggers:[o,a,r].filter(Boolean)}),this._closeable=new At(this),this._closeable.onClose(()=>this._dialogable.hide()),this._anchorable=new H(s,{reference:this.triggerEl,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),va()&&(a&&this.showIOSOverlay(a),r&&this.showIOSOverlay(r)),this.querySelectorAll("button").forEach(u=>{u!==this.triggerEl&&(s.contains(u)||(c(u,"aria-controls",l),c(u,"aria-haspopup","combobox"),Ja(u,this._dialogable),y(u,"click",()=>this._dialogable.toggle())))}),ko(this,this.triggerEl,s,this._dialogable,this._anchorable),Ja(this.triggerEl,this._dialogable),To(this,this._dialogable),Co(this.triggerEl,this._dialogable),Mo(this,this.calendar.config.mode,this.observable,this.selectable,this._dialogable),e&&s&&a&&r)bs(a),bs(r),ps(a,r,this);else if(s&&a){let u=a;bs(u),fs(u,this)}else s&&Do(o,this._dialogable);this._controllable=new W(this,{bubbles:!0}),this.calendar.addEventListener("change",u=>u.stopPropagation()),this.calendar.addEventListener("input",u=>u.stopPropagation()),this._submittable=new it(this,{name:this.getAttribute("name"),value:this.selectable.getValue()});let n=R();this._controllable.initial(u=>u&&this.selectable.setValue(u)),this._controllable.getter(()=>this.selectable.getValue()),this._controllable.setter(n(u=>this.selectable.setValue(u))),this.observable.subscribe(M.SELECTION,n(()=>{this.dispatchEvent(new Event("select",{bubbles:!1,cancelable:!0})),this._controllable.dispatch()})),this.observable.subscribe(M.SELECTION,()=>{this._submittable.update(this.selectable.getValue())}),this.observable.subscribe(M.VIEW_CHANGE,()=>{this.dispatchEvent(new Event("navigate",{bubbles:!1,cancelable:!0}))})}unmount(){if(this._dialogable?.getState()){let{unlock:t}=et();t()}}showIOSOverlay(t){let e=document.createElement("button");e.setAttribute("data-flux-ios-overlay",""),e.setAttribute("data-appended",""),e.classList.add("absolute","inset-0"),t.after(e)}input(){return this.querySelector("input")}clear(){this.selectable.setValue(null)}open(){this._dialogable.setState(!0)}close(){this._dialogable.setState(!1)}trigger(){return this.triggerEl}},gs=class extends D{bootWithCalendar(){if(this.picker=this.closest("ui-date-picker"),this.querySelectorAll("[data-appended]").forEach(t=>t.remove()),!this.querySelector('template[name="date"]')){let t=document.createElement("template");t.setAttribute("name","date"),t.innerHTML="<div><slot></slot></div>",this.appendChild(t)}this.templates={placeholder:this.querySelector('template[name="placeholder"]'),date:this.querySelector('template[name="date"]')},this.picker.observable.subscribe(M.SELECTION,()=>{this.render(this.picker)}),this.render(this.picker)}render(t){if(this.templates.placeholder?.clearPlaceholder?.(),this.templates.date?.clearDate?.(),t.selectable.hasSelection()){let{cleanup:e}=at(this.templates.date,s=>s({slots:{default:t.selectable.display(this.picker.calendar.config.locale)}}));this.templates.date.clearDate=e}else{if(!this.templates.placeholder)return;let{cleanup:e}=at(this.templates.placeholder,s=>s({slots:{}}));this.templates.placeholder.clearPlaceholder=e}}},vs=class extends D{bootWithCalendar(){this.picker=this.closest("ui-date-picker"),this.picker.selectable.blockSyncIf(()=>this.getBoundingClientRect().width>0),te(this,()=>this.picker._disableable.isDisabled(),()=>{this.picker.selectable.sync(),this.picker._dialogable.setState(!1)})}};C("date-picker",ms);C("date-picker-select",vs);C("selected-date",gs);P(({css:i})=>i`ui-date-picker { display: block; }`);P(({css:i})=>i`
/* For Chrome, Safari, Edge */
ui-date-picker input[type="date"]::-webkit-calendar-picker-indicator {
    display: none;
    -webkit-appearance: none;
}
`);function Ja(i,t){c(i,"aria-haspopup","listbox");let e=()=>{c(i,"aria-expanded",t.getState()?"true":"false"),t.getState()?c(i,"data-open",""):A(i,"data-open","")};t.onChange(()=>{e()}),e()}function ko(i,t,e,s,a){let r=()=>{Array.from([i,e]).forEach(o=>{s.getState()?c(o,"data-open",""):A(o,"data-open","")}),s.getState()&&a.reposition()};s.onChange(()=>r()),r(),s.onChange(()=>{s.getState()?i.dispatchEvent(new Event("open",{bubbles:!1,cancelable:!1})):i.dispatchEvent(new Event("close",{bubbles:!1,cancelable:!1}))})}function Co(i,t){y(i,"keydown",e=>{["ArrowDown","ArrowUp","Escape"].includes(e.key)&&(e.key==="ArrowDown"||e.key==="ArrowUp"?t.getState()||(t.setState(!0),e.preventDefault(),e.stopImmediatePropagation()):e.key==="Escape"&&t.getState()&&t.setState(!1))})}function Do(i,t){y(i,"click",()=>{t.setState(!t.getState())})}function bs(i){y(i,"focus",()=>i.select())}function To(i,t){let{lock:e,unlock:s}=et(t.el);t.onChange(()=>{t.getState()?e():s()})}function Mo(i,t,e,s,a){let r=t!==j.MULTIPLE;if(i.hasAttribute("close")){let o=i.getAttribute("close");r=o.split(" ").includes("auto"),o==="manual"&&(r=!1)}r&&e.subscribe(M.SELECTION,()=>{s.hasSelection()&&a.setState(!1)})}var ys=class extends D{boot(){let t=this.trigger(),e=this.overlay();this._disabled=this.hasAttribute("disabled"),this._popoverable=new G(e),this._anchorable=new H(e,{reference:t,auto:!1,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0});let{lock:s,unlock:a}=et(this._popoverable.el);this._popoverable.onChange(()=>{this._popoverable.getState()?s():a()}),y(t,"contextmenu",r=>{r.preventDefault(),this._anchorable.reposition(r.pageX,r.pageY),this._popoverable.setState(!0),this.hasAttribute("detail")&&c(e,"data-detail",this.getAttribute("detail"))}),this.hasAttribute("detail")&&c(e,"data-detail","")}unmount(){if(this.overlay()?._popoverable?.getState()){let{unlock:t}=et();t()}}trigger(){return this.firstElementChild}overlay(){if(this.hasAttribute("target")){let t=this.getAttribute("target");return document.getElementById(t)}else return this.lastElementChild.matches("[popover]")&&this.lastElementChild}};C("context",ys);var Vt=class extends vt{groupOfType=Y;boot({options:t}){t({wrap:!1,filter:!1}),this.onChanges=[]}onChange(t){this.onChanges.push(t)}activated(t){this.onChanges.forEach(e=>e())}activateFirst(){this.filterAwareWalker().first()?.use(Y).activate()}activateBySearch(t){this.filterAwareWalker().find(s=>s.textContent.toLowerCase().trim().startsWith(t.toLowerCase()))?.use(Y).activate()}activateSelectedOrFirst(t){if(!t||(s=>s.matches("ui-option")?getComputedStyle(s).display==="none":!1)(t)){this.filterAwareWalker().first()?.use(Y).activate();return}t?.use(Y).activate()}activateActiveOrFirst(){let t=this.getActive();if(!t){this.filterAwareWalker().first()?.use(Y).activate();return}t?.use(Y).activate()}activateActiveOrLast(){let t=this.getActive();if(!t){this.filterAwareWalker().last()?.use(Y).activate();return}t?.use(Y).activate()}activatePrev(){let t=this.getActive();if(!t){this.filterAwareWalker().last()?.use(Y).activate();return}let e;this.options.wrap?e=this.filterAwareWalker().prevOrLast(t):e=this.filterAwareWalker().prev(t),e?.use(Y).activate()}activateNext(){let t=this.getActive();if(!t){this.filterAwareWalker().first()?.use(Y).activate();return}let e;this.options.wrap?e=this.filterAwareWalker().nextOrFirst(t):e=this.filterAwareWalker().next(t),e?.use(Y).activate()}getActive(){return this.walker().find(t=>t.use(Y).isActive())}clearActive(){this.getActive()?.use(Y).deactivate()}filterAwareWalker(){let t=e=>e.matches("ui-option")?getComputedStyle(e).display==="none":!1;return q(this.el,(e,{skip:s,reject:a})=>{if(e[this.constructor.name]&&e!==this.el)return a();if(!e[this.groupOfType.name])return s();if(e.hasAttribute("disabled")||t(e))return a()})}},Y=class i extends N{groupedByType=Vt;mount(){this.el.addEventListener("mouseenter",()=>{this.activate()}),this.el.addEventListener("mouseleave",()=>{this.deactivate()})}activate(){this.group()&&this.group().walker().each(t=>t.use(i).deactivate(!1)),!this.el.hasAttribute("disabled")&&(c(this.el,"data-active",""),this.el.scrollIntoView({block:"nearest"}),this.group()&&this.group().activated(this.el))}deactivate(t=!0){A(this.el,"data-active"),t&&this.group()&&this.group().activated(this.el)}isActive(){return this.el.hasAttribute("data-active")}};var Bt=class extends vt{groupOfType=Ct;boot({options:t}){t({}),this.onChanges=[],this.lastSearch=""}onChange(t){this.onChanges.push(t)}filter(t){t===""?this.walker().each(e=>{e.use(Ct).unfilter()}):this.walker().each(e=>{this.matches(e,t)?e.use(Ct).unfilter():e.use(Ct).filter()}),this.lastSearch!==t&&this.onChanges.forEach(e=>e()),this.lastSearch=t}matches(t,e){return t.textContent.toLowerCase().trim().includes(e.toLowerCase().trim())}hasResults(){return this.walker().some(t=>!t.use(Ct).isFiltered())}},Ct=class extends N{groupedByType=Bt;boot({options:t}){t({mirror:null,keep:!1}),this.onChanges=[]}filter(){this.options().keep||(c(this.el,"data-hidden",""),this.options().mirror&&c(this.options().mirror,"data-hidden",""))}unfilter(){A(this.el,"data-hidden"),this.options().mirror&&A(this.options().mirror,"data-hidden","")}isFiltered(){return this.el.hasAttribute("data-hidden")}};var gt=class extends vt{groupOfType=V;boot({options:t}){t({wrap:!1,ensureTabbable:!0})}mount(){this.options().ensureTabbable&&this.ensureTabbable()}focusFirst(){let t;t=t||this.walker().find(e=>e.hasAttribute("autofocus")),t=t||this.walker().find(e=>e.getAttribute("tabindex")==="0"),t=t||this.walker().find(e=>e.getAttribute("tabindex")==="-1"),t=t||this.walker().find(e=>pa(e)),t?.focus()}focusPrev(){this.moveFocus(t=>this.options().wrap?this.walker().prevOrLast(t):this.walker().prev(t))}focusNext(){this.moveFocus(t=>this.options().wrap?this.walker().nextOrFirst(t):this.walker().next(t))}focusBySearch(t){let e=this.walker().find(s=>s.textContent.toLowerCase().trim().startsWith(t.toLowerCase()));e?.use(V).tabbable(),e?.use(V).focus()}moveFocus(t){let e=this.walker().find(a=>a.use(V).isTabbable());t(e)?.use(V).focus()}ensureTabbable(){this.walker().findOrFirst(t=>{t.use(V).isTabbable()})?.use(V).tabbable()}wipeTabbables(){this.walker().each(t=>{t.use(V).untabbable()})}untabbleOthers(t){this.walker().each(e=>{e!==t&&e.use(V).untabbable()})}walker(){return q(this.el,(t,{skip:e,reject:s})=>{if(t[this.constructor.name]&&t!==this.el)return s();if(!t[this.groupOfType.name])return e();if(t.hasAttribute("disabled"))return s()})}},V=class extends N{groupedByType=gt;boot({options:t}){t({hover:!1,disableable:null,tabbable:!1,tabbableAttr:null})}mount(){let t=this.options().disableable;if(!t)throw"Focusable requires a Disableable instance...";this.el.hasAttribute("tabindex")||(this.options().tabbable?this.tabbable():this.untabbable()),this.pauseFocusListener=this.on("focus",t.enabled(()=>{this.focus(!1)})).pause,this.on("focus",t.enabled(()=>{we()&&c(this.el,"data-focus","")})),this.on("blur",t.enabled(()=>{A(this.el,"data-focus")})),this.options().hover&&this.on("pointerenter",t.enabled(()=>{this.group()?.untabbleOthers(this.el),this.tabbable()})),this.options().hover&&this.on("pointerleave",t.enabled(e=>{this.untabbable()}))}focus(t=!0){this.group()?.untabbleOthers(this.el),this.tabbable(),t&&this.pauseFocusListener(()=>{this.el.focus({focusVisible:!1})})}tabbable(){c(this.el,"tabindex","0"),this.options().tabbableAttr&&c(this.el,this.options().tabbableAttr,"")}untabbable(){c(this.el,"tabindex","-1"),this.options().tabbableAttr&&A(this.el,this.options().tabbableAttr)}isTabbable(){return this.el.getAttribute("tabindex")==="0"}};var Le=class extends D{boot(){c(this,"tabindex","-1"),this.hasAttribute("popover")&&this.addEventListener("lofi-close-popovers",()=>{this.hidePopover()}),c(this,"role","listbox")}},ws=class extends D{mount(){let t=this;this._disableable=new O(t,{disableWithParent:!1}),this._disableable.onInitAndChange(a=>{a?c(t,"aria-disabled","true"):A(t,"aria-disabled")});let e=U(t,"option");c(t,"role","option"),this._filterable=new Ct(t,{mirror:this,keep:!!this.closest("ui-empty")||this.getAttribute("filter")==="manual"}),this._activatable=new Y(t),this.hasAttribute("action")||(this._selectable=new L(t,{value:this.getValue(),label:this.getLabel(),selectedInitially:this.hasAttribute("selected")})),new MutationObserver(a=>{a.forEach(r=>{r.attributeName==="selected"&&(this.hasAttribute("selected")?this._selectable.setState(!0):this._selectable.setState(!1))})}).observe(this,{attributeFilter:["selected"]})}get selected(){return this?._selectable?this._selectable.isSelected():!1}set selected(t){if(!this?._selectable)return!1;this._selectable.setState(t)}getLabel(){return this.hasAttribute("label")?this.getAttribute("label"):this.textContent.trim()}getValue(){return this.hasAttribute("value")?this.getAttribute("value"):this.textContent.trim()}};P(({css:i})=>i`ui-options:not([popover]), ui-option { display: block; cursor: default; }`);C("options",Le);C("option",ws);var xi=class extends D{boot(){if(this.querySelectorAll("[data-appended]").forEach(t=>t.remove()),!this.querySelector("template")){let t=document.createElement("template");t.setAttribute("name","placeholder"),t.innerHTML="<span>"+this.innerHTML+"</span>",this.innerHTML="",this.appendChild(t)}if(!this.querySelector('template[name="options"]')){let t=document.createElement("template");t.setAttribute("name","options"),t.innerHTML="<div><slot></slot></div>",this.appendChild(t)}if(!this.querySelector('template[name="option"]')){let t=document.createElement("template");t.setAttribute("name","option"),t.innerHTML="<div><slot></slot></div>",this.appendChild(t)}this.templates={placeholder:this.querySelector('template[name="placeholder"]'),overflow:this.querySelector('template[name="overflow"]'),options:this.querySelector('template[name="options"]'),option:this.querySelector('template[name="option"]')},this.templates.options.elsByValue=new Map,this.max=this.templates.overflow?.getAttribute("max")?this.templates.overflow.getAttribute("max"):1/0,this.selecteds=new Map,this.picker=this.closest("ui-select,ui-pillbox"),this.multiple=this.picker.hasAttribute("multiple")}mount(){queueMicrotask(()=>{this.picker._selectable.onInitAndChange(()=>{this.render(!0)});let t=this.picker.list();t&&new MutationObserver(e=>{queueMicrotask(()=>this.render())}).observe(t,{childList:!0})})}render(t){if(this.multiple){let e=this.picker.value,s=Array.from(this.selecteds.keys()).filter(o=>!e.includes(o)),a=e.filter(o=>!this.selecteds.has(o));s.forEach(o=>this.selecteds.delete(o));let r=new Map;for(let o of a){let l=this.picker._selectable.findByValue(o);if(!l){if(t)return setTimeout(()=>this.render());throw`Could not find option for value "${o}"`}r.set(o,l)}r.forEach((o,l)=>this.selecteds.set(l,o)),this.templates.placeholder?.clearPlaceholder?.(),this.templates.overflow?.clearOverflow?.(),this.templates.options?.clearOptions?.(),this.selecteds.size>0?this.renderOptions({hasOverflowed:o=>{if(this.max==="auto"){let l=!1;if(this.renderOverflow(this.selecteds.size,this.selecteds.size-o),this.clientWidth<this.scrollWidth&&(l=!0),this.templates.overflow?.clearOverflow?.(),l)return!0}return o>parseInt(this.max)},renderOverflow:o=>{this.templates?.overflow?.getAttribute("mode")!=="append"&&this.templates.options?.clearOptions?.(),this.renderOverflow(this.selecteds.size,o)}}):this.renderPlaceholder()}else{let e=this.picker.value;if(Array.from(this.selecteds.keys()).includes(e))return;this.selecteds.clear();let s=this.picker._selectable.findByValue(e);if(s)this.selecteds.set(e,s);else if(!["",null,void 0].includes(e)){if(t)return setTimeout(()=>{console.log("retrying..."),this.render()});throw`Could not find option for value "${e}"`}this.templates.placeholder?.clearPlaceholder?.(),this.templates.option?.clearOption?.(),this.selecteds.size>0?this.renderOption():this.renderPlaceholder()}}renderOptions({hasOverflowed:t,renderOverflow:e}){let s=document.createElement("div");s.style.display="contents";let a=Ie(this.templates.options,{default:s});this.templates.options.after(a),this.templates.options.clearOptions=()=>{a.remove(),this.templates.options.clearOptions=()=>{}};let r=0,o=!1;for(let[n,u]of this.selecteds){let h=new DocumentFragment;h.append(...u.el.cloneNode(!0).childNodes);let p=Ie(this.templates.option,{text:u.el.textContent.trim(),default:h,value:n});if(p.setAttribute("data-value",n),p.setAttribute("data-appended",""),p.deselect=()=>u.deselect(),s.appendChild(p),r++,t(r)){o=!0,s.removeChild(p),r--;break}}let l=new DocumentFragment;l.append(...s.childNodes),s.replaceWith(l),o&&e(this.selecteds.size-r)}renderOption(){for(let[t,e]of this.selecteds){let s=new DocumentFragment;s.append(...e.el.cloneNode(!0).childNodes);let a=Ie(this.templates.option,{text:e.el.textContent.trim(),default:s,value:t});a.setAttribute("data-value",t),a.setAttribute("data-appended",t),a.deselect=()=>e.deselect(),this.templates.option.after(a),this.templates.option.clearOption=()=>{a.remove(),this.templates.option.clearOption=()=>{}}}}renderPlaceholder(){if(!this.templates.placeholder)return;let t=Ie(this.templates.placeholder);t.setAttribute("data-appended",""),this.templates.placeholder.after(t),this.templates.placeholder.clearPlaceholder=()=>{t.remove(),this.templates.placeholder.clearPlaceholder=()=>{}}}renderOverflow(t,e){if(!this.templates.overflow)return;let s=Ie(this.templates.overflow,{remainder:e,count:this.selecteds.size});s.setAttribute("data-appended",""),this.templates.overflow.after(s),this.templates.overflow.clearOverflow=()=>{s.remove(),this.templates.placeholder.clearOverflow=()=>{}}}},Ai=class extends D{boot(){this.addEventListener("click",t=>{t.stopPropagation();let e=this.closest("[data-value]")?.getAttribute("data-value");e!==void 0&&this.closest("ui-pillbox")._selectable.selectableByValue(e).deselect()})}};function Ie(i,t={}){let e=i.content.cloneNode(!0);return Object.entries(t).forEach(([s,a])=>{(s==="default"?e.querySelectorAll("slot:not([name])"):e.querySelectorAll(`slot[name="${s}"]`)).forEach(o=>o.replaceWith(typeof a=="string"?document.createTextNode(a):a))}),e.firstElementChild}var $t=class extends B{boot(){let t=this.list();this._controllable=new W(this,{bubbles:!0}),this._selectable=new X(t,{multiple:this.hasAttribute("multiple")}),this._submittable=new it(this,{name:this.getAttribute("name"),value:this._selectable.getState()}),this._controllable.initial(s=>s&&this._selectable.setState(s)),this._controllable.getter(()=>this._selectable.getState());let e=R();this._controllable.setter(e(s=>{this._selectable.setState(s)})),this._selectable.onChange(e(()=>{this._controllable.dispatch(),this.dispatchEvent(new CustomEvent("select",{bubbles:!1}))})),this._selectable.onInitAndChange(()=>{this._submittable.update(this._selectable.getState())}),queueMicrotask(()=>{this._submittable.update(this._selectable.getState())})}mount(){this._disableable=new O(this);let t=this.input(),e=this.button(),s=this.list(),a=this.hasAttribute("multiple"),r=this.hasAttribute("autocomplete"),o=this.hasAttribute("autocomplete")&&this.getAttribute("autocomplete").trim().split(" ").includes("strict"),l=this.querySelector("ui-options")||this,n=As(l,"options",a);this._activatable=new Vt(l,{filter:"data-hidden"}),!t&&!e&&this._disableable.onInitAndChange(b=>{b?this.removeAttribute("tabindex"):this.setAttribute("tabindex","0")}),this.hasAttribute("filter")&&this.getAttribute("filter")!=="manual"&&(this._filterable=new Bt(s),this._filterable.onChange(()=>{this._activatable.clearActive(),this._filterable.hasResults()&&this._activatable.activateFirst()}),this.addEventListener("close",()=>{this._filterable&&this._filterable.filter("")}));let u=this.querySelector("[popover]:not(ui-tooltip > [popover])"),h=u?.querySelector('input:not([type="hidden"])'),p=this.querySelector('input:not([type="hidden"])');p=u?.contains(p)?null:p;let g=this.querySelector("button");if(g=u?.contains(g)?null:g,!(u||p))Pt(this,this._activatable),Ot(this,this,this._activatable),Za(this,this._activatable,this._selectable);else if(!u&&p){let b=p;this._disableable.onInitAndChange(d=>{d?b&&c(b,"disabled",""):b&&A(b,"disabled")}),We(this,b,this._selectable,this._popoverable),Za(b,this._activatable,this._selectable),Qa(r,o,this,b,this._selectable,this._popoverable),Re(b),Fe(b),this._filterable&&Ne(b,this._filterable),pe(b,this._activatable,this._selectable),Pt(b,this._activatable),Ot(this,b,this._activatable),Ht(this,this._activatable)}else if(u&&p){let b=p;c(b,"role","combobox"),c(b,"aria-controls",n);let d=u;this._popoverable=new G(d),this._anchorable=new H(d,{reference:b,matchWidth:!0,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),Qa(r,o,this,b,this._selectable,this._popoverable),this._disableable.onInitAndChange(_=>{_?b&&c(b,"disabled",""):b&&A(b,"disabled")}),this.querySelectorAll("button").forEach(_=>{d.contains(_)||(c(_,"tabindex","-1"),c(_,"aria-controls",n),c(_,"aria-haspopup","listbox"),Yt(_,this._popoverable),y(_,"click",()=>{this._popoverable.toggle(),b.focus()}))}),We(this,b,this._selectable,this._popoverable),ue(this,b,d,this._popoverable,this._anchorable),be(this,this._popoverable,[b]),Yt(b,this._popoverable),Re(b),Fe(b),this._filterable&&Ne(b,this._filterable),pe(b,this._activatable,this._selectable),Oo(b,this._popoverable),de(b,this._popoverable,this._activatable,this._selectable),Po(b,this._popoverable),he(this,this._popoverable),Pt(b,this._activatable),Ot(this,b,this._activatable),Ht(this,this._activatable),ce(this._popoverable,this._activatable,this._selectable),fe(this,this._selectable,this._popoverable,a)}else if(u&&h){let b=g,d=h,_=u;c(b,"role","combobox"),c(d,"role","combobox"),c(b,"aria-controls",n),this._disableable.onInitAndChange(w=>{w?(b&&c(b,"disabled",""),d&&c(d,"disabled","")):(b&&A(b,"disabled"),d&&A(d,"disabled"))}),this._popoverable=new G(_),this._anchorable=new H(_,{reference:b,matchWidth:!0,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0,scrollY:!1}),Re(d),Fe(d),this._filterable&&Ne(d,this._filterable),Ss(d,this._popoverable),ue(this,b,_,this._popoverable,this._anchorable),be(this,this._popoverable,[d]),Yt(b,this._popoverable),We(this,d,this._selectable,this._popoverable),de(b,this._popoverable,this._activatable,this._selectable),Ue(b,this._popoverable),he(this,this._popoverable),Pt(d,this._activatable),qe(b,this._activatable,this._popoverable),Ot(this,d,this._activatable),Ht(this,this._activatable),ce(this._popoverable,this._activatable,this._selectable),fe(this,this._selectable,this._popoverable,a)}else if(u){let b=g,d=u;c(b,"role","combobox"),c(b,"aria-controls",n),this._disableable.onInitAndChange(_=>{_?(b&&c(b,"disabled",""),t&&c(t,"disabled","")):(b&&A(b,"disabled"),t&&A(t,"disabled"))}),this._popoverable=new G(d),this._anchorable=new H(d,{reference:b,matchWidth:!0,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),ue(this,b,d,this._popoverable,this._anchorable),be(this,this._popoverable),Yt(b,this._popoverable),de(b,this._popoverable,this._activatable,this._selectable),Ue(b,this._popoverable),pe(b,this._activatable,this._selectable),he(this,this._popoverable),Pt(b,this._activatable),qe(b,this._activatable,this._popoverable),Ot(this,b,this._activatable),Ht(this,this._activatable),ce(this._popoverable,this._activatable,this._selectable),fe(this,this._selectable,this._popoverable,a)}new MutationObserver(()=>{setTimeout(()=>{if(!this._popoverable||this._popoverable.getState()){let b=this._selectable.selecteds().find(d=>!d.el._disableable.isDisabled())?.el;setTimeout(()=>{this._activatable.activateSelectedOrFirst(b)})}else this._activatable.clearActive()})}).observe(s,{childList:!0})}unmount(){if(this._popoverable?.getState()){let{unlock:t}=et();t()}}trigger(){return this.button()||this.input()}button(){return Array.from(this.querySelectorAll("button")).find(t=>t.nextElementSibling?.matches("[popover]"))||null}input(){return this.querySelector('input:not([type="hidden"])')}list(){return this.querySelector("ui-options")||this}clear(){this.input()&&(this.input().value="",this.input().dispatchEvent(new Event("input",{bubbles:!1})))}open(){this._popoverable.setState(!0)}close(){this._popoverable.setState(!1)}deselectLast(){!this.hasAttribute("multiple")&&this.value!==null&&(this.value=null,this.dispatchEvent(new Event("input",{bubbles:!1})),this.dispatchEvent(new Event("change",{bubbles:!1}))),this.hasAttribute("multiple")&&this.value.length!==0&&(this.value=this.value.slice(0,-1),this.dispatchEvent(new Event("input",{bubbles:!1})),this.dispatchEvent(new Event("change",{bubbles:!1})))}},xs=class extends D{boot(){c(this,"data-hidden","")}mount(){queueMicrotask(()=>{let t=this.closest("ui-autocomplete, ui-combobox, ui-select, ui-pillbox"),e=this.closest("ui-options");if(!e)return;let s=l=>l.hasAttribute("data-hidden"),a=()=>{let l;CSS.supports("selector(&)")?l=Array.from(e.querySelectorAll("& > ui-option")).filter(n=>!s(n)).length===0:l=Array.from(e.querySelectorAll(":scope > ui-option")).filter(n=>!s(n)).length===0,l?A(this,"data-hidden"):c(this,"data-hidden","")};a();let r=t._filterable;r&&r.onChange(a),new MutationObserver(l=>{setTimeout(()=>a())}).observe(e,{childList:!0})})}};C("selected-remove",Ai);C("selected",xi);C("select",$t);C("empty",xs);P(({css:i})=>i`ui-select { display: block; }`);P(({css:i})=>i`ui-selected-option { display: contents; }`);P(({css:i})=>i`ui-empty { display: block; cursor: default; }`);function Pt(i,t){y(i,"keydown",e=>{["ArrowDown","ArrowUp"].includes(e.key)&&(e.key==="ArrowDown"?(t.activateNext(),e.preventDefault(),e.stopPropagation()):e.key==="ArrowUp"&&(t.activatePrev(),e.preventDefault(),e.stopPropagation()))})}function qe(i,t,e){ai(i,s=>{t.activateBySearch(s),e.getState()||t.getActive()?.click()})}function Ot(i,t,e){y(t,"keydown",s=>{if(s.key==="Enter"){let a=e.getActive();if(s.preventDefault(),s.stopPropagation(),!a)return;a.click(),i.dispatchEvent(new CustomEvent("action",{bubbles:!1,cancelable:!1}))}})}function Ht(i,t,e=!1){y(i,e?"pointerdown":"click",s=>{if(s.target.closest("ui-option")){let a=s.target.closest("ui-option");if(a._disableable.isDisabled())return;a._selectable?.trigger(),i.dispatchEvent(new CustomEvent("action",{bubbles:!1,cancelable:!1})),s.preventDefault(),s.stopPropagation()}})}function Za(i,t,e){y(i,"focus",()=>{let s=e.selecteds().find(a=>!a.el._disableable.isDisabled())?.el;t.activateSelectedOrFirst(s)}),y(i,"blur",()=>{t.clearActive()})}function As(i,t){let e=U(i,"options");return c(i,"role","listbox"),c(i,"aria-multiselectable",t?"true":"false"),e}function Yt(i,t){c(i,"aria-haspopup","listbox");let e=()=>{c(i,"aria-expanded",t.getState()?"true":"false"),t.getState()?c(i,"data-open",""):A(i,"data-open","")};t.onChange(()=>{e()}),e()}function ue(i,t,e,s,a){let r=()=>{Array.from([i,e]).forEach(o=>{s.getState()?c(o,"data-open",""):A(o,"data-open","")}),s.getState()?a.reposition():a.cleanup()};s.onChange(()=>r()),r(),s.onChange(()=>{s.getState()?i.dispatchEvent(new Event("open",{bubbles:!1,cancelable:!1})):i.dispatchEvent(new Event("close",{bubbles:!1,cancelable:!1}))})}function ce(i,t,e){i.onChange(()=>{if(i.getState()){let s=e.selecteds().find(a=>!a.el._disableable.isDisabled())?.el;setTimeout(()=>{t.activateSelectedOrFirst(s)})}else t.clearActive()})}function he(i,t){y(i,"keydown",e=>{e.key==="Escape"&&t.getState()&&(t.setState(!1),e.preventDefault(),e.stopImmediatePropagation())})}function de(i,t){y(i,"keydown",e=>{["ArrowDown","ArrowUp"].includes(e.key)&&(e.key==="ArrowDown"||e.key==="ArrowUp")&&(t.getState()||(t.setState(!0),e.preventDefault(),e.stopImmediatePropagation()))})}function Po(i,t){y(i,"click",()=>{t.getState()||(t.setState(!0),i.focus())})}function Ue(i,t){y(i,"click",()=>{t.setState(!t.getState()),i.focus()})}function Ss(i,t){t.onChange(()=>{t.getState()&&setTimeout(()=>i.focus())})}function Ne(i,t){t&&y(i,"input",e=>{t.filter(e.target.value)})}function Fe(i){y(i,"focus",()=>i.select())}function Re(i){y(i,"change",t=>t.stopPropagation()),y(i,"input",t=>t.stopPropagation())}function Oo(i,t){y(i,"keydown",e=>{(/^[a-zA-Z0-9]$/.test(e.key)||e.key==="Backspace")&&(t.getState()||t.setState(!0))})}function We(i,t,e,s){if(!i.hasAttribute("clear"))return;let r=p=>{t.value!==p&&(t.value=p,t.dispatchEvent(new Event("input",{bubbles:!1})))},o=i.getAttribute("clear"),l=o===""||o.split(" ").includes("action"),n=o===""||o.split(" ").includes("select"),u=o===""||o.split(" ").includes("close"),h=o===""||o.split(" ").includes("esc");o==="none"&&(l=n=u=h=!1),l?i.addEventListener("action",p=>{r("")}):n&&e.onChange(()=>{queueMicrotask(()=>r(""))}),u&&s.onChange(()=>{s.getState()||r("")}),h&&y(t,"keydown",p=>{p.key==="Escape"&&r("")})}function fe(i,t,e,s){let a=!s,r=!s;if(i.hasAttribute("close")){let o=i.getAttribute("close");a=o===""||o.split(" ").includes("action"),r=o.split(" ").includes("select"),o==="none"&&(a=r=!1)}a?i.addEventListener("action",o=>{e.setState(!1)}):r&&t.onChange(()=>{e.setState(!1)})}function pe(i,t,e){t.onChange(()=>{let s=t.getActive();s?c(i,"aria-activedescendant",s.id):A(i,"aria-activedescendant")}),e.onChange(s=>{if(!s)return;let a=s.el;a&&c(i,"aria-activedescendant",a.id)})}function Qa(i,t,e,s,a,r){if(!i){c(s,"autocomplete","off"),c(s,"aria-autocomplete","none");return}let o=l=>{s.value=l,s.dispatchEvent(new Event("input",{bubbles:!1}))};c(s,"autocomplete","off"),c(s,"aria-autocomplete","list"),s.value!==""&&a.setState(s.value),queueMicrotask(()=>{a.onInitAndChange(()=>{s.value=a.selectedTextValue()})}),e.addEventListener("action",l=>{o(a.selectedTextValue())}),t&&r.onChange(()=>{r.getState()||o(a.selectedTextValue())})}function be(i,t,e=[]){let{lock:s,unlock:a}=et(t.el,!1,e);t.onChange(()=>{t.getState()?s():a()})}var _s=class extends $t{mount(){this._disableable=new O(this);let t=this.input(),e=this.list(),s=this.hasAttribute("multiple"),a=this.querySelector("ui-pillbox-trigger"),r=this.querySelector("ui-options")||this,o=As(r,"options",s);this._activatable=new Vt(r,{filter:"data-hidden"}),this.hasAttribute("filter")&&this.getAttribute("filter")!=="manual"&&(this._filterable=new Bt(e),this._filterable.onChange(()=>{this._activatable.clearActive(),this._filterable.hasResults()&&this._activatable.activateFirst()}),this.addEventListener("close",()=>{this._filterable&&this._filterable.filter("")}));let l=this.querySelector("[popover]:not(ui-tooltip > [popover])"),n=l?.querySelector('input:not([type="hidden"])');if(!l)throw new Error("Popover element not found");if(n){let h=a,p=n,g=l;c(h,"role","button"),c(p,"aria-autocomplete","list"),c(p,"aria-controls",o),c(p,"role","combobox"),this._disableable.onInitAndChange(v=>{v?(h&&c(h,"disabled",""),p&&c(p,"disabled","")):(h&&A(h,"disabled"),p&&A(p,"disabled"))}),this._popoverable=new G(g),this._anchorable=new H(g,{reference:h,matchWidth:!0,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0,scrollY:!1}),pe(p,this._activatable,this._selectable),Re(p),Fe(p),this._filterable&&Ne(p,this._filterable),Ss(p,this._popoverable),ue(this,h,g,this._popoverable,this._anchorable),be(this,this._popoverable,[p]),Yt(h,this._popoverable),We(this,p,this._selectable,this._popoverable),de(h,this._popoverable,this._activatable,this._selectable),Ue(h,this._popoverable),he(this,this._popoverable),Pt(p,this._activatable),qe(h,this._activatable,this._popoverable),Ot(this,p,this._activatable),Ht(this,this._activatable),ce(this._popoverable,this._activatable,this._selectable),fe(this,this._selectable,this._popoverable,s)}else{let h=a,p=l;c(h,"role","combobox"),c(h,"aria-controls",o),c(h,"aria-autocomplete","none"),this._disableable.onInitAndChange(g=>{g?(h&&c(h,"disabled",""),t&&c(t,"disabled","")):(h&&A(h,"disabled"),t&&A(t,"disabled"))}),this._popoverable=new G(p),this._anchorable=new H(p,{reference:h,matchWidth:!0,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),ue(this,h,p,this._popoverable,this._anchorable),be(this,this._popoverable),Yt(h,this._popoverable),de(h,this._popoverable,this._activatable,this._selectable),Ue(h,this._popoverable),pe(h,this._activatable,this._selectable),he(this,this._popoverable),Pt(h,this._activatable),qe(h,this._activatable,this._popoverable),Ot(this,h,this._activatable),Ht(this,this._activatable),ce(this._popoverable,this._activatable,this._selectable),fe(this,this._selectable,this._popoverable,s)}new MutationObserver(()=>{setTimeout(()=>{if(!this._popoverable||this._popoverable.getState()){let h=this._selectable.selecteds().find(p=>!p.el._disableable.isDisabled())?.el;setTimeout(()=>{this._activatable.activateSelectedOrFirst(h)})}else this._activatable.clearActive()})}).observe(e,{childList:!0})}list(){return this.querySelector("ui-options")||this}},Es=class extends D{boot(){c(this,"tabindex","0")}mount(){y(this,"keydown",t=>{t.key===" "&&(t.preventDefault(),t.stopImmediatePropagation(),this.click())})}};C("pillbox-trigger",Es);C("pillbox",_s);P(({css:i})=>i`ui-pillbox { display: block; }`);var Ve=class i extends D{boot(){if(this._focusable=new gt(this,{wrap:!1,ensureTabbable:!1}),y(this,"keydown",t=>{["ArrowDown"].includes(t.key)?(t.target===this?this._focusable.focusFirst():this._focusable.focusNext(),t.preventDefault(),t.stopPropagation()):["ArrowUp"].includes(t.key)&&(t.target===this?this._focusable.focusFirst():this._focusable.focusPrev(),t.preventDefault(),t.stopPropagation())}),ai(this,t=>this._focusable.focusBySearch(t)),this.hasAttribute("popover")&&this.addEventListener("lofi-close-popovers",()=>{this.hasAttribute("keep-open")||setTimeout(()=>this.hidePopover(),50)}),this.parentElement.localName==="ui-dropdown"){let t=this.parentElement;y(t.trigger(),"keydown",e=>{e.key==="ArrowDown"&&(this.fromArrowDown=!0,this.showPopover(),e.preventDefault(),e.stopPropagation())})}c(this,"role","menu"),c(this,"tabindex","-1")}mount(){this.initializeMenuItems(),new MutationObserver(e=>{this.initializeMenuItems()}).observe(this,{childList:!0,subtree:!0})}onPopoverShow(){queueMicrotask(()=>{this.fromArrowDown?(this._focusable.focusFirst(),this.fromArrowDown=!1):this.focus()})}onPopoverHide(){this._focusable.wipeTabbables()}initializeMenuItems(){this.walker().each(t=>{t._disableable||Lo(t)})}walker(){return q(this,(t,{skip:e,reject:s})=>{if(t instanceof i||t instanceof $t)return s();if(!["a","button"].includes(t.localName))return e()})}},ks=class extends D{boot(){}},Cs=class extends D{boot(){this._disabled=this.hasAttribute("disabled"),this._disableable=new O(this);let t=this;if(this._disabled&&(c(t,"disabled",""),c(t,"aria-disabled","true")),U(t,"menu-checkbox"),c(t,"role","menuitemcheckbox"),this._disabled)return;t._focusable=new V(t,{disableable:this._disableable,hover:!0,tabbableAttr:"data-active"}),t._selectable=new L(t,{toggleable:!0,value:this.hasAttribute("value")?this.getAttribute("value"):t.textContent.trim(),label:this.hasAttribute("label")?this.getAttribute("label"):t.textContent.trim(),dataAttr:"data-checked",ariaAttr:"aria-checked",selectedInitially:this.hasAttribute("checked")}),this._controllable=new W(this),this._controllable.initial(s=>s&&t._selectable.setState(s)),this._controllable.getter(()=>t._selectable.getState());let e=R();this._controllable.setter(e(s=>{this._selectable.setState(s)})),this._selectable.onChange(e(()=>{this._controllable.dispatch()})),y(t,"click",()=>{this.hasAttribute("keep-open")||this.dispatchEvent(new CustomEvent("lofi-close-popovers",{bubbles:!0})),t._selectable.press()}),Ps(t)}},Ds=class extends D{boot(){this._disabled=this.hasAttribute("disabled"),this._disableable=new O(this);let t=this;this._disabled&&(c(t,"disabled",""),c(t,"aria-disabled","true")),U(t,"menu-radio"),c(t,"role","menuitemradio"),!this._disabled&&(t._focusable=new V(t,{disableable:this._disableable,hover:!0,tabbableAttr:"data-active"}),t._selectable=new L(t,{toggleable:!1,value:this.hasAttribute("value")?this.getAttribute("value"):t.textContent.trim(),label:this.hasAttribute("label")?this.getAttribute("label"):t.textContent.trim(),dataAttr:"data-checked",ariaAttr:"aria-checked",selectedInitially:this.hasAttribute("checked")}),y(t,"click",()=>{this.hasAttribute("keep-open")||this.dispatchEvent(new CustomEvent("lofi-close-popovers",{bubbles:!0})),t._selectable.press()}),Ps(t))}},Ts=class extends D{boot(){this._selectable=new X(this),this._controllable=new W(this),c(this,"role","group"),this._controllable.initial(e=>e&&this._selectable.setState(e)),this._controllable.getter(()=>this._selectable.getState());let t=R();this._controllable.setter(t(e=>{this._selectable.setState(e)})),this._selectable.onChange(t(()=>{this._controllable.dispatch()})),y(this,"lofi-close-popovers",e=>{this.hasAttribute("keep-open")&&(e.preventDefault(),e.stopPropagation())})}},Ms=class extends D{boot(){this._selectable=new X(this,{multiple:!0}),this._controllable=new W(this),c(this,"role","group"),this._controllable.initial(e=>e&&this._selectable.setState(e)),this._controllable.getter(()=>this._selectable.getState());let t=R();this._controllable.setter(t(e=>{this._selectable.setState(e)})),this._selectable.onChange(t(()=>{this._controllable.dispatch()}))}};P(({css:i})=>i`ui-menu[popover]:popover-open { display: block; }`);P(({css:i})=>i`ui-menu[popover].\:popover-open { display: block; }`);P(({css:i})=>i`ui-menu-checkbox, ui-menu-radio { cursor: default; display: contents; }`);C("menu",Ve);C("submenu",ks);C("menu-checkbox",Cs);C("menu-radio",Ds);C("menu-radio-group",Ts);C("menu-checkbox-group",Ms);function Ps(i){y(i,"keydown",t=>{t.key==="Enter"&&(i.click(),t.preventDefault(),t.stopPropagation())}),y(i,"keydown",t=>{t.key===" "&&(t.preventDefault(),t.stopPropagation())}),y(i,"keyup",t=>{t.key===" "&&(i.click(),t.preventDefault(),t.stopPropagation())})}function Lo(i){i._disableable=new O(i),i._disabled=i.hasAttribute("disabled");let t=i.querySelector("a"),e=i,s=i.parentElement.matches("ui-submenu")&&i.parentElement.querySelector("ui-menu[popover]"),a=t||e;if(i._disabled&&(c(a,"disabled",""),c(a,"aria-disabled","true")),U(a,"menu-item"),c(a,"role","menuitem"),!i._disabled)if(a._focusable=new V(a,{disableable:i._disableable,hover:!0,tabbableAttr:"data-active"}),!s)i.hasAttribute("disabled")||y(i,"click",()=>{i.hasAttribute("keep-open")||i.dispatchEvent(new CustomEvent("lofi-close-popovers",{bubbles:!0}))}),Ps(e);else{s._popoverable=new G(s,{triggers:[e]}),s._anchorable=new H(s,{reference:e,position:s.hasAttribute("position")?s.getAttribute("position"):xe()?"left start":"right start",gap:s.hasAttribute("gap")?s.getAttribute("gap"):"-5",crossAxis:!0}),e.addEventListener("click",o=>{s._popoverable.setState(!0)});let{clear:r}=Qt(e,s,{gain(){s._popoverable.setState(!0)},lose(){s._popoverable.setState(!1)},focusable:!1,useSafeArea:!0});s._popoverable.onChange(()=>{s._popoverable.getState()||(r(),s._focusable.wipeTabbables()),s._popoverable.getState()?s._anchorable.reposition():s._anchorable.cleanup()}),y(e,"keydown",o=>{o.key==="Enter"&&(s._popoverable.setState(!0),setTimeout(()=>s._focusable.focusFirst()))}),y(e,"keydown",o=>{o.key==="ArrowRight"&&(s._popoverable.setState(!0),setTimeout(()=>s._focusable.focusFirst()))}),y(s,"keydown",o=>{o.key==="ArrowLeft"&&(s._popoverable.setState(!1),e.focus(),o.stopPropagation())})}}var Os=class i extends D{mount(){this._focusable=new gt(this,{wrap:!0}),this._disableable=new O(this);let t=[];this._disableable.onInitAndChange(e=>{e?(c(this,"aria-disabled","true"),this.walker().each(s=>{s.hasAttribute("disabled")||(c(s,"disabled","true"),c(s,"aria-disabled","true"),t.push(()=>{nt(s,"disabled"),nt(s,"aria-disabled")}))})):(nt(this,"aria-disabled"),t.forEach(s=>s()),t=[])}),y(this,"keydown",e=>{["ArrowRight"].includes(e.key)?(e.target===this?this._focusable.focusFirst():this._focusable.focusNext(),e.preventDefault(),e.stopPropagation()):["ArrowLeft"].includes(e.key)&&(e.target===this?this._focusable.focusFirst():this._focusable.focusPrev(),e.preventDefault(),e.stopPropagation())}),c(this,"role","toolbar"),this.initializeToolbarItems()}initializeToolbarItems(){this.walker().each(t=>{t._disableable||Io(t)})}walker(){return q(this,(t,{skip:e,reject:s})=>{if(t instanceof i||t.hasAttribute("popover")||t instanceof Ve||t instanceof Le)return s();if(!["a","button"].includes(t.localName))return e()})}};C("toolbar",Os);function Io(i){i._disableable=new O(i),i._disabled=i.hasAttribute("disabled");let s=i.querySelector("a")||i;i._disabled&&(c(s,"disabled",""),c(s,"aria-disabled","true")),!i._disabled&&(s._focusable=new V(s,{disableable:i._disableable}))}var Ls=class extends D{boot(){let t=this.hasAttribute("label")?"label":"description",e=this.button(),s=this.overlay();if(e){if(!s)return}else return console.warn("ui-tooltip: no trigger element found",this);s._popoverable=new G(s,{scope:"tooltip"}),s._anchorable=new H(s,{reference:e,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),s._popoverable.onChange(()=>{s._popoverable.getState()?s._anchorable.reposition():s._anchorable.cleanup()}),this._disableable=new O(this);let a;this._disableable.onInitAndChange(n=>{a&&(a(),a=null),n||(a=Qt(e,s,{gain(){s._popoverable.setState(!0)},lose(){s._popoverable.setState(!1)},focusable:!0,useSafeArea:!1}).remove)});let r=U(s,"tooltip"),o=this.hasAttribute("interactive"),l=this.hasAttribute("label")||e.textContent.trim()==="";o?(c(e,"aria-controls",r),c(e,"aria-expanded","false"),s._popoverable.onChange(()=>{s._popoverable.getState()?c(e,"aria-expanded","true"):c(e,"aria-expanded","false")})):(l?c(e,"aria-labelledby",r):c(e,"aria-describedby",r),c(s,"aria-hidden","true")),c(s,"role","tooltip")}button(){return this.firstElementChild}overlay(){return this.lastElementChild!==this.button()&&this.lastElementChild.tagName!=="TEMPLATE"&&this.lastElementChild}};C("tooltip",Ls);var F={STATE_CHANGED:"stateChanged",DESKTOP_COLLAPSED:"desktopCollapsed",DESKTOP_EXPANDED:"desktopExpanded",MOBILE_COLLAPSED:"mobileCollapsed",MOBILE_EXPANDED:"mobileExpanded",VIEWPORT_ENTER_MOBILE:"viewportEnterMobile",VIEWPORT_ENTER_DESKTOP:"viewportEnterDesktop"},Is=class extends D{boot(){if(this.config={breakpoint:this.hasAttribute("breakpoint")?this.getAttribute("breakpoint"):1024,collapsible:!1,persist:this.hasAttribute("persist")?!["false","none"].includes(this.getAttribute("persist")):!0,sticky:!!this.hasAttribute("sticky")},this.observable=new Zt,this.state={active:!1,viewportDesktop:!0,viewportMobile:!1,collapsedMobile:!0,collapsedDesktop:!1},this.config.sticky&&this.setStickyPositionStyles(),this.hasAttribute("collapsible")){let t=this.getAttribute("collapsible");t==="true"?this.config.collapsible=!0:t==="false"?this.config.collapsible=!1:t==="mobile"&&(this.config.collapsible="mobile")}this.config.persist&&this.config.collapsible&&(this.state.collapsedDesktop=JSON.parse(localStorage.getItem("flux-sidebar-collapsed-desktop"))),this.removeAttribute("data-flux-sidebar-cloak"),this.observable.subscribe(F.VIEWPORT_ENTER_DESKTOP,()=>{this.state.viewportDesktop=!0,this.state.viewportMobile=!1,this.observable.notify(F.STATE_CHANGED)}),this.observable.subscribe(F.VIEWPORT_ENTER_MOBILE,()=>{this.state.viewportDesktop=!1,this.state.viewportMobile=!0,this.observable.notify(F.STATE_CHANGED)}),this.observable.subscribe(F.DESKTOP_COLLAPSED,()=>{this.state.collapsedDesktop=!0,this.observable.notify(F.STATE_CHANGED)}),this.observable.subscribe(F.DESKTOP_EXPANDED,()=>{this.state.collapsedDesktop=!1,this.observable.notify(F.STATE_CHANGED)}),this.observable.subscribe(F.MOBILE_COLLAPSED,()=>{this.state.collapsedMobile=!0,this.observable.notify(F.STATE_CHANGED)}),this.observable.subscribe(F.MOBILE_EXPANDED,()=>{this.state.collapsedMobile=!1,this.observable.notify(F.STATE_CHANGED)}),this.observable.subscribe(F.STATE_CHANGED,()=>{this.config.persist&&localStorage.setItem("flux-sidebar-collapsed-desktop",JSON.stringify(this.state.collapsedDesktop)),this.updateDataAttributes(this)}),new Ns(this.observable,this.config),document.addEventListener("flux-sidebar-toggle",()=>{this.state.viewportDesktop?this.state.collapsedDesktop?this.observable.notify(F.DESKTOP_EXPANDED):this.observable.notify(F.DESKTOP_COLLAPSED):this.state.collapsedMobile?this.observable.notify(F.MOBILE_EXPANDED):this.observable.notify(F.MOBILE_COLLAPSED)}),this.addEventListener("click",t=>{t.target===this&&this.state.collapsedDesktop&&this.observable.notify(F.DESKTOP_EXPANDED)}),this.addEventListener("mouseenter",t=>{this.state.active=!0,this.observable.notify(F.STATE_CHANGED)}),this.addEventListener("mouseleave",t=>{this.state.active=!1,this.observable.notify(F.STATE_CHANGED)}),this.addEventListener("focusin",t=>{this.state.active=!0,this.observable.notify(F.STATE_CHANGED)}),this.addEventListener("focusout",t=>{this.state.active=!1,this.observable.notify(F.STATE_CHANGED)})}setStickyPositionStyles(){let t=this.offsetTop;this.style.position="sticky",this.style.top=t+"px",this.style.maxHeight=`calc(100dvh - ${t}px)`}updateDataAttributes(t){let e=this.config.collapsible===!0;e&&(this.state.active?c(t,"data-flux-sidebar-active",""):nt(t,"data-flux-sidebar-active")),this.state.viewportDesktop?(nt(t,"data-flux-sidebar-on-mobile"),c(t,"data-flux-sidebar-on-desktop",""),nt(t,"data-flux-sidebar-collapsed-mobile"),this.state.collapsedDesktop?e&&c(t,"data-flux-sidebar-collapsed-desktop",""):nt(t,"data-flux-sidebar-collapsed-desktop")):(nt(t,"data-flux-sidebar-on-desktop"),c(t,"data-flux-sidebar-on-mobile",""),nt(t,"data-flux-sidebar-collapsed-desktop"),this.state.collapsedMobile?c(t,"data-flux-sidebar-collapsed-mobile",""):nt(t,"data-flux-sidebar-collapsed-mobile"))}},Ns=class{constructor(t,{breakpoint:e}){this.observable=t,this.breakpoint=e,this.watchForViewportChanges()}watchForViewportChanges(){let t=typeof this.breakpoint=="number"?`${this.breakpoint}px`:this.breakpoint,e=matchMedia(`(min-width: ${t})`);e.matches?this.observable.notify(F.VIEWPORT_ENTER_DESKTOP):this.observable.notify(F.VIEWPORT_ENTER_MOBILE),e.addEventListener("change",()=>{e.matches?this.observable.notify(F.VIEWPORT_ENTER_DESKTOP):this.observable.notify(F.VIEWPORT_ENTER_MOBILE)})}},Fs=class extends D{mount(){let t=this.querySelector("button");y(t||this,"click",()=>{this.dispatchEvent(new CustomEvent("flux-sidebar-toggle",{bubbles:!0}))}),queueMicrotask(()=>{let e=document.querySelector("ui-sidebar");e.updateDataAttributes(this),e.observable.subscribe(F.STATE_CHANGED,()=>{e.updateDataAttributes(this)})})}};C("sidebar",Is);C("sidebar-toggle",Fs);var Rs=class extends B{boot(){let t=this;this._disableable=new O(this),this._selectable=new L(t,{toggleable:!0,dataAttr:"data-checked",ariaAttr:"aria-checked",value:this.hasAttribute("value")?this.getAttribute("value"):null,label:this.hasAttribute("label")?this.getAttribute("label"):null,selectedInitially:this.hasAttribute("checked")}),this._submittable=new it(this,{name:this.getAttribute("name"),value:this.getAttribute("value")??"on",includeWhenEmpty:!1,shouldUpdateValue:!1}),this.value=this._selectable.getValue(),this._detangled=R(),this._selectable.onChange(this._detangled(()=>{this.dispatchEvent(new Event("input",{bubbles:!1,cancelable:!0})),this.dispatchEvent(new Event("change",{bubbles:!1,cancelable:!0}))})),c(t,"role","switch"),this._selectable.onInitAndChange(()=>{this._submittable.update(this._selectable.getState())}),this._disableable.onInitAndChange(e=>{e?A(t,"tabindex","0"):c(t,"tabindex","0")}),y(t,"click",this._disableable.disabled(e=>{e.preventDefault(),e.stopPropagation()}),{capture:!0}),y(t,"click",this._disableable.enabled(e=>{this._selectable.press()})),y(t,"keydown",this._disableable.enabled(e=>{e.key==="Enter"&&(this._selectable.press(),e.preventDefault(),e.stopPropagation())})),y(t,"keydown",this._disableable.enabled(e=>{e.key===" "&&(e.preventDefault(),e.stopPropagation())})),y(t,"keyup",this._disableable.enabled(e=>{e.key===" "&&(this._selectable.press(),e.preventDefault(),e.stopPropagation())})),No(t)}get checked(){return this._selectable.isSelected()}set checked(t){this._detangled(()=>{t?this._selectable.select():this._selectable.deselect()})()}};function No(i){i.closest("label")?.addEventListener("click",t=>{i.contains(t.target)||i.click()})}P(({css:i})=>i`ui-switch { display: inline-block; user-select: none; }`);C("switch",Rs);var Ws=class i extends D{mount(){this.control=this.fieldWalker().find(t=>this.isControl(t)),this.control}associateLabelWithControl(t){t&&this.label&&(this.control=t,!this.control.hasAttribute("aria-labelledby")&&(c(this.elOrButton(this.control),"aria-labelledby",this.label.id),this.control&&!(this.control instanceof B)&&this.hasAttribute("disabled")&&this.control.setAttribute("disabled","")))}associateDescriptionWithControl(t){t&&this.description&&(this.control=t,!this.control.hasAttribute("aria-describedby")&&c(this.elOrButton(this.control),"aria-describedby",this.description.id))}associateLabel(t){this.label=t,y(t,"click",e=>{["a","button"].includes(e.target.localName)||this.focusOrTogggle(this.control)}),this.control&&this.associateLabelWithControl(this.control)}associateDescription(t){this.description=t,this.control&&this.associateDescriptionWithControl(this.control)}fieldWalker(){return q(this,(t,{skip:e,reject:s})=>{if(t instanceof i&&t!==this||t.parentElement.localName==="ui-editor"&&t!==this)return s()})}isControl(t){return!!(t instanceof B||t.matches("input, textarea, select"))}focusOrTogggle(t){if(!t||t.disabled||t.hasAttribute("disabled"))return;t.localName==="input"&&["checkbox","radio"].includes(t.type)||["ui-switch","ui-radio","ui-checkbox"].includes(t.localName)?(t.click(),t.focus()):t.localName==="input"&&["file"].includes(t.type)?t.click():["ui-select","ui-date-picker"].includes(t.localName)?t.trigger()?.focus():(["ui-editor"].includes(t.localName),t.focus())}elOrButton(t){return t instanceof D&&t.firstElementChild instanceof HTMLButtonElement?t.firstElementChild:t}},qs=class extends D{mount(){U(this,"label"),c(this,"aria-hidden","true"),this.closest("ui-field")?.associateLabel(this)}},Us=class extends D{mount(){U(this,"description"),c(this,"aria-hidden","true"),this.closest("ui-field")?.associateDescription(this)}};P(({css:i})=>i`
    ui-label { display: inline-block; cursor: default; }
    ui-description { display: block; }
`);C("field",Ws);C("label",qs);C("description",Us);function ar(i){let t={time:Vo,linear:Ro,categorical:Fo},e=Date.now(),s=Date.now(),a={},r=(l,n,u)=>{let h=`${l}-${n}`;for(let p in a)p.startsWith(`${l}-`)&&!p.endsWith(String(n))&&delete a[p];return a[h]||(a[h]=u()),a[h]},o={data:[],width:i.width,height:i.height,inset:i.inset,axes:{x:{axis:"x",key:i.axes.x.key,format:i.axes.x.format,inset:{start:0,end:0},position:i.axes.x.position||"bottom",tickStart:i.axes.x.tickStart,tickEnd:i.axes.x.tickEnd,tickCount:i.axes.x.tickCount,tickStep:i.axes.x.tickStep,tickValues:i.axes.x.tickValues,tickSuffix:i.axes.x.tickSuffix,tickPrefix:i.axes.x.tickPrefix,get rawValues(){return r("x.rawValues",e,()=>o.data.map(l=>l[this.key]))},get type(){return r("x.type",e,()=>i.axes.x.scale||(this.rawValues.every(l=>qo(l))?"time":"categorical"))},get interval(){return r("x.interval",e,()=>i.axes.x.interval||"auto")},get values(){return r("x.values",e,()=>this.rawValues.map(l=>this.type==="time"?_i(l):this.type==="linear"?Number(l):l))},get ticks(){return r("x.ticks",e,()=>{let l=tr(o.data,this,Si(this.type,this.values)),n=er(l,this.type,this.format,this.tickSuffix,this.tickPrefix,this.interval);return l.map((u,h)=>({value:u,label:n[h]}))})},get domain(){return r("x.domain",e,()=>Si(this.type,[...this.ticks.map(l=>l.value),...this.values]))},get range(){return r("x.range",s,()=>[o.inset.left+this.inset.start,o.width-o.inset.right-this.inset.end])},get scale(){return r("x.scale",s+e,()=>t[this.type](this.domain,this.range,this.values))}},y:{axis:"y",keys:i.axes.y.keys,format:i.axes.y.format,inset:{start:0,end:0},position:i.axes.y.position||"left",tickStart:i.axes.y.tickStart,tickEnd:i.axes.y.tickEnd,tickCount:i.axes.y.tickCount,tickStep:i.axes.y.tickStep,tickValues:i.axes.y.tickValues,tickSuffix:i.axes.y.tickSuffix,tickPrefix:i.axes.y.tickPrefix,get values(){return r("y.values",e,()=>o.data.flatMap(l=>this.keys.reduce((n,u)=>(l[u]===void 0||n.push(l[u]),n),[])))},get type(){return r("y.type",e,()=>i.axes.y.scale||"linear")},get interval(){return r("y.interval",e,()=>i.axes.y.interval||"auto")},get ticks(){return r("y.ticks",e,()=>{let l=tr(o.data,this,Si(this.type,this.values)),n=er(l,this.type,this.format,this.tickSuffix,this.tickPrefix,this.interval);return l.map((u,h)=>({value:u,label:n[h]}))})},get domain(){return r("y.domain",e,()=>Si(this.type,[...this.ticks.map(l=>l.value),...this.values]))},get range(){return r("y.range",s,()=>[o.height-o.inset.bottom-this.inset.end,o.inset.top+this.inset.start])},get scale(){return r("y.scale",s+e,()=>t[this.type](this.domain,this.range,this.values))}}},get series(){return r("series",e+s,()=>this.axes.y.keys.reduce((l,n)=>{if(!o.data[0].hasOwnProperty(n))return console.warn(`ui-chart: series field "${n}" does not exist`),l;let u=o.data.map(p=>({x:o.axes.x.scale(p[o.axes.x.key]),y:o.axes.y.scale(p[n]),datum:p})),h={field:n,values:o.data.map(p=>p[n]),linePath(p="smooth"){let g=this.points.map(v=>[v.x,v.y]);return{smooth:ir,none:sr}[p](g)},areaPath(p="smooth"){return`${{smooth:ir,none:sr}[p](this.points.map(b=>[b.x,b.y]))} L${o.axes.x.scale(o.axes.x.domain[1])},${o.axes.y.scale(o.axes.y.domain[0])} L${o.axes.x.scale(o.axes.x.domain[0])},${o.axes.y.scale(o.axes.y.domain[0])} Z`},points:u};return l[n]=h,l},{}))},closestXPoint(l){return this.closestXPoints(l)[0]},closestXPoints(l){return r("closestXPoints",e+s+l,()=>{let n=[],u=1/0;return Object.values(this.series).forEach(h=>{let p=null;h.points.forEach(g=>{let v=Math.abs(g.x-l);v<u&&(u=v,p=g)}),p&&n.push(p)}),n})},updateDimensions(l,n){this.width=l.width,this.height=l.height,this.inset=n,s=Date.now()},updateData(l){let n=JSON.parse(JSON.stringify(l));n[0]!==void 0&&typeof n[0]!="object"&&(n=n.map((u,h)=>({value:u}))),n.every(u=>u.index)||n.forEach((u,h)=>{u.index=h}),this.data=n,e=Date.now()}};return o.updateData(i.data),o}function Si(i,t){let e=[...new Set(t)];return i==="time"?Uo(e):i==="linear"?(e.sort((s,a)=>Number(s)-Number(a)),e.length===1?e[0]===0?[Number(e[0]),1]:e[0]>0?[0,Number(e[0])]:[Number(e[0]),0]:[Number(e[0]),Number(e[e.length-1])]):[e[0],e[e.length-1]]}function tr(i,t,e){let s=[];if(t.type==="linear"){if(t.tickValues)return t.tickValues;let[a,r]=e,o=t.tickCount?Number(t.tickCount):5,l=t.tickStart===0||t.tickStart==="0"?0:t.tickStart||"auto",n=t.tickEnd===0||t.tickEnd==="0"?0:t.tickEnd||"auto";l==="auto"&&a>0&&r>0&&(a=0),n!=="auto"&&n!=="max"&&!isNaN(Number(n))&&(r=Number(n));let u=Number(t.interval),h;if(t.interval==="auto"||Number.isNaN(u)){let b=(r-a)/(o-1),d=Math.pow(10,Math.floor(Math.log10(b))),_=b/d;_<1.5?h=1:_<3?h=2:_<7?h=5:h=10,h*=d}else h=u;let p;l==="auto"?p=Math.floor(a/h)*h:l==="min"?p=a:p=Number(l);let g=p;for(;g<=r+h*.1;)g>=a-h*.1&&s.push(g),g+=h;if(n==="max")Math.abs(s[s.length-1]-e[1])>h*.1&&s.push(e[1]);else if(n!=="auto"&&!isNaN(Number(n))){let v=Number(n),b=s.length;s=Array.from({length:b},(d,_)=>p+(v-p)*(_/(b-1)))}if(s.length>o*2){let v=Math.ceil(s.length/o);s=s.filter((b,d)=>d%v===0)}}else if(t.type==="time"){let[a,r]=rr(e[0],e[1],t.tickCount,t.interval);return r}else if(t.type==="categorical"&&(i.forEach(a=>{let r=a[t.key];s.push(r)}),t.tickCount&&s.length>t.tickCount)){let a=Math.ceil(s.length/t.tickCount);s=s.filter((r,o)=>o%a===0)}return s}function er(i,t,e,s,a,r){let o=[];return t==="time"?(e||([e]=rr(i[0],i[i.length-1],null,r)),e={...e,timeZone:"UTC"},o=i.map(l=>new Date(l).toLocaleString(ft(),e))):t==="linear"?e?o=i.map(l=>l.toLocaleString(ft(),e)):o=i.map(l=>l.toLocaleString(ft())):o=i.map(l=>l+""),a&&(o=o.map(l=>a+l)),s&&(o=o.map(l=>l+s)),o}function Fo(i,t,e){let s=[...new Set(e)],a=(t[1]-t[0])/(s.length-1),r=new Map(s.map((o,l)=>[o,t[0]+l*a]));return function(o){if(o!=null)return r.get(o)}}function Ro(i,t){let e=i[1]-i[0],s=t[1]-t[0];return function(a){return t[0]+(a-i[0])*(s/e)}}function ir(i){if(i.length<2)return"";let t=n=>n<0?-1:1,e=(n,u,h,p,g,v)=>{let b=h-n,d=g-h,_=(p-u)/(b||d<0&&-0),w=(v-p)/(d||b<0&&-0),f=(_*d+w*b)/(b+d);return(t(_)+t(w))*Math.min(Math.abs(_),Math.abs(w),.5*Math.abs(f))||0},s=(n,u,h,p,g)=>{let v=h-n;return v?(3*(p-u)/v-g)/2:g},a=`M${i[0][0]},${i[0][1]}`;if(i.length===2)return a+`L${i[1][0]},${i[1][1]}`;for(let n=0;n<i.length-2;n++){let u=i[n],h=i[n+1];if(u[0]===h[0]&&u[1]===h[1])continue;let p=i[n+2],g=e(u[0],u[1],h[0],h[1],p[0],p[1]),v=(h[0]-u[0])/3,b=u[0]+v,d=u[1]+v*(n===0?s(u[0],u[1],h[0],h[1],g):i[n-1]?e(i[n-1][0],i[n-1][1],u[0],u[1],h[0],h[1]):g),_=h[0]-v,w=h[1]-v*g;a+=`C${b},${d} ${_},${w} ${h[0]},${h[1]}`}let r=i.length,o=i[r-1],l=i[r-2];if(!(o[0]===l[0]&&o[1]===l[1])){let n=e(i[r-3][0],i[r-3][1],l[0],l[1],o[0],o[1]),u=(o[0]-l[0])/3,h=l[0]+u,p=l[1]+u*n,g=o[0]-u,v=o[1]-u*s(l[0],l[1],o[0],o[1],n);a+=`C${h},${p} ${g},${v} ${o[0]},${o[1]}`}return a}function Wo(i,t=.05){if(!i||i.length<2)return"";let e=`M ${i[0][0]} ${i[0][1]}`;for(let s=1;s<i.length;s++){let a=i[s],r=i[s-1],o=i[s-2]||r,l=i[s+1]||a,n=r[0]+(l[0]-o[0])*t,u=r[1]+(l[1]-o[1])*t,h=a[0]-(l[0]-o[0])*t,p=a[1]-(l[1]-o[1])*t;e+=` C ${n} ${u}, ${h} ${p}, ${a[0]} ${a[1]}`}return e}function sr(i){return Wo(i,0)}function qo(i){return i instanceof Date||typeof i=="string"&&i.includes("-")&&!isNaN(Date.parse(i))}function Uo(i){return i.sort((t,e)=>typeof t=="string"?t.localeCompare(e):t-e),[_i(i[0]),_i(i[i.length-1])]}function Vo(i,t){let e=new Date(i[0]).getTime(),a=new Date(i[1]).getTime()-e,r=t[1]-t[0];return function(o){if(!o)return;let l=_i(o);if(isNaN(l.getTime()))return;let n=(l.getTime()-e)/a;return t[0]+n*r}}function rr(i,t,e,s){let a=i,r=t,n=(r-a)/1e3/60,u=n/60,h=u/24,p=h/30,g=h/365,v,b,d;switch(s){case"second":v={hour:"numeric",minute:"numeric",second:"numeric"},b=f=>new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate(),f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds()+1)),d=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds()));break;case"minute":v={hour:"numeric",minute:"numeric"},b=f=>new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate(),f.getUTCHours(),f.getUTCMinutes()+1)),d=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes()));break;case"hour":v={hour:"numeric",minute:"numeric"},b=f=>new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate(),f.getUTCHours()+1)),d=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours()));break;case"day":v={day:"numeric"},b=f=>new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()+1)),d=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()));break;case"week":v={day:"numeric",month:"short"},b=f=>new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()+7)),d=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()));break;case"month":v={month:"short",day:"numeric"},b=f=>new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth()+1,1)),d=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),1));break;case"year":v={year:"numeric"},b=f=>new Date(Date.UTC(f.getUTCFullYear()+1,0,1)),d=new Date(Date.UTC(a.getUTCFullYear(),0,1));break;default:}if(!b)if(u<1){v={hour:"numeric",minute:"numeric"};let f=e?Math.max(1,Math.floor(n/(e-1))):1;b=x=>new Date(Date.UTC(x.getUTCFullYear(),x.getUTCMonth(),x.getUTCDate(),x.getUTCHours(),x.getUTCMinutes()+f)),d=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours()))}else if(h<1){v={hour:"numeric"};let f=e?Math.max(1,Math.floor(u/(e-1))):1;b=x=>new Date(Date.UTC(x.getUTCFullYear(),x.getUTCMonth(),x.getUTCDate(),x.getUTCHours()+f)),d=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),0))}else if(h<=7){v={weekday:"short",hour:"numeric"};let f=e?Math.max(1,Math.floor(u/(e-1))):6;b=x=>new Date(Date.UTC(x.getUTCFullYear(),x.getUTCMonth(),x.getUTCDate(),x.getUTCHours()+f)),d=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),0))}else if(h<=30){v={month:"short",day:"numeric"};let f=e?Math.max(1,Math.floor(h/(e-1))):1;b=x=>new Date(Date.UTC(x.getUTCFullYear(),x.getUTCMonth(),x.getUTCDate()+f)),d=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()))}else if(p<=6){v={month:"short",day:"numeric"};let f=e?Math.max(1,Math.floor(h/(e-1))):7;b=x=>new Date(Date.UTC(x.getUTCFullYear(),x.getUTCMonth(),x.getUTCDate()+f)),d=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()))}else if(g<2){v={month:"short"};let f=e?Math.max(1,Math.floor(p/(e-1))):1;b=x=>new Date(Date.UTC(x.getUTCFullYear(),x.getUTCMonth()+f,1)),d=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth()))}else{v={year:"numeric"};let f=e?Math.max(1,Math.floor(g/(e-1))):1;b=x=>new Date(Date.UTC(x.getUTCFullYear()+f,0,1)),d=new Date(Date.UTC(a.getUTCFullYear(),0,1))}let _=[a],w=a;for(;w<=r;)w=b(w),w<=r&&_.push(new Date(w.getTime()));return[v,_]}function _i(i){if(i instanceof Date)return i;let{year:t,month:e,day:s,hour:a,minute:r,second:o,millisecond:l}=Bo(i);return new Date(Date.UTC(t,e-1,s,a,r,o,l))}function Bo(i){let t=i.match(/^(\d{4})(?:-(\d{2}))?(?:-(\d{2}))?(?:T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(Z)?)?$/);if(!t)throw new Error("Invalid date format");return{year:t[1]?parseInt(t[1],10):null,month:t[2]?parseInt(t[2],10):null,day:t[3]?parseInt(t[3],10):null,hour:t[4]?parseInt(t[4],10):null,minute:t[5]?parseInt(t[5],10):null,second:t[6]?parseInt(t[6],10):null,millisecond:t[7]?parseInt(t[7].padEnd(3,"0"),10):null,utc:!!t[8]}}var Vs=class extends HTMLElement{constructor(){super(),this.querySelectorAll("[data-appended]").forEach(s=>s.remove());let t=this.querySelector('template[name="svg"]'),e=ri(t);t.after(e),this.init(t,e)}init(t,e){this._data=this.hasAttribute("value")?JSON.parse(this.getAttribute("value")):[],this._observable=new Zt,this._selectable={getState:()=>this._data,setState:w=>{this._data=w,this._observable.notify("data",this._data)}},this._controllable=new W(this),this._controllable.initial(w=>w&&this._selectable.setState(w)),this._controllable.getter(()=>this._selectable.getState()),this._controllable.setter(w=>{this._selectable.setState(w)});let s={svg:t,lines:{},areas:{},points:{},cursor:t.content.querySelector('template[name="cursor"]'),zeroLine:t.content.querySelector('template[name="zero-line"]'),axes:{x:{template:t.content.querySelector('template[name="axis"][axis="x"]'),axisLine:t.content.querySelector('template[name="axis"][axis="x"] template[name="axis-line"]'),gridLine:t.content.querySelector('template[name="axis"][axis="x"] template[name="grid-line"]'),tickMark:t.content.querySelector('template[name="axis"][axis="x"] template[name="tick-mark"]'),tickLabel:t.content.querySelector('template[name="axis"][axis="x"] template[name="tick-label"]')},y:{template:t.content.querySelector('template[name="axis"][axis="y"]'),axisLine:t.content.querySelector('template[name="axis"][axis="y"] template[name="axis-line"]'),gridLine:t.content.querySelector('template[name="axis"][axis="y"] template[name="grid-line"]'),tickMark:t.content.querySelector('template[name="axis"][axis="y"] template[name="tick-mark"]'),tickLabel:t.content.querySelector('template[name="axis"][axis="y"] template[name="tick-label"]')}},tooltip:this.querySelector('template[name="tooltip"]'),summary:this.querySelector('template[name="summary"]')};t.content.querySelectorAll('template[name="line"]').forEach(w=>{s.lines[w.getAttribute("field")]=w}),t.content.querySelectorAll('template[name="area"]').forEach(w=>{s.areas[w.getAttribute("field")]=w}),t.content.querySelectorAll('template[name="point"]').forEach(w=>{s.points[w.getAttribute("field")]=w});let a=()=>{},r=()=>{},o=()=>{},l=()=>{},n=null,u=null,h=null,p=null;u=document.createElementNS("http://www.w3.org/2000/svg","rect"),u.setAttribute("data-overlay",""),u.setAttribute("fill","none"),u.setAttribute("pointer-events","all"),u.addEventListener("mousemove",Wi(function(w){a(w),r(w),o(w),l(w)},1)),u.addEventListener("mouseleave",()=>{a(null),r(null),o(null),l(null)}),e.appendChild(u),s.cursor&&(n=lt(s.cursor),n.setAttribute("data-cursor",""),e.appendChild(n)),s.tooltip&&(h=ri(s.tooltip),s.tooltip.after(h)),s.summary&&(p=ri(s.summary),s.summary.after(p));let g={left:8,right:8,top:8,bottom:8};if(s.svg?.hasAttribute("gutter")){let w=s.svg?.getAttribute("gutter").split(" ").map(f=>f.replace("px","")).map(Number);w.length===1?(g.top=w[0],g.right=w[0],g.bottom=w[0],g.left=w[0]):w.length===2?(g.top=w[0],g.right=w[1],g.bottom=w[0],g.left=w[1]):w.length===3?(g.top=w[0],g.right=w[1],g.bottom=w[2],g.left=w[1]):w.length===4&&(g.top=w[0],g.right=w[1],g.bottom=w[2],g.left=w[3])}let[v,b]=Ho(e),d=ar({data:this._data,width:e.parentElement.getBoundingClientRect().width,height:e.parentElement.getBoundingClientRect().height,inset:{left:0,right:0,top:0,bottom:0},axes:{x:{key:v,format:s.axes.x.template?.hasAttribute("format")?JSON.parse(s.axes.x.template?.getAttribute("format")):null,scale:s.axes.x.template?.getAttribute("scale"),interval:s.axes.x.template?.getAttribute("interval"),position:s.axes.x.template?.getAttribute("position"),tickCount:s.axes.x.template?.getAttribute("tick-count")||s.axes.x.tickLabel?.getAttribute("target-tick-count"),tickStart:s.axes.x.template?.getAttribute("tick-start"),tickEnd:s.axes.x.template?.getAttribute("tick-end"),tickStep:s.axes.x.template?.getAttribute("tick-step")?Number(s.axes.x.template?.getAttribute("tick-step")):null,tickSuffix:s.axes.x.template?.getAttribute("tick-suffix"),tickPrefix:s.axes.x.template?.getAttribute("tick-prefix"),tickValues:s.axes.x.template?.hasAttribute("tick-values")?JSON.parse(s.axes.x.template?.getAttribute("tick-values")):null},y:{keys:b,format:s.axes.y.template?.hasAttribute("format")?JSON.parse(s.axes.y.template?.getAttribute("format")):null,scale:s.axes.y.template?.getAttribute("scale"),interval:s.axes.y.template?.getAttribute("interval"),position:s.axes.y.template?.getAttribute("position"),tickCount:s.axes.y.template?.getAttribute("tick-count")||s.axes.y.tickLabel?.getAttribute("target-tick-count"),tickStart:s.axes.y.template?.getAttribute("tick-start"),tickEnd:s.axes.y.template?.getAttribute("tick-end"),tickStep:s.axes.y.template?.getAttribute("tick-step")?Number(s.axes.y.template?.getAttribute("tick-step")):null,tickSuffix:s.axes.y.template?.getAttribute("tick-suffix"),tickPrefix:s.axes.y.template?.getAttribute("tick-prefix"),tickValues:s.axes.y.template?.hasAttribute("tick-values")?JSON.parse(s.axes.y.template?.getAttribute("tick-values")):null}}}),_=(w=!0)=>{if(c(e,"viewBox",`0 0 ${d.width} ${d.height}`),d.data.length!==0){if(d.data.length===1){console.warn("ui-chart: chart only has one data point so it cannot be rendered.");return}if(d.data[0][d.axes.x.key]===void 0){console.warn(`ui-chart: axis field "${d.axes.x.key}" does not exist`);return}if(Object.entries(d.series).forEach(([f,x])=>{let S=e.querySelector(`[data-line][data-series="${f}"]`),E=s.lines[f];if(E){let k=E.getAttribute("curve")||"smooth";if(S)S.setAttribute("d",x.linePath(k));else{let T=lt(E);T.setAttribute("data-line",""),T.setAttribute("data-series",f),T.setAttribute("d",x.linePath(k)),e.appendChild(T)}}}),Object.entries(d.series).forEach(([f,x])=>{let S=e.querySelector(`[data-area][data-series="${f}"]`),E=s.areas[f];if(E){let k=E.getAttribute("curve")||"smooth";if(S)S.setAttribute("d",x.areaPath(k));else{let T=lt(E);T.setAttribute("data-area",""),T.setAttribute("data-series",f),T.setAttribute("d",x.areaPath(k)),e.appendChild(T)}}}),Object.entries(d.series).forEach(([f,x])=>{let S=e.querySelector(`[data-point-group][data-series="${f}"]`),E=s.points[f];E&&(e.querySelector(`[data-point-group][data-series="${f}"]`)?.remove(),S=document.createElementNS("http://www.w3.org/2000/svg","g"),S.setAttribute("data-point-group",""),S.setAttribute("data-series",f),x.points.forEach(k=>{let T=lt(E);T.setAttribute("data-point",""),T.setAttribute("data-series",f),T.setAttribute("cx",k.x),T.setAttribute("cy",k.y),S.appendChild(T)}),e.appendChild(S))}),l=f=>{e.querySelectorAll("[data-point-group]").forEach(x=>{if(x.querySelectorAll("[data-point]").forEach(S=>S.removeAttribute("data-active")),f){let S=f.clientX-e.getBoundingClientRect().left,E=f.clientY-e.getBoundingClientRect().top;S>=d.inset.left&&S<=d.width-d.inset.right&&E>=d.inset.top&&E<=d.height-d.inset.bottom&&d.closestXPoints(S).forEach(T=>{x.querySelectorAll(`[data-point][cx="${T.x}"]`).forEach(I=>I.setAttribute("data-active",""))})}else x.querySelectorAll("[data-point]").forEach(S=>S.removeAttribute("data-active"))})},s.axes.x.template){if(s.axes.x.axisLine){e.querySelector('[data-axis-line][data-axis="x"]')?.remove();let f=lt(s.axes.x.axisLine);f.setAttribute("data-axis-line",""),f.setAttribute("data-axis","x"),f.setAttribute("x1",d.axes.x.scale(d.axes.x.domain[0])),f.setAttribute("x2",d.axes.x.scale(d.axes.x.domain[1])),f.setAttribute("y1",d.axes.y.scale(d.axes.y.domain[d.axes.x.position==="bottom"?0:1])),f.setAttribute("y2",d.axes.y.scale(d.axes.y.domain[d.axes.x.position==="bottom"?0:1])),e.appendChild(f)}if(s.axes.x.gridLine){e.querySelector('[data-grid-line-group][data-axis="x"]')?.remove();let f=document.createElementNS("http://www.w3.org/2000/svg","g");f.setAttribute("data-grid-line-group",""),f.setAttribute("data-axis","x"),d.axes.x.ticks.forEach(({value:x})=>{let S=lt(s.axes.x.gridLine);S.setAttribute("data-grid-line",""),S.setAttribute("data-axis","x"),S.setAttribute("x1",d.axes.x.scale(x)),S.setAttribute("x2",d.axes.x.scale(x)),S.setAttribute("y1",d.inset.top),S.setAttribute("y2",d.height-d.inset.bottom),f.appendChild(S)}),e.appendChild(f)}if(s.axes.x.tickMark){e.querySelector('[data-tick-mark-group][data-axis="x"]')?.remove();let f=document.createElementNS("http://www.w3.org/2000/svg","g");f.setAttribute("data-tick-mark-group",""),f.setAttribute("data-axis","x"),d.axes.x.ticks.forEach(({value:x,label:S})=>{let E={x:d.axes.x.scale(x),y:d.axes.y.scale(d.axes.y.domain[d.axes.x.position==="bottom"?0:1])},k=lt(s.axes.x.tickMark);k.setAttribute("data-tick-mark",""),k.setAttribute("data-axis","x"),k.setAttribute("transform",`translate(${E.x}, ${E.y})`),f.appendChild(k)}),e.appendChild(f)}if(s.axes.x.tickLabel){e.querySelector('[data-tick-label-group][data-axis="x"]')?.remove();let f=document.createElementNS("http://www.w3.org/2000/svg","g");f.setAttribute("data-tick-label-group",""),f.setAttribute("data-axis","x"),d.axes.x.ticks.forEach(({value:x,label:S})=>{let E={x:d.axes.x.scale(x),y:d.axes.y.scale(d.axes.y.domain[d.axes.x.position==="bottom"?0:1])},k=lt(s.axes.x.tickLabel);k.querySelectorAll("slot").forEach(T=>T.replaceWith(document.createTextNode(S))),k.setAttribute("data-tick-label",""),k.setAttribute("data-axis","x"),k.setAttribute("transform",`translate(${E.x}, ${E.y})`),f.appendChild(k)}),e.appendChild(f),or(f,d.axes.x)}}if(s.axes.y.template){if(s.axes.y.axisLine){e.querySelector('[data-axis-line][data-axis="y"]')?.remove();let f=lt(s.axes.y.axisLine);f.setAttribute("data-axis-line",""),f.setAttribute("data-axis","y"),f.setAttribute("x1",d.axes.x.scale(d.axes.x.domain[d.axes.y.position==="left"?0:1])),f.setAttribute("x2",d.axes.x.scale(d.axes.x.domain[d.axes.y.position==="left"?0:1])),f.setAttribute("y1",d.axes.y.scale(d.axes.y.domain[0])),f.setAttribute("y2",d.axes.y.scale(d.axes.y.domain[1])),e.appendChild(f)}if(s.axes.y.gridLine){e.querySelector('[data-grid-line-group][data-axis="y"]')?.remove();let f=document.createElementNS("http://www.w3.org/2000/svg","g");f.setAttribute("data-grid-line-group",""),f.setAttribute("data-axis","y"),d.axes.y.ticks.forEach(({value:x,label:S})=>{let E={x:d.axes.x.scale(d.axes.x.domain[0]),y:d.axes.y.scale(x)},k=lt(s.axes.y.gridLine);k.setAttribute("data-grid-line",""),k.setAttribute("data-axis","y"),k.setAttribute("x1",d.inset.left),k.setAttribute("x2",d.width-d.inset.right),k.setAttribute("y1",E.y),k.setAttribute("y2",E.y),f.appendChild(k)}),e.appendChild(f)}if(s.axes.y.tickMark){e.querySelector('[data-tick-mark-group][data-axis="y"]')?.remove();let f=document.createElementNS("http://www.w3.org/2000/svg","g");f.setAttribute("data-tick-mark-group",""),f.setAttribute("data-axis","y"),d.axes.y.ticks.forEach(({value:x,label:S})=>{let E={x:d.axes.x.scale(d.axes.x.domain[d.axes.y.position==="left"?0:1]),y:d.axes.y.scale(x)},k=lt(s.axes.y.tickMark);k.setAttribute("data-tick-mark",""),k.setAttribute("data-axis","y"),k.setAttribute("transform",`translate(${E.x}, ${E.y})`),f.appendChild(k)}),e.appendChild(f)}if(s.axes.y.tickLabel){e.querySelector('[data-tick-label-group][data-axis="y"]')?.remove();let f=document.createElementNS("http://www.w3.org/2000/svg","g");f.setAttribute("data-tick-label-group",""),f.setAttribute("data-axis","y"),d.axes.y.ticks.forEach(({value:x,label:S})=>{let E={x:d.axes.x.scale(d.axes.x.domain[d.axes.y.position==="left"?0:1]),y:d.axes.y.scale(x)},k=lt(s.axes.y.tickLabel);k.querySelectorAll("slot").forEach(T=>T.replaceWith(document.createTextNode(S))),k.setAttribute("data-tick-label",""),k.setAttribute("data-axis","y"),k.setAttribute("transform",`translate(${E.x}, ${E.y})`),f.appendChild(k)}),e.appendChild(f),or(f,d.axes.y)}}if(s.zeroLine&&d.axes.y.domain[0]<0&&d.axes.y.domain[1]>0){e.querySelector('[data-zero-line][data-axis="y"]')?.remove();let f=lt(s.zeroLine);f.setAttribute("data-zero-line",""),f.setAttribute("data-axis","y"),f.setAttribute("x1",d.axes.x.scale(d.axes.x.domain[0])),f.setAttribute("x2",d.axes.x.scale(d.axes.x.domain[1])),f.setAttribute("y1",d.axes.y.scale(0)),f.setAttribute("y2",d.axes.y.scale(0)),e.appendChild(f)}if(u&&(u.setAttribute("width",d.width),u.setAttribute("height",d.height),u.setAttribute("x",0),u.setAttribute("y",0)),n&&(a=f=>{if(f){let x=f.clientX-e.getBoundingClientRect().left,S=f.clientY-e.getBoundingClientRect().top;if(x>=d.inset.left&&x<=d.width-d.inset.right&&S>=d.inset.top&&S<=d.height-d.inset.bottom){let E=d.closestXPoint(x);n.setAttribute("opacity","1"),n.setAttribute("x1",E.x),n.setAttribute("x2",E.x),n.setAttribute("y1",d.axes.y.scale(d.axes.y.domain[0])),n.setAttribute("y2",d.axes.y.scale(d.axes.y.domain[1]))}else n.setAttribute("opacity","0")}else n.setAttribute("opacity","0")}),h&&(r=f=>{if(f===null)A(h,"data-active");else{let x=f.clientX-e.getBoundingClientRect().left,S=f.clientY-e.getBoundingClientRect().top;if(x>=d.inset.left&&x<=d.width-d.inset.right&&S>=d.inset.top&&S<=d.height-d.inset.bottom){let E=d.closestXPoint(x);if(E){c(h,"data-active","");let k=h.getBoundingClientRect(),T=e.getBoundingClientRect(),I=T.width-(E.x+k.width+15),$=T.height-(S+k.height+15),K=I<0?E.x-k.width-15:E.x+15,ut=$<0?S-k.height-15:S+15;h.style.transform=`translate(${K}px, ${ut}px)`;let J=s.tooltip.content.cloneNode(!0).firstElementChild;J.querySelectorAll("slot").forEach(Z=>{let Q=Z.getAttribute("field");if(Q){let dt=Z.hasAttribute("format")?JSON.parse(Z.getAttribute("format")):null,z=E.datum[Q];if(dt===null)return Z.textContent=z;dt={...dt,timeZone:"UTC"},lr(z)?z=Number(z).toLocaleString(ft(),dt):ur(z)&&(z=new Date(z).toLocaleDateString(ft(),dt)),Z.textContent=z}}),h.innerHTML=J.innerHTML}else A(h,"data-active")}else A(h,"data-active")}}),p&&(o=f=>{let x=null;if(f!==null){let S=f.clientX-e.getBoundingClientRect().left,E=f.clientY-e.getBoundingClientRect().top;S>=d.inset.left&&S<=d.width-d.inset.right&&E>=d.inset.top&&E<=d.height-d.inset.bottom&&(x=d.closestXPoint(S))}if(x=x||d.closestXPoint(d.axes.x.range[1]),x){let S=s.summary.content.cloneNode(!0).firstElementChild;S.querySelectorAll("slot").forEach(E=>{let k=E.getAttribute("field");if(k){let T=E.hasAttribute("format")?JSON.parse(E.getAttribute("format")):{};T={...T,timeZone:"UTC"};let I=E.hasAttribute("fallback")&&f===null?E.getAttribute("fallback"):x.datum[k];lr(I)?I=Number(I).toLocaleString(ft(),T):ur(I)&&(I=new Date(I).toLocaleString(ft(),T)),E.textContent=I}}),p.innerHTML=S.innerHTML}},o(null)),e.appendChild(u),e.querySelectorAll("[data-grid-line-group]").forEach(f=>u.before(f)),e.querySelectorAll("[data-axis-line]").forEach(f=>u.before(f)),e.querySelectorAll("[data-zero-line]").forEach(f=>u.before(f)),e.querySelectorAll("[data-area]").forEach(f=>u.before(f)),e.querySelectorAll("[data-line]").forEach(f=>u.before(f)),e.querySelectorAll("[data-cursor]").forEach(f=>u.before(f)),e.querySelectorAll("[data-point-group]").forEach(f=>u.before(f)),w){let f=Go(e);d.updateDimensions({width:d.width,height:d.height},{left:g.left+f.left,right:g.right+f.right,top:g.top+f.top,bottom:g.bottom+f.bottom}),_(!1)}}};this._observable.subscribe("resize",()=>{d.updateDimensions({width:e.parentElement.getBoundingClientRect().width,height:e.parentElement.getBoundingClientRect().height},{left:0,right:0,top:0,bottom:0}),_()}),this._observable.subscribe("data",()=>{d.updateData(this._data),d.updateDimensions({width:d.width,height:d.height},{left:0,right:0,top:0,bottom:0}),_()}),new ResizeObserver(()=>{this._observable.notify("resize")}).observe(this),new MutationObserver(w=>{w.forEach(f=>{f.attributeName==="value"&&this._selectable.setState(this.hasAttribute("value")?JSON.parse(this.getAttribute("value")):[])})}).observe(this,{attributes:!0,attributeFilter:["value"]})}};customElements.define("ui-chart",Vs);function Ho(i){let t=null,e=[];return i.querySelectorAll('template[name="line"], template[name="area"], template[name="point"]').forEach(s=>{e.push(s.getAttribute("field")||"value")}),i.querySelectorAll('template[name="axis"][axis="x"]').forEach(s=>{t=s.getAttribute("field")||"index"}),e=Array.from(new Set(e)),t===null&&(t="index"),e.length===0&&(e=["value"]),[t,e]}function lt(i){let t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("version","1.1"),t.innerHTML=i.innerHTML,t.firstElementChild}function or(i,t){if(nr(i,t)){if(t.axis==="x"&&t.type==="categorical")Yo(i);else if(t.axis==="x"&&t.type==="time"){let e=$o(i);if(!nr(i,t))return;e(),zo(i)}}}function nr(i,t){let e=Array.from(i.children);e=e.filter(s=>s.style.display!="none");for(let s=0;s<e.length;s++){let a=e[s],r=e[s+1];if(!r)break;let o=a.getBoundingClientRect(),l=r.getBoundingClientRect(),n=20;if(t.axis==="y"){if(o.bottom+n<l.top)return!0}else if(o.right+n>l.left)return!0}return!1}function Yo(i){let t=[];return Array.from(i.children).forEach((e,s)=>{let a=e.matches("text")?e:e.querySelector("text");Array.from(i.children).forEach((r,o)=>{let l=r.matches("text")?r:r.querySelector("text");l&&(l.style.transform="rotate(-45deg)",l.style.textAnchor="end",t.push(()=>{l.style.transform=null,l.style.textAnchor=null}))})}),()=>t.forEach(e=>e())}function $o(i){let t=Array.from(i.children);return t.forEach((e,s)=>{s%2===1&&(e.style.display="none")}),()=>t.forEach((e,s)=>{e.style.display="inline"})}function zo(i){let t=Array.from(i.children);t.forEach((o,l)=>{o.style.display="none"});let e=t[0],s=t[t.length-1],a=e.matches("text")?e:e.querySelector("text"),r=s.matches("text")?s:s.querySelector("text");return e.style.display="inline",a.style.textAnchor="start",s.style.display="inline",r.style.textAnchor="end",()=>t.forEach((o,l)=>{o.style.display="inline"})}function lr(i){return typeof i=="number"||typeof i=="string"&&!isNaN(Number(i))}function ur(i){return i instanceof Date||typeof i=="string"&&!isNaN(Date.parse(i))}function Go(i){let t=i.getBoundingClientRect(),e={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return Array.from(i.children).forEach(s=>{if(s.hasAttribute("data-overlay")||s.style.display==="none")return;let a=s.getBoundingClientRect();!a.width&&!a.height||(e.top=Math.min(e.top,a.top),e.right=Math.max(e.right,a.right),e.bottom=Math.max(e.bottom,a.bottom),e.left=Math.min(e.left,a.left))}),{top:Math.max(0,t.top-e.top),right:Math.max(0,e.right-t.right),bottom:Math.max(0,e.bottom-t.bottom),left:Math.max(0,t.left-e.left)}}var Bs=class extends D{mount(){let t=this.querySelector("button");y(t,"click",()=>{ii(this,s=>!!s._closeable)?._closeable?.close()})}};C("close",Bs);var Hs=class extends D{toasts=[];initiallyExpanded=!1;expanded=!1;mount(){this.initiallyExpanded=this.hasAttribute("expanded");let t=this.getAttribute("position")||"bottom right";this.verticalPosition=t.match(/\b(top|bottom)\b/)?.[0]||"bottom",this.horizontalPosition=t.match(/\b(left|start|center|right|end)\b/)?.[0]||"right",this.horizontalPosition==="left"?this.horizontalPosition="start":this.horizontalPosition==="right"&&(this.horizontalPosition="end"),c(this,"role","status")}showToast(t={}){let e=this.querySelector("ui-toast");if(!e)return console.warn("ui-toast-group: no ui-toast element found",this);this.matches(":popover-open")||this.showPopover();let s=Number(t.duration===void 0?5e3:t.duration),a=e.prepareToastTemplate(t),r=a.firstElementChild,o={timeout:null,el:a,height:null,contentEl:r,contentHeight:null},l=()=>{this.animateIn(o),this.updateList()},n=()=>{this.animateOut(o),this.updateList()};this.toasts.unshift(o),this.appendChild(a),l(),a.hideToast=n;let u=s!==0&&qi(()=>{o.timeout=null,n()},s);u&&(o.timeout=u),a.destroyToast=()=>{o.timeout&&(o.timeout.cancel(),o.timeout=null);let h=this.toasts.indexOf(o);h>-1&&this.toasts.splice(h,1),a.remove(),this.updateList()},a.addEventListener("mouseenter",()=>{this.pauseTimeouts(),this.initiallyExpanded||(this.expanded=!0,this.updateList())}),a.addEventListener("mouseleave",()=>{this.resumeTimeouts(),this.initiallyExpanded||(this.expanded=!1,this.updateList())}),a._closeable=new At(a),a._closeable.onClose(()=>a.destroyToast())}pauseTimeouts(){for(let t of this.toasts)t.timeout?.pause()}resumeTimeouts(){for(let t of this.toasts)t.timeout?.resume()}animateIn(t){let a=1.5*((this.verticalPosition==="top"?"bottom":"top")==="top"?1:-1);t.contentEl.style.opacity=0,t.contentEl.style.transform=`translateY(${a}rem)`,t.el.style.zIndex=5001,t.contentEl.offsetHeight,t.contentHeight=t.contentEl.offsetHeight,t.height=t.el.offsetHeight,t.contentEl.style.opacity=100,t.contentEl.style.transform="translateY(0)"}animateOut(t){let s=.5*(this.verticalPosition==="top"?1:-1);t.contentEl.style.transform=`translateY(${s}rem)`,t.contentEl.style.opacity=0;let a=this.toasts.indexOf(t);a>-1&&this.toasts.splice(a,1);let r=()=>{t.el.remove(),this.toasts.length===0&&(this.expanded=!1)};t.contentEl.getAnimations().length?t.contentEl.addEventListener("transitionend",()=>{r()},{once:!0}):r()}updateList(){this.initiallyExpanded||this.expanded?this.expand():this.collapse()}expand(){let t=0;for(let e of this.toasts){let s=this.verticalPosition==="top"?1:-1;e.el.style.transform=`translateY(${s*t}px)`,e.el.style.opacity=100,e.contentEl.style.height=`${e.contentHeight}px`,e.contentEl.style.overflow="auto",t+=e.height}}collapse(){let t=0,s=this.toasts[0]?.contentHeight||0;for(let a of this.toasts){let r=3,o=0,n=10*(this.verticalPosition==="top"?1:-1)*t;a.el.style.zIndex=5e3-t,t>=r?(o=1-.05*(r-1),a.el.style.opacity=0):(o=1-.05*t,a.el.style.opacity=100),a.contentEl.style.height=`${s}px`,a.contentEl.style.overflow="hidden",a.el.style.transform=`scaleX(${o}) translateY(${n}px)`,t++}}},Ys=class extends D{mount(){this.closest("ui-toast-group")||(c(this,"role","status"),document.addEventListener("keydown",t=>{t.key==="Escape"&&this.hideToast()}),this.defaultPosition=this.getAttribute("position")||"bottom end")}showToast(t={}){let e=this.template().nextElementSibling;e&&e.destroyToast();let s=Number(t.duration===void 0?5e3:t.duration),a=t.dataset?.position??this.defaultPosition;t.dataset?.position!==void 0&&delete t.dataset.position,this.setAttribute("position",a);let r=this.prepareToastTemplate(t),o=()=>{this.showPopover(),r.classList.add("showing")},l=()=>{r._hiding=!0,r.classList.remove("showing"),r.getAnimations().length?r.addEventListener("transitionend",()=>{r.remove(),this.hidePopover()},{once:!0}):(r.remove(),this.hidePopover())};this.appendChild(r),o(),r.hideToast=l;let n=s!==0&&qi(()=>{l()},s);r.destroyToast=()=>{n&&n.cancel(),r.remove(),this.hidePopover()},r.addEventListener("mouseenter",()=>{n&&n.pause()}),r.addEventListener("mouseleave",()=>{n&&n.resume()}),r._closeable=new At(r),r._closeable.onClose(()=>r.destroyToast())}hideToast(){let t=this.template().nextElementSibling;t&&t.destroyToast()}template(){return this.querySelector("template")}prepareToastTemplate(t){let e=t.slots||{},s=t.dataset||{},a=this.template();if(!a)return console.warn("ui-toast: no template element found",this);let r=a.content.cloneNode(!0).firstElementChild;return r.setAttribute("aria-atomic","true"),Object.entries(e).forEach(([o,l])=>{[null,void 0,!1].includes(l)||r.querySelectorAll(`slot[name="${o}"]`).forEach(n=>{n.replaceWith(document.createTextNode(l))})}),Object.entries(s).forEach(([o,l])=>{r.dataset[o]=l}),r.querySelectorAll("slot").forEach(o=>o.remove()),r}};C("toast-group",Hs);C("toast",Ys);var $s=class i extends B{boot(){this._disableable=new O(this),this._disableable.onInitAndChange(t=>{this.walker().each(e=>{e.disabled=t})}),this._selectable=new X(this),this._controllable=new W(this,{disabled:this._disabled,bubbles:!0}),this._focusable=new gt(this,{wrap:!0}),this._submittable=new it(this,{name:this.getAttribute("name"),value:this._selectable.getState(),includeWhenEmpty:!1}),this._controllable.initial(t=>t&&this._selectable.setState(t)),this._controllable.getter(()=>this._selectable.getState()),this._detangled=R(),this._controllable.setter(this._detangled(t=>{this._selectable.setState(t)})),this._selectable.onChange(this._detangled(()=>{this._controllable.dispatch()})),this._selectable.onInitAndChange(()=>{this._submittable.update(this._selectable.getState())}),y(this,"keydown",t=>{["ArrowDown","ArrowRight"].includes(t.key)?(this._focusable.focusNext(),t.preventDefault(),t.stopPropagation()):["ArrowUp","ArrowLeft"].includes(t.key)&&(this._focusable.focusPrev(),t.preventDefault(),t.stopPropagation())}),c(this,"role","radiogroup"),queueMicrotask(()=>{this._submittable.update(this._selectable.getState())})}walker(){return q(this,(t,{skip:e,reject:s})=>{if(t instanceof i)return s();if(t.localName!=="ui-radio")return e()})}},zs=class extends B{boot(){let t=this;this._disableable=new O(this),this._selectable=new L(t,{value:this.hasAttribute("value")?this.getAttribute("value"):Math.random().toString(36).substring(2,10),label:this.hasAttribute("label")?this.getAttribute("label"):null,selectedInitially:this.hasAttribute("checked"),dataAttr:"data-checked",ariaAttr:"aria-checked"}),this.value=this._selectable.getValue(),this._selectable.onChange(()=>{this._selectable.isSelected()&&this._focusable.focus(!1)}),this._disableable.onChange(e=>{e?this._focusable.untabbable():this._selectable.isSelected()&&this._focusable.tabbable()}),c(t,"role","radio"),this._focusable=new V(t,{disableable:this._disableable,tabbableAttr:"data-active"}),y(t,"click",this._disableable.disabled(e=>{e.preventDefault(),e.stopPropagation()}),{capture:!0}),y(t,"click",this._disableable.enabled(e=>{this._selectable.press()})),y(t,"keydown",this._disableable.enabled(e=>{e.key==="Enter"&&this.closest("form")?.requestSubmit()})),y(t,"keydown",this._disableable.enabled(e=>{e.key===" "&&(e.preventDefault(),e.stopPropagation())})),y(t,"keyup",this._disableable.enabled(e=>{e.key===" "&&(this._selectable.press(),e.preventDefault(),e.stopPropagation())})),jo(t),y(t,"focus",e=>{we()&&this._selectable.select()})}get checked(){return this._selectable.isSelected()}set checked(t){(this.closest("ui-radio-group")?._detangled||(()=>{}))(()=>{t&&this._selectable.select()})()}};function jo(i){i.closest("label")?.addEventListener("click",t=>{i.contains(t.target)||i.click()})}P(({css:i})=>i`ui-radio-group { display: block; }`);P(({css:i})=>i`ui-radio { display: inline-block; user-select: none; }`);C("radio-group",$s);C("radio",zs);var Ei=class i extends D{boot(){this._disabled=this.hasAttribute("disabled")}mount(){this.walkPanels(t=>cr(t)),new MutationObserver(t=>{this.walkPanels(e=>cr(e))}).observe(this,{childList:!0})}showPanel(t){this.walkPanels(e=>{e.getAttribute("name")===t?e.show():e.hide()})}getPanel(t){return this.walkPanels((e,s)=>{e.getAttribute("name")===t&&s(e)})}walkPanels(t){let e=!1,s;for(let a of this.children)if(!(a instanceof i)&&!(a instanceof ki)&&(t(a,r=>{e=!0,s=r}),e))break;return s}},Gs=class extends D{boot(){y(this,"scroll",t=>{let e=Math.abs(this.scrollLeft)/(this.scrollWidth-this.clientWidth)*100;this.style.setProperty("--flux-scroll-percentage",e+"%")})}},ki=class i extends B{boot(){this._focusable=new gt(this,{wrap:!0}),this._selectableGroup=new X(this),this._controllable=new W(this,{disabled:this._disabled}),this._controllable.initial(e=>e&&this._selectableGroup.setState(e)),this._controllable.getter(()=>this._selectableGroup.getState());let t=R();this._controllable.setter(t(e=>{this._selectableGroup.setState(e)})),this._selectableGroup.onChange(t(()=>{this._controllable.dispatch()})),y(this,"keydown",e=>{["ArrowDown","ArrowRight"].includes(e.key)?(this._focusable.focusNext(),e.preventDefault(),e.stopPropagation()):["ArrowUp","ArrowLeft"].includes(e.key)&&(this._focusable.focusPrev(),e.preventDefault(),e.stopPropagation())}),c(this,"role","tablist")}mount(){this.initializeTabs(),this._focusable.ensureTabbable(),this._selectableGroup.getState()||this._selectableGroup.selectFirst(),new MutationObserver(t=>{this.initializeTabs();let e=this._selectableGroup.selected();e.el.closest("ui-tab-group").showPanel(e.value)}).observe(this,{childList:!0})}initializeTabs(){this.walker().each(t=>{t._initialized||t._disableable||t.hasAttribute("action")||(Xo(t),t._initialized=!0)})}walker(){return q(this,(t,{skip:e,reject:s})=>{if(t instanceof Ei||t instanceof i)return s();if(!["a","button"].includes(t.localName))return e()})}};function Xo(i){i._disableable=new O(i);let t=i.matches("a")?i:null,e=t||i;i._disableable.onInitAndChange(a=>{a?c(e,"aria-disabled","true"):A(e,"aria-disabled")});let s=U(e,"tab");if(c(e,"role","tab"),e._focusable=new V(e,{disableable:i._disableable,tabbableAttr:"data-active"}),!t){let a=i.getAttribute("name");i._selectable=new L(i,{value:a||Math.random().toString(36).substring(2,10),label:i.hasAttribute("label")?i.getAttribute("label"):i.textContent.trim(),selectedInitially:i.hasAttribute("selected"),toggleable:!1}),y(i,"click",()=>i._selectable.press()),i._selectable.onInitAndChange(()=>{let r=i.closest("ui-tab-group")?.getPanel(a);i._selectable.getState()?r?.show():r?.hide(),i._selectable.getState()&&i._focusable.focus(!1)}),i.closest("ui-tab-group")?.hasAttribute("manual")||y(i,"focus",()=>i._selectable.select()),queueMicrotask(()=>{let r=i.closest("ui-tab-group");if(!r)return;let o=r.getPanel(a);if(!o)throw new Error("Could not find panel...");c(i,"aria-controls",o.id),c(o,"aria-labelledby",i.id)})}}function cr(i){i._initialized||(U(i,"tab-panel"),c(i,"role","tabpanel"),i.hasAttribute("tabindex")||c(i,"tabindex","-1"),i.show=()=>{c(i,"data-selected",""),c(i,"tabindex","0")},i.hide=()=>{A(i,"data-selected"),c(i,"tabindex","-1")},i._initialized=!0)}P(({css:i})=>i`ui-tab-group, ui-tabs { display: block; cursor: default; }`);C("tab-group",Ei);C("tabs-scroll-area",Gs);C("tabs",ki);document.addEventListener("alpine:init",()=>{let i=window.Flux?.applyAppearance;i||(i=()=>{window.Flux.appearance=null,window.localStorage.removeItem("flux.appearance")});let t=Alpine.reactive({toast(...s){let a={slots:{},dataset:{}};typeof s[0]=="string"&&(a.slots.text=s.shift()),typeof s[0]=="string"&&(a.slots.heading=a.slots.text,a.slots.text=s.shift());let r=s.shift()||{};r.text&&(a.slots.text=r.text),r.heading&&(a.slots.heading=r.heading),r.variant&&(a.dataset.variant=r.variant),r.position&&(a.dataset.position=r.position),r.duration!==void 0&&(a.duration=r.duration),document.dispatchEvent(new CustomEvent("toast-show",{detail:a}))},modal(s){return{show(){document.dispatchEvent(new CustomEvent("modal-show",{detail:{name:s}}))},close(){document.dispatchEvent(new CustomEvent("modal-close",{detail:{name:s}}))}}},modals(){return{close(){document.dispatchEvent(new CustomEvent("modal-close",{detail:{}}))}}},appearance:window.localStorage.getItem("flux.appearance")||"system",systemAppearanceChanged:1,get dark(){return JSON.stringify(t.systemAppearanceChanged),t.appearance==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches:t.appearance==="dark"},set dark(s){let a=this.dark;s!==a&&(s?t.appearance="dark":t.appearance="light")}});window.Flux=t,Alpine.magic("flux",()=>t),Alpine.effect(()=>{i(t.appearance)}),document.addEventListener("livewire:navigated",()=>{i(t.appearance)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{t.systemAppearanceChanged++,i(t.appearance)})});!ca()&&!ha()&&da();})();
